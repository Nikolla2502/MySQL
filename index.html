<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="media/logo.png">

    <link rel="stylesheet" href="stylecours.css" />
    
    <title>SQL</title>
  </head>

  <body>

    <div class="title">Impl√©mentez vos bases de donn√©es relationnelles avec SQL</div>

    <div class="content">
      <div class="sommaire">
        <h2 id="sommaire">- Sommaire -</h2>
        <ul class="list_sommaire">  
            <li><strong><a href="#sgbd">1.1 - D√©couvrez le syst√®me de gestion de base de donn√©es (SGBD) -</a></strong></li>
            <li><strong><a href="#MySQL_install">1.2 - Installez le SGBD MySQL -</a></strong></li>
            <li><strong><a href="#bdd">1.3 - Cr√©ez votre base de donn√©es (BDD) -</a></strong></li>
            <li><strong><a href="#data_type"> - Types de donn√©es -</a></strong></li>
            <li><strong><a href="#contraintes">1.4 - Les contraintes -</a></strong></li>
            <li><strong><a href="#BDD_data_insert">2.1 - Ins√©rez des donn√©es dans votre BDD -</a></strong></li>
            <li><strong><a href="#BDD_data_select">2.2 - S√©lectionnez les donn√©es pr√©sentes dans votre BDD -</a></strong></li>
            <li><strong><a href="#update_BDD">2.3 - Mettez √† jour les donn√©es de votre BDD -</a></strong></li>
            <li><strong><a href="#delete_BDD">2.4 - Supprimez des objets dans votre BDD -</a></strong></li>
            <li><strong><a href="#extract_data">3.1 - Extrayez des informations sp√©cifiques de votre BDD -</a></strong></li>
            <li><strong><a href="#count">3.2 - Effectuez des op√©rations et sauvegardez vos requ√™tes -</a></strong></li>
            <li><strong><a href="#join">3.3 - Impl√©mentez des relations entre vos donn√©es gr√¢ce √† JOIN -</a></strong></li>
            <li><strong><a href="#alter_table">4.1 - Modifiez la structure d‚Äôun objet avec ALTER TABLE -</a></strong></li>
            <li><strong><a href="#relation_un_plusieurs">4.2 - Ajoutez une relation un √† plusieurs -</a></strong></li>
            <li><strong><a href="#relation_plusieurs_plusieurs">4.3 - Ajoutez une relation plusieurs √† plusieurs -</a></strong></li>
            <li><strong><a href="CommandeSQL.html" target="_blank">Commande MySQL</a></strong></li>
            <li><strong><a href="quizz.html" target="_blank">Quiz MySQL</a></strong></li>
            <li><strong><a href="#mysql_connect" target="_blank">5 - Connecter une base de donn√©es MySQL √† une app Node.js</a></strong></li>


        </ul>
      </div>
      <div class="sommaire">
        <h2>- Ressource -</h2>
        <ul class="list_sommaire">
          <li><a href="https://www.mysql.com/fr/" target="_blank">MySQL</a></li>
          <li><a href="https://dev.mysql.com/downloads/installer/" target="_blank">MySQL Install</a></li>
          <li><a href="https://www.oracle.com/fr/database/" target="_blank">Oracle</a></li>
          <li><a href="https://www.postgresql.org/" target="_blank">PostgreSQL</a></li>
          <li><a href="https://www.sqlite.org/index.html" target="_blank">SQLite</a></li>
          <li><a href="https://dev.mysql.com/doc/refman/8.0/en/data-types.html" target="_blank">SQL Data Types</a></li>
          
        </ul>
        <h2>- Cours et Tutos -</h2>
        <ul class="list_sommaire">
          <li><a href="https://www.youtube.com/watch?v=qrmLVJBJ-D4&list=PLjwdMgw5TTLUJLpzUYGBK7K5-hPgZA7zo" target="_blank">Grafikart - Tuto MySQL YouTube</a></li>
          <li><a href="https://grafikart.fr/tutoriels/introduction-1093#autoplay" target="_blank">Grafikart - Tuto MySQL</a></li>
          <li><a href="https://www.youtube.com/watch?v=3KwmNNucIjA&list=PLrSOXFDHBtfGl66sXijiN8SU9YJaM_EQg" target="_blank">FormationVid√©o - Tuto MySQL</a></li>


          
        </ul>
      </div>
    </div>
    <h3 class="sommaire_fixed"><a href="#sommaire">Index</a></h3>
    <h2 id="sgbd">1.1 - D√©couvrez le syst√®me de gestion de base de donn√©es (SGBD) -</h2> 

    <h3>D√©couvrez votre mission dans ce cours</h3>
    Dans ce cours, nous allons cr√©er ensemble une base de donn√©es (BDD) pour une application imaginaire, Foodly.<br>
    Cette application permet √† des internautes de s√©lectionner les aliments qu‚Äôils souhaitent acheter pour voir leur composition en prot√©ines, graisses, sucres, etc.<br>
    <figure>
      <img src="media/1_Foodly-logo_static.png" alt="foodly">
    </figure><br>
    <div class="remarque">
      J‚Äôutiliserai tout au long du cours l'abr√©viation <strong>BDD pour base de donn√©es</strong>.<br>
      Vous d√©couvrirez quelques autres abr√©viations que je vous expliquerai au fur et √† mesure, mais c‚Äôest surtout celle-ci que vous devez retenir pour l‚Äôinstant !
    </div><br>
    La BDD de Foodly va donc stocker les donn√©es dont l‚Äôapplication a besoin pour fonctionner, √† savoir  :
    <ul>
      <li>
        les utilisateurs inscrits ; 
      </li><br>
      <li>
        les aliments disponibles.
      </li><br>
    </ul>
Chacune de ces donn√©es aura des caract√©ristiques, comme l‚Äôe-mail pour l‚Äôutilisateur ou les calories pour les aliments.<br>
Nous allons les voir par la suite.<br>
<figure>
  <img src="media/2_preÃÅsentation-fil-rouge_static.png" alt="foodly">
  <figcaption>Les donn√©es utilisateur et aliment √† stocker dans la BDD Foodly</figcaption>
</figure><br>
√Ä la fin de ce cours, vous aurez cr√©√© plusieurs utilisateurs en base, de nombreux aliments, ainsi qu‚Äôun moyen de lier les utilisateurs aux aliments qu‚Äôils ont achet√©s.<br>
Avant de mettre les mains dans le cambouis, on doit passer par une partie pas forc√©ment plaisante, mais indispensable : le choix et l‚Äôinstallation de notre syst√®me de gestion de bases de donn√©es.<br>
Car sans lui, pas de BDD.<br><br>
Installer des logiciels sur son ordinateur n‚Äôest pas la chose la plus dr√¥le.<br>
Pour avoir d√ª installer deux fois d‚Äôaffil√©e toutes les librairies (petits programmes qui nous permettent de coder) sur mon ordinateur professionnel, apr√®s me l‚Äô√™tre fait voler, je peux vous l‚Äôassurer, personne n‚Äôaime √ßa.<br>
Je vous promets de faire au mieux pour rendre cela plaisant et aller droit au but.<br><br>
Votre objectif une fois cette partie finie : √™tre capable de choisir votre syst√®me de gestion de base de donn√©es et de l‚Äôinstaller.

<h3>Choisissez votre SGBD</h3>
<strong>Le SGBD est le logiciel qui va vous permettre de manipuler les donn√©es d‚Äôune base</strong>.<br>
C‚Äôest ce logiciel qui commande les interactions avec votre base pour y r√©cup√©rer, ajouter, modifier ou supprimer des donn√©es.<br>
Pour √©changer avec votre base, vous allez donc donner des ordres √† votre SGBD.<br>
Des ordres en fran√ßais ?<br>
Pas exactement !<br>
Ces ordres, vous allez les lui donner dans un langage tr√®s simple : <strong>le langage SQL</strong>.<br>
Pas d‚Äôinqui√©tude, on va avancer pas √† pas ensemble pour que vous puissiez prendre en main ce langage !<br>
Le SQL, abr√©viation de Structured Query Language (en fran√ßais, langage de requ√™te structur√©e), est un langage informatique qui vous permet d'interagir avec vos bases de donn√©es.<br>
C‚Äôest le plus r√©pandu ; par cons√©quent il est indispensable de le conna√Ætre.<br>
On va donc s‚Äôen servir pour g√©rer notre base de donn√©es pour la suite du cours.<br><br>
Imaginez qu‚Äôun utilisateur arrive sur Foodly.<br>
Il scanne un aliment pr√©sent dans son supermarch√© pour conna√Ætre ses caract√©ristiques nutritionnelles.<br>
Que va faire notre application ?<br>
L‚Äôapplication va traduire cette recherche en SQL et l‚Äôenvoyer au SGBD, qui va r√©cup√©rer l‚Äôaliment en question dans le stockage de la base de donn√©es, pour ensuite le redonner √† l‚Äôapplication.<br>
L‚Äôutilisateur retrouvera ainsi son aliment avec toutes ses caract√©ristiques.<br>
<figure>
  <img src="media/3_Lien-SGBD-SQL_static.png" alt="">
  <figcaption>La relation entre le langage SQL et le SGBD lors d'une action sur l'application</figcaption>
</figure><br>
Chaque SGBD impl√©mente sa propre syntaxe du SQL en plus des normes communes √† tous.<br>
Vous vous demandez s√ªrement pourquoi il existe diff√©rents SGBD et comment en choisir un plut√¥t qu‚Äôun autre.<br>
C‚Äôest exactement ce que je vais vous expliquer dans la suite de ce chapitre.<br><br>

<h3>D√©couvrez les diff√©rents SGBD</h3>
<ul>
  <li><strong>MySQL</strong><br>
  <strong><a href="https://www.mysql.com/fr/" target="_blank">MySQL</a> est le plus connu des SGBD</strong> .<br>
  C‚Äôest le plus utilis√©, car il √©tait (auparavant) open-source (ce qui veut dire que son code et son utilisation √©taient gratuits).<br>
  J‚Äôinsiste sur le ‚Äúauparavant‚Äù, car MySQL a depuis √©t√© rachet√© par Oracle Corporation, et n‚Äôest plus open-source.<br>
  N√©anmoins, il en existe une ‚Äúcopie‚Äù open-source appel√©e MariaDB, qui suit les m√™mes r√®gles de langage que MySQL (et que je vous recommande).<br>
  MySQL est surtout connu pour √™tre le SGBD utilis√© par les sites WordPress, ce qui a fait grandement augmenter sa popularit√©.<br>
  Malgr√© cette popularit√©, c‚Äôest un peu la ‚Äút√™te de mule‚Äù des SGBD.<br>
  Il ne suit pas rigoureusement la syntaxe pr√©conis√©e par le SQL.<br>
  Il est aussi parfois trop ‚Äúpermissif‚Äù sur les requ√™tes SQL, provoquant des erreurs.<br>
  Mais c‚Äôest un SGBD robuste, qui fonctionne tr√®s bien, m√™me sur de grandes quantit√©s de donn√©es !<br>
  Par exemple, c‚Äô√©tait pendant longtemps le seul SGBD utilis√© par Facebook.
  </li><br>
  <li><strong>Oracle Database</strong><br>
    <strong><a href="https://www.oracle.com/fr/database/" target="_blank">Oracle</a> est le SGBD √©dit√© par Oracle Corporation</strong> .<br>
    C‚Äôest tr√®s cher, mais utile pour traiter un tr√®s gros volume de donn√©es.<br>
    Du coup, ce sont presque exclusivement les grandes entreprises qui l‚Äôutilisent.<br>
    Mais m√™me en entreprise (il est par exemple utilis√© par Samsung), Oracle tend √† se faire rattraper par les SGBD open-source type MariaDB ou PostgreSQL.<br>
    Il est en r√©elle perte de vitesse sur le march√©.
  </li><br>
  <li><strong>PostgreSQL</strong><br>
    <strong><a href="https://www.postgresql.org/" target="_blank">PostgreSQL</a> est ‚Äúl‚Äôautre‚Äù grand SGBD open-source disponible sur le march√©.</strong> .<br>
    Moins utilis√© que MySQL car longtemps confin√© au monde linuxien (syst√®me d‚Äôexploitation Linux), et plus obscur aux yeux des d√©butants.<br>
    Mais c‚Äôest en train de changer car c‚Äôest le SGBD qui suit le plus les recommandations du SQL, ainsi que le plus rapide (ces derni√®res ann√©es).<br>
    Il est notamment utilis√© par Instagram ou par Spotify.
  </li><br>
  <li><strong>SQLite</strong><br>
    <strong><a href="https://www.sqlite.org/index.html" target="_blank">SQLite</a> c‚Äôest le ‚Äúpetit fr√®re‚Äù. Mais petit ne veut pas dire moins puissant, bien au contraire.</strong> .<br>
    √Ä l‚Äôinstar des autres SGBD, SQLite stocke toute la base de donn√©es dans un seul et unique fichier.<br>
    Peu propice √† l‚Äôutilisation sur un grand nombre de donn√©es, c‚Äôest un SGBD tr√®s simple √† configurer et qui ‚Äúne prend pas la t√™te‚Äù.<br>
    C‚Äôest d‚Äôailleurs le SGBD qu‚Äôon utilise quand on d√©veloppe une base de donn√©es ‚Äúen local‚Äù (sur son ordinateur), alors qu‚Äôune fois ‚Äúen production‚Äù (sur un serveur sp√©cifique g√©n√©ralement utilis√© par votre entreprise ou vos clients), on va utiliser MySQL ou PostgreSQL.<br>
    C‚Äôest aussi le SGBD utilis√© par vos applications Android (par exemple pour vos films Netflix en mode hors-connexion) pour stocker de la donn√©e !
  </li><br>
</ul>
Pour vous aider, voici un tableau r√©capitulatif des forces et faiblesses de chaque SGBD :<br>
<table>
  <tr>
      <th></th>
      <th>MySQL</th>
      <th>Oracle Database</th>
      <th>PostgreSQL</th>
      <th>SQLite</th>
  </tr>
  <tr>
      <td>Popularit√©</td>
      <td>tr√®s r√©pandu</td>
      <td>Utilis√© par les grands groupes<br> ayant un grand nombre de donn√©es</td>
      <td>moins r√©pandu que les autres</td>
      <td>r√©pandu pour le prototypage</td>
  </tr>
  <tr>
      <td>Prix</td>
      <td>gratuit (licence ferm√©e)</td>
      <td>tr√®s cher (licence ferm√©e)</td>
      <td>gratuit (open-source)</td>
      <td>gratuit (open-source)</td>
  </tr>
  <tr>
    <td>Similarit√© avec le langage SQL</td>
    <td>ne suit pas toujours la syntaxe SQL</td>
    <td>ne suit pas toujours la syntaxe SQL</td>
    <td>suit la syntaxe SQL de tr√®s pr√®s</td>
    <td>suit la syntaxe SQL de tr√®s pr√®s</td>
  </tr>
  <tr>
    <td>Entreprises utilisatrices</td>
    <td>utilis√© par Facebook</td>
    <td>utilis√© par Samsung</td>
    <td>utilis√© par Spotify</td>
    <td>utilis√© pour les apps Android</td>
  </tr>
</table><br>
<h3>En r√©sum√©</h3>
<ul>
  <li>Le langage SQL sert √† communiquer entre votre application et votre base de donn√©es.<br>
    Mais c‚Äôest le SGBD qui r√©cup√®re la commande en SQL pour en sortir de la donn√©e depuis la base.</li><br>
  <li>MySQL est un syst√®me de gestion de bases de donn√©es (SGBD).<br>
    C‚Äôest m√™me le plus r√©pandu sur le march√©.</li><br>
</ul>

<h3>Moteur de stockage</h3>
Eviter de lier des tables qui n'ont pas le meme moteur de stockage.
<h4>MyISAM (Non transactionnel)</h4>
Utile si beaucoup de donnees , acces rapide 
<ul>
  <li>Rapide en ecriture</li>
  <li>Tres rapide en lecture</li>
  <li>Efficace pour la recherche</li>
  <li>Efficace pour la recherche</li>
</ul>
Lors d'une requete sur une table celle-ci n'est pas accessible pour d'autre requetes
<h4>InnoDB (Transactionnel)</h4>
<ul>
  <li>Beaucoup d'ecritures</li>
  <li>Securiser les donnees</li>
  <li>Coherence entre les donnees (tables)</li>
</ul>
Lors d'une requete sur une table seule la ligne concernee n'est pas accessible pour d'autre requetes




  <h5><a href="#sommaire">Sommaire</a></h5>

  <h2 id="MySQL_install">1.2 - Installez le SGBD MySQL -</h2>

  <h3>Installez MySQL sur Windows</h3>
  <h4>1.T√©l√©chargez le programme d‚Äôinstallation de MySQL et lancez-le</h4>
  Rendez-vous sur <a href="https://dev.mysql.com/downloads/installer/" target="_blank">https://dev.mysql.com/downloads/installer/</a> et s√©lectionnez le programme d‚Äôinstallation √† t√©l√©charger.<br>
  <div class="remarque">
    Je vous conseille de t√©l√©charger le deuxi√®me programme (la version ‚Äúcommunity‚Äù),<br>
     qui dispose d‚Äôoptions suppl√©mentaires par rapport au premier (la version ‚Äúweb‚Äù).
  </div><br>
  <figure>
    <img src="media/4_MySQL_install.png" alt="">
    <figcaption>√âcran d'installation MySQL</figcaption>
  </figure><br>
  Une fois le programme t√©l√©charg√©, lancez-le en double-cliquant dessus ; vous devriez arriver sur cette fen√™tre :<br>
  <figure>
    <img src="media/5_MySQL_install_2.png" alt="">
    <figcaption>Fen√™tre d'acceptation des conditions g√©n√©rales</figcaption>
  </figure><br>
  Sur l‚Äô√©cran suivant, on vous demandera de faire un choix.<br>
   S√©lectionnez ‚ÄúDeveloper Default‚Äù pour installer MySQL dans son enti√®ret√©.<br>
   <figure>
    <img src="media/6_MySQL_install_3.png" alt="">
    <figcaption>S√©lection du param√©trage par d√©faut</figcaption>
  </figure><br>
  <div class="remarque">
    Les autres options sont utiles si vous utilisez MySQL via un outil externe,<br>
    ou que vous avez d√©j√† votre base de donn√©es.<br>
    Cliquez ensuite sur Suivant.
  </div><br>
  Une fois arriv√© sur la derni√®re √©tape, validez et c‚Äôest bon, MySQL est install√© sur votre machine !<br>
  Il nous reste maintenant √† le lancer.

  <h4>2.Lancez MySQL sur votre ordinateur</h4>
  Pour lancer MySQL sur Windows, double-cliquez sur la console MySQL.<br>
  Celle-ci doit avoir apparu dans vos programmes, suite √† l‚Äôinstallation pr√©c√©dente.<br>
  Une fois celle-ci lanc√©e, vous vous retrouvez dans un terminal.<br>
  C‚Äôest ici que vous allez pouvoir g√©rer votre future base de donn√©es.

  <h4>3.Cr√©ez le mot de passe de l‚Äôutilisateur root de votre BDD</h4>
  Avant de pouvoir lancer MySQL, il vous faut cr√©er un utilisateur dit root, qui sera l‚Äôutilisateur nous permettant de manipuler notre BDD.<br>
  <p>En informatique, et notamment dans le monde des bases de donn√©es, l‚Äôutilisateur dit ‚Äúroot‚Äù (ou racine) est un utilisateur qui a tous les droits (cr√©ation, suppression, mise √† jour).<br>
     C‚Äôest celui qu‚Äôon utilise pour installer des logiciels sur notre machine.<br>
      Mais attention √† ne jamais l‚Äôutiliser en production !<br>
    En effet, il serait tr√®s dangereux qu‚Äôun utilisateur puisse l‚Äôutiliser, car il obtiendrait l‚Äôacc√®s √† toutes nos donn√©es.</p>
    <div class="remarque">
      ‚ÄúUtiliser en production‚Äù d√©signe l‚Äôutilisation de votre base par votre application, depuis un serveur.<br>
      Alors que ‚Äúl‚Äôutilisation en local‚Äù signifie l‚Äôutilisation sur votre ordinateur, √† des fins de d√©veloppement uniquement.
    </div><br>
    Pour cr√©er le mot de passe ‚Äúroot‚Äù, utilisez la commande  <strong><u>mysqladmin -u root password 'votresupermotdepassetrescomplique'</u></strong>   (vous l‚Äôaurez compris, remplacez le mot de passe par celui que vous aurez choisi).<br>
    Vous pouvez vous f√©liciter, vous venez d‚Äôinstaller MySQL sur votre Windows !

    <h3>Installez MySQL sur Mac</h3>
    La mani√®re la plus simple et efficace pour installer MySQL sur Mac est de passer par Homebrew.
    <h4>1.Installez le gestionnaire Homebrew</h4>
    Homebrew est un gestionnaire de paquets.<br>
    C‚Äôest un petit programme que vous pouvez utiliser dans votre terminal pour installer toutes sortes de choses.<br>
    C‚Äôest le gestionnaire open-source le plus r√©pandu sur Mac.<br>
    Tr√®s polyvalent, il va vous permettre d‚Äôinstaller MySQL sur votre machine.<br>
    Mais il peut aussi vous permettre d‚Äôinstaller toutes sortes de programmes, allant de navigateurs comme Google Chrome √† des langages de programmation comme Python !<br><br>
    Pour installer Homebrew, rendez-vous sur le site web de Homebrew : <a href="https://brew.sh/index_fr" target="_blank">https://brew.sh/index_fr</a><br>
    <figure>
      <img src="media/7_homebrew.png" alt="">
      <figcaption>La page d‚Äôaccueil de Homebrew</figcaption>
    </figure><br>
    <ul>
      <li>Ouvrez votre terminal (j‚Äôutilise iTerm2, disponible ici : <a href="https://iterm2.com/" target="_blank">https://www.iterm2.com/</a>; mais vous pouvez utiliser le terminal natif de votre Mac). </li><br>
      <li>Copiez-collez la ligne de commande disponible sur le site dans votre terminal et appuyez sur ‚Äúenter‚Äù.<br>
        √Ä l‚Äôheure actuelle, cette ligne de commande est :<br>
        <strong><u>/bin/bash -c "$(curl -<br>
        fsSL <a href="https://raw.githubusercontent.com/Homebrew/install/master/install.sh" target="_blank">https://raw.githubusercontent.com/Homebrew/install/master/install.sh)‚Äù</a></u></strong> <br>
        <figure>
          <img src="media/7_bin_bash.png" alt="">
          <figcaption>La commande dans votre terminal</figcaption>
        </figure>
       </li><br>
    </ul>
    L‚Äôinstallation de Homebrew devrait se lancer.<br>
    Une fois celle-ci termin√©e, vous pouvez v√©rifier que l‚Äôinstallation s‚Äôest bien d√©roul√©e en tapant  <strong><u>brew help</u></strong>  .<br>
    Vous devriez voir ceci appara√Ætre sur votre terminal :<br>
    <figure>
      <img src="media/9_brewhelp.png" alt="">
      <figcaption>Donn√©es affich√©es dans votre terminal</figcaption>
    </figure><br>
    L‚Äô√©cran liste les commandes disponibles via Homebrew.<br>
    <div class="remarque">
      Si ce n‚Äôest pas le cas, tentez de r√©installer Homebrew.<br>
      Soyez s√ªr d‚Äôavoir une connexion Internet fiable, et que votre compte utilisateur a les privil√®ges administrateur.
    </div><br>
    <h4>2.Installez MySQL via Homebrew</h4>
    Maintenant que Homebrew est install√©, il est temps d‚Äôinstaller MySQL !<br>
    Pour ce faire, rien de plus simple : utilisez la commande d‚Äôinstallation de Homebrew : <br>
    <strong><u>brew install [le nom de ce qu‚Äôon souhaite installer]</u></strong> <br>
    <div class="remarque">
      La commande compl√®te pour installer MySQL est donc  <strong><u>brew install mysql</u></strong>.<br>
      Appuyez sur <span class="keyboard">enter</span> pour la valider.
    </div><br>
    Vous venez d‚Äôinstaller MySQL, mais il vous faut encore le d√©marrer !<br>
    Ne d√©sesp√©rez pas, c‚Äôest encore une fois tr√®s simple, et tout se fait via Homebrew.
    <h4>3.D√©marrez MySQL avec Homebrew</h4>
    Pour que Homebrew puisse d√©marrer des processus (ici, celui de MySQL), utilisez la commande  <strong><u>brew tap homebrew/services</u></strong> .<br>
    Une fois cette commande effectu√©e, d√©marrez MySQL gr√¢ce √† la commande  <strong><u>brew services start mysql</u></strong>  .<br>
    Pour v√©rifier que le processus de MySQL est bien lanc√©, utilisez <strong><u>brew services list</u></strong>.<br>
    Si vous voyez appara√Ætre MySQL dans la liste, c‚Äôest que tout s‚Äôest bien pass√© !<br>
    Vous pouvez m√™me le v√©rifier doublement en tapant la commande  <strong><u>mysql -V</u></strong>  qui vous permet de regarder quelle version de MySQL est actuellement en train de tourner sur votre machine (dans mon cas, la version 8.0.21).<br>
    <figure>
      <img src="media/10_MySQL_mac_install.png" alt="">
      <figcaption>√âcran confirmant l‚Äôinstallation de Homebrew</figcaption>
    </figure><br>
    <h4>4.Cr√©ez le mot de passe de l‚Äôutilisateur root de votre BDD</h4>
    Il vous reste une ultime commande et le tour est jou√© !<br>
    C‚Äôest celle qui vous permet de cr√©er le mot de passe de l‚Äôutilisateur ‚Äúroot‚Äù.<br>
    <p>En informatique, et notamment dans le monde des bases de donn√©es, l‚Äôutilisateur dit ‚Äúroot‚Äù (ou racine) est un utilisateur qui a tous les droits (cr√©ation, suppression, mise √† jour).<br>
      C‚Äôest celui qu‚Äôon utilise pour installer des logiciels sur notre machine.<br>
       Mais attention √† ne jamais l‚Äôutiliser en production !<br>
     En effet, il serait tr√®s dangereux qu‚Äôun utilisateur puisse l‚Äôutiliser, car il obtiendrait l‚Äôacc√®s √† toutes nos donn√©es.</p>
     <div class="remarque">
       ‚ÄúUtiliser en production‚Äù d√©signe l‚Äôutilisation de votre base par votre application, depuis un serveur.<br>
       Alors que ‚Äúl‚Äôutilisation en local‚Äù signifie l‚Äôutilisation sur votre ordinateur, √† des fins de d√©veloppement uniquement.
     </div><br>
     Pour cr√©er le mot de passe ‚Äúroot‚Äù, utilisez la commande  <strong><u>mysqladmin -u root password 'votresupermotdepassetrescomplique'</u></strong>   (vous l‚Äôaurez compris, remplacez le mot de passe par celui que vous aurez choisi).<br>
     <figure>
      <img src="media/11_MySQL_root_user.png" alt="">
      <figcaption>La commande dans votre terminal</figcaption>
    </figure><br>
     Vous pouvez vous f√©liciter, vous venez d‚Äôinstaller MySQL sur votre Mac !

     <h3>Installez MySQL sur Linux (Ubuntu)</h3>
     La mani√®re la plus simple et efficace pour installer MySQL sur Linux est de passer par le terminal.<br>
     Le terminal, c‚Äôest un programme qui vous permet de lancer des commandes de programmation (vous savez, le fameux √©cran avec du texte bizarre comme dans Matrix).<br>
     Il se trouve dans vos programmes (il est install√© par d√©faut sur Linux).<br>
     <h4>1.Installez MySQL via le terminal</h4>
     Sur Linux, la vie est tr√®s simple car vous disposez d‚Äôun super gestionnaire de paquets : APT.<br>
     C‚Äôest un petit programme que vous pouvez utiliser dans votre terminal pour installer toutes sortes de choses.<br>
     Tr√®s polyvalent, il va vous permettre d‚Äôinstaller MySQL sur votre machine.<br>
     Mais il peut aussi vous permettre d‚Äôinstaller toutes sortes de programmes, comme par exemple des langages de programmation comme Python !<br><br>
     Commencez par mettre √† jour APT en tapant dans votre terminal la commande  <strong><u>sudo apt update</u></strong>  .<br>
     Appuyez sur <span class="keyboard">enter</span> pour la valider.<br>
     Une fois cette commande effectu√©e, installez MySQL en tapant la commande<br>
     <strong><u>sudo apt install mysql-community-server</u></strong>.<br>
     MySQL est  maintenant install√© sur votre machine, il reste √† le d√©marrer et le configurer.
     <h4>2.D√©marrez MySQL avec le terminal</h4>
     Pour d√©marrer MySQL, il vous faut lancer le ‚Äúservice‚Äù de MySQL.<br>
     C‚Äôest-√†-dire faire comprendre √† votre ordinateur qu‚Äôil doit lancer MySQL et le laisser tourner.<br>
      Pour ce faire, entrez la commande <strong><u>sudo service mysql start</u></strong> dans votre terminal.<br>
    MySQL tourne (enfin üôåüèº), mais il vous reste √† le configurer.
    <h4>3.Cr√©ez le mot de passe de l‚Äôutilisateur root de votre BDD</h4>
    Il vous reste une ultime commande et le tour est jou√© !<br>
    C‚Äôest celle qui vous permet de cr√©er le mot de passe de l‚Äôutilisateur ‚Äúroot‚Äù.<br>
    <p>En informatique, et notamment dans le monde des bases de donn√©es, l‚Äôutilisateur dit ‚Äúroot‚Äù (ou racine) est un utilisateur qui a tous les droits (cr√©ation, suppression, mise √† jour).<br>
      C‚Äôest celui qu‚Äôon utilise pour installer des logiciels sur notre machine.<br>
       Mais attention √† ne jamais l‚Äôutiliser en production !<br>
     En effet, il serait tr√®s dangereux qu‚Äôun utilisateur puisse l‚Äôutiliser, car il obtiendrait l‚Äôacc√®s √† toutes nos donn√©es.</p>
     <div class="remarque">
       ‚ÄúUtiliser en production‚Äù d√©signe l‚Äôutilisation de votre base par votre application, depuis un serveur.<br>
       Alors que ‚Äúl‚Äôutilisation en local‚Äù signifie l‚Äôutilisation sur votre ordinateur, √† des fins de d√©veloppement uniquement.
     </div><br>
     Pour cr√©er le mot de passe ‚Äúroot‚Äù, utilisez la commande  <strong><u>mysqladmin -u root password 'votresupermotdepassetrescomplique'</u></strong>   (vous l‚Äôaurez compris, remplacez le mot de passe par celui que vous aurez choisi).<br>
     <figure>
      <img src="media/12_MySQL_root_user.png" alt="">
      <figcaption>La commande dans votre terminal</figcaption>
    </figure><br>
     Vous pouvez vous f√©liciter, vous venez d‚Äôinstaller MySQL sur votre Linux !
    <h3>En r√©sum√©</h3>
    La premi√®re chose √† faire pour utiliser un SGBD est de cr√©er un utilisateur ‚Äúroot‚Äù, qui aura tous les droits pour cr√©er et modifier des bases de donn√©es.

    <h5><a href="#sommaire">Sommaire</a></h5>

    <h2 id="bdd">1.3 - Cr√©ez votre base de donn√©es (BDD) -</h2> 

    <h3>Cr√©ez votre BDD avec CREATE DATABASE</h3>
    Une application, c‚Äôest le code informatique qui vous permet d‚Äôeffectuer des actions.<br>
    Par exemple, commander un taxi ou √©crire du texte.<br>
    Or, cette application a besoin de donn√©es pour exister, donn√©es qu‚Äôelle va piocher dans une BDD.<br><br>
    <div class="remarque">
      Prenez Le Bon Coin : le code de l‚Äôapplication vous permet de voir des listes d‚Äôobjets √† acheter pr√®s de chez vous, de contacter leur propri√©taire, etc.<br>
      Mais pour conna√Ætre ces objets, num√©ros de t√©l√©phone, adresses, Le Bon Coin a d√ª aller les chercher dans une base de donn√©es (probablement MySQL üòâ).
    </div><br><br>
    Cr√©ons la base qui contiendra nos objets.
    <ul>
      <li>Dans une BDD, on stocke plusieurs choses.<br>
         Et m√™me un peu ce qu‚Äôon veut. Un objet, c‚Äôest chacune de ces ‚Äúchoses‚Äù.<br>
         Imaginons que vous soyez au march√©. Un objet, c‚Äôest une volaille, un fruit, etc.
        </li><br>
        <li>
          Si on reprend notre exemple de l‚Äôapplication Foodly, une pomme ou une poire sont chacune une instance d‚Äôun objet ‚Äúfruit‚Äù.
        </li><br>
    </ul>
    Chaque application est associ√©e √† une base de donn√©es.<br>
    Foodly √©tant une seule et unique application, nous allons cr√©er une seule BDD.<br>
    Base qu‚Äôon va tout naturellement appeler‚Ä¶ Foodly. <br><br>
    <div class="remarque">
      Une application complexe peut √™tre reli√©e √† plusieurs BDD √† la fois, et ce, pour plusieurs raisons.<br>
      Par exemple, Facebook utilise plusieurs BDD pour des besoins sp√©cifiques (certaines g√®rent mieux la recherche, les autres le stockage‚Ä¶),<br>
      mais surtout pour des raisons de taille de la donn√©e !<br>
      Vous vous doutez qu‚Äôavec plus d‚Äôun milliard d‚Äôutilisateurs, il leur faut plusieurs bases.
    </div><br>
    <div class="important">
      Attention lorsqu‚Äôon nomme les bases de donn√©es !<br>
      Tout comme beaucoup de ‚Äúnoms‚Äù en informatique (variables, objets, identifiants‚Ä¶), ceux-ci ne doivent pas contenir de caract√®res sp√©ciaux ou d‚Äôespaces.<br>
      Il est m√™me recommand√© de n‚Äôutiliser que des caract√®res minuscules.
    </div><br><br>
    Pour activer MySQL dans votre terminal, il va falloir ex√©cuter la commande<br>
     <strong><u>mysql -u root -p</u></strong> .<br>
     Cette commande signale que vous souhaitez lancer MySQL, avec l‚Äôutilisateur root en saisissant le mot de passe (vous vous en souvenez ? Nous en avons parl√© pr√©c√©demment).<br>
     Justement, MySQL nous demande ledit mot de passe.<br>
     Entrez celui que vous avez cr√©√© pr√©c√©demment, et le tour est jou√© !<br><br>
     <figure>
      <img src="media/13_MySQL_start.png" alt="">
      <figcaption>√âcran du terminal suite √† l‚Äôentr√©e de votre mot de passe</figcaption>
    </figure><br><br>
    Pour cr√©er une base, on utilise la commande  <strong><u>CREATE DATABASE nomdelabase;</u></strong>  .<br>
    Pour cr√©er la base de Foodly, la commande √† taper devient  <strong><u>CREATE DATABASE foodly;</u></strong>.<br>
    <figure>
      <img src="media/14_MySQL_create_database.png" alt="">
      <figcaption>√âcran du terminal apr√®s avoir saisi la commande</figcaption>
    </figure><br><br>
<div class="remarque">
  SQL vous indique que la commande a fonctionn√© en r√©pondantQuery OK .
</div><br><br>
Il reste n√©anmoins un probl√®me : MySQL ne sait pas que vous souhaitez sp√©cifiquement utiliser cette base de donn√©es.<br>
Car vous pourriez en avoir plusieurs !<br>
Imaginez que vous travailliez sur plusieurs projets √† la fois, vous pourriez tr√®s bien avoir une base de donn√©es pour chacun.<br>
Pour s√©lectionner la base que vous venez de cr√©er, utilisez la commande  <strong><u>USE nomdelabase;</u></strong>  , qui devient donc‚Ä¶  <strong><u>USE foodly;</u></strong> 
<figure>
  <img src="media/14_MySQL_create_database.png" alt="">
  <figcaption>√âcran du terminal pour l‚Äôutilisation de la BDD</figcaption>
</figure><br><br>
Une fois  <strong><u>USE foodly;</u></strong>   ex√©cut√©e, √ßa y est, la base Foodly est s√©lectionn√©e et vous travaillez uniquement dans cette derni√®re.<br><br>
<div class="important">
  Si jamais vous aviez besoin de changer de base de donn√©es, alors vous devriez r√©p√©ter cette commande pour passer sur la nouvelle base.
</div><br><br>
<video src="media/1_creation_database.mp4" controls width="800"></video><br/><br/>

<h3>Testez l‚Äôactivation de votre BDD avec SHOW TABLES</h3>
Pour tester l‚Äôactivation de votre base de donn√©es, vous allez y ins√©rer votre premier objet.<br>
Dans son √©tat actuel, votre base vide ne vous sert pas √† grand-chose...
<h4>D√©finissez les types de donn√©es</h4>
Avant de pouvoir ins√©rer quoi que ce soit, vous devez d‚Äôabord cr√©er une table.<br>
En effet, chaque ‚Äútable‚Äù est l‚Äô√©quivalent d‚Äôune feuille de travail dans un logiciel type Excel ou Google Sheets, qui stocke toutes les occurrences d‚Äôun objet en particulier.<br>
Qui dit base de donn√©es dit type de donn√©es.<br>
MySQL doit savoir quelle forme auront vos objets avant de vous laisser les manipuler dans chaque table.<br>
C‚Äôest l‚Äô√©quivalent en SQL de la mod√©lisation de bases de donn√©es o√π vous devez d√©clarer les objets que vous souhaitez stocker et ce qu‚Äôils vont contenir.<br><br>
<div class="remarque">
  Le type de donn√©e est comme un papier d'identit√©.<br>
  Il est commun √† toutes les personnes d‚Äôun pays et permet de les identifier selon des crit√®res pr√©cis.<br>
  Le mod√®le de donn√©es, c‚Äôest pareil, mais pour chaque objet de la base de donn√©es.
</div><br><br>
Quand on parle de type en base de donn√©es, on peut parler de deux types :
<ul>
  <li><strong>Les types d‚Äôobjets, cat√©goris√©s par leur nom.</strong><br>
    Par exemple, vous avez ici deux objets dont les noms sont utilisateur et aliment.<br>
    La convention veut qu‚Äôon utilise des noms en minuscules et au singulier.
  </li><br>
  <li><strong>Les types de champs</strong><br>
    dont on va parler juste apr√®s.
  </li><br>
</ul><br><br>
Je vous propose de copier-coller cette commande pour cr√©er la table des utilisateurs.<br>
Je vais ensuite vous l‚Äôexpliquer, ne vous en faites pas.<br>
<div class="code">
  CREATE TABLE utilisateur (<br>
  <br>
  id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,<br>
  <br>
  nom VARCHAR(100),<br>
  <br>
  prenom VARCHAR(100),<br>
  <br>
  email VARCHAR(255) NOT NULL UNIQUE<br>
  <br>
  );<br>
</div><br>
On obtient bien  <strong><u>Query OK</u></strong>, donc tout s‚Äôest bien pass√©.<br>
<strong>Votre objet utilisateur va √™tre compos√© de plusieurs caract√©ristiques, aussi appel√©es champs</strong>.<br>
 Tout comme votre passeport qui recense votre nom ou votre √¢ge, eh bien, pour vos utilisateurs, on va faire de m√™me.<br>
Chacun de ces champs doit avoir un type, pour que MySQL comprenne √† quoi ‚Äúva ressembler‚Äù la donn√©e qui sera stock√©e dans ce champ.<br>
Par exemple, est-ce que le champ contiendra du texte, des chiffres, etc.
Ici, on d√©clare plusieurs champs qui seront partag√©s par tous les utilisateurs.<br><br>
<ul id='data_type'><strong>Types de donn√©es</strong>
  <a href="https://www.vulgarisation-informatique.com/mysql-types-donnees.php" target='_blank'>Types de donnees - Vulgarisation-informatique.com</a>
  <li><strong>Types numeriques</strong><br>
    <figure>
      <img src="media/MySQL_type_donnees_1.png" alt="">
    </figure>
  </li><br>
  <li><strong>Types pour les cha√Ænes de caracteres</strong><br>
    <figure>
      <img src="media/MySQL_type_donnees_2.png" alt="">
    </figure>
  </li><br>
  <li><strong>Types pour les dates</strong><br>
    <figure>
      <img src="media/MySQL_type_donnees_3.png" alt="">
    </figure>
  </li><br>
</ul><br><br>
Voici un tableau r√©capitulatif du sch√©ma des utilisateurs :<br>

<table>
<tr>
      <th>Nom du champ</th>
      <th>Type du champ et options</th>
      <th>Description</th>
  </tr>
  <tr>
      <td><strong>id</strong></td>
      <td>PRIMARY KEY (option)</td>
      <td>Champ sp√©cial <strong>obligatoire</strong> dans toutes les tables.<br>
        Indique √† MySQL que ce champ sera l'identifiant permettant d'identifier les objets.</td>
  </tr>
  <tr>
      <td></td>
      <td>INTEGER (type)</td>
      <td>Champ num√©rique sous forme de nombre entier.</td>
  </tr>
  <tr>
    <td></td>
    <td>NOT NULL (option)</td>
    <td>Ce champ ne peut pas √™tre nul.</td>
  </tr>
  <tr>
    <td></td>
    <td>AUTO_INCREMENT (option)</td>
    <td>Ce champ sera cr√©√© par MySQL automatiquement, pas besoin de s'en soucier !<br>
      MySQL va utiliser l'id pr√©c√©dent et y ajouter +1 lors de l'ajout d'un nouvel objet.</td>
  </tr>
  <tr>
    <td><strong>nom</strong></td>
    <td>VARCHAR(100) (type)</td>
    <td>Champ sous forme de texte,<br>
       limit√© √† 100 caract√®res.</td>
  </tr>
  <tr>
    <td><strong>prenom</strong></td>
    <td>VARCHAR(100) (type)</td>
    <td>Champ sous forme de texte,<br>
      limit√© √† 100 caract√®res.</td>
  </tr>
  <tr>
    <td><strong>email</strong></td>
    <td>VARCHAR(255) (type)</td>
    <td>Champ sous forme de texte,<br>
      limit√© √† 255 caract√®res.</td>
  </tr>
  <tr>
    <td><strong></strong></td>
    <td>NOT NULL (option)</td>
    <td>Ce champ ne peut pas √™tre nul.</td>
  </tr>
  <tr>
    <td><strong></strong></td>
    <td>UNIQUE (option)</td>
    <td>Ce champ ne peut pas avoir la m√™me valeur en double.</td>
  </tr>
</table><br>
Une option dans un champ est un attribut optionnel qui va modifier le comportement de ce champ.<br>
Retrouvez sur le site de MySQL tous les types de champs disponibles sur le <a href="https://dev.mysql.com/doc/refman/8.0/en/data-types.html" target="_blank">SGBD</a> (en anglais).<br><br>
Au tour des aliments !<br>
Copiez-collez cette commande pour cr√©er leur table.<br><br>
<div class="code">
  CREATE TABLE aliment (<br>
  <br>
id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,<br>
<br>
nom VARCHAR(100) NOT NULL,<br>
<br>
marque VARCHAR(100),<br>
<br>
sucre FLOAT,<br>
<br>
calories INTEGER NOT NULL,<br>
<br>
graisses FLOAT,<br>
<br>
proteines FLOAT,<br>
<br>
bio BOOLEAN DEFAULT false<br>
<br>
);<br>
</div><br><br>
<ul>
  <li><strong><u>FLOAT</u></strong><br>
    signifie que le champ contiendra des chiffres d√©cimaux ;
  </li><br>
  <li><strong><u>BOOLEAN</u></strong><br>
    est un type de champ tr√®s connu en informatique.<br>
    Il ne peut stocker que les valeurs  <strong><u>true</u></strong>   (vrai) ou  <strong><u>false</u></strong>   (faux) ;
  </li><br>
  <li><strong><u>DEFAULT</u></strong><br>
    sert √† indiquer une valeur par d√©faut.<br>
    Utile pour ne pas avoir √† sp√©cifier une valeur tout le temps !<br>
    Ici, on indique que la valeur par d√©faut sera la valeur  <strong><u>false</u></strong>  .
  </li><br>
</ul><br>
Et pour les champs, c‚Äôest assez simple :
<ul>
  <li><strong>id</strong><br>
    l'identification de l'objet ;
  </li><br>
  <li><strong>nom</strong><br>le nom de l‚Äôaliment (ex. : lait de soja) ;</li><br>
  <li><strong>marque</strong><br>sa marque (ex. : Bjorg) ;</li><br>
  <li><strong>sucre, calories, graisses, proteines</strong><br>la contenance de chaque √©l√©ment en grammes (ex. : ‚Äú2‚Äù pour 2 grammes) ;</li><br>
  <li><strong>bio</strong><br>si l‚Äôaliment est bio ou non.</li><br>
</ul>
Voici un exemple de ce que donnerait cette table avec quelques aliments :<br>
<table>
  <tr>
      <th>id</th>
      <th>nom</th>
      <th>marque</th>
      <th>calories</th>
      <th>sucre</th>
      <th>graisses</th>
      <th>proteines</th>
      <th>bio</th>
  </tr>
  <tr>
      <td>1</td>
      <td>Pomme</td>
      <td>Monoprix</td>
      <td>65</td>
      <td>14,4</td>
      <td>0,4</td>
      <td>0,4</td>
      <td>FALSE</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Oeuf Bio</td>
    <td>Carrefour</td>
    <td>167</td>
    <td>0</td>
    <td>11,1</td>
    <td>14,2</td>
    <td>TRUE</td>
  </tr>
  <tr>
    <td>3</td>
    <td>Brique de lait</td>
    <td>Intermarch√©</td>
    <td>414</td>
    <td>43,2</td>
    <td>13,5</td>
    <td>28,8</td>
    <td>FALSE</td>
  </tr>
</table><br>
Pour v√©rifier que tout ce que vous avez fait fonctionne, rien de plus simple !<br>
On demande √† MySQL de nous afficher toutes les tables pr√©sentes dans notre base gr√¢ce √† la commande  <strong><u>SHOW tables;</u></strong>.<br>
<figure>
  <img src="media/15_MySQL_show_table.png" alt="">
  <figcaption>√âcran du terminal apr√®s avoir saisi la commande SHOW tables</figcaption>
</figure><br>
On peut m√™me aller encore plus loin en demandant √† MySQL de nous afficher le sch√©ma de chaque table gr√¢ce √† la commande  <strong><u>SHOW COLUMNS FROM lenomdematable;</u></strong>.<br>
Pour lire le sch√©ma de vos tables, il vous faut taper  <strong><u>SHOW COLUMNS FROM utilisateur;</u></strong><br>
   et  <strong><u>SHOW COLUMNS FROM aliment;</u></strong>.<br>
   Si vous obtenez le m√™me r√©sultat que sur ces screenshots, c‚Äôest que vous avez tout bon !<br><br>
   <figure>
    <img src="media/16_MySQL_show_utilisateur.png" alt="">
    <figcaption></figcaption>
  </figure>
  <figure>
    <img src="media/17_MySQL_show_aliment.png" alt="">
    <figcaption>Affichage des sch√©mas des tables utilisateur et aliment</figcaption>
  </figure><br>
  Vous avez saisi ces nouvelles commandes dans votre terminal ? V√©rifiez-les gr√¢ce au screencast r√©capitulatif<br>
  <video src="media/2_verif_database.mp4" controls width="800"></video><br/><br/>

<div class="important">
Lors des parties suivantes, je vous demanderai parfois de t√©l√©charger un fichier afin de mettre votre BDD √† jour.<br>
Pour ce faire, j‚Äôai cr√©√© un projet GitHub disponible ici : <a href="https://github.com/OpenClassrooms-Student-Center/Course-implementez-BDD-SQL" target="_blank">Github</a><br>
√Ä chaque fois que vous souhaiterez mettre √† jour votre BDD :
<ul>
  <li>
    T√©l√©chargez le fichier correspondant depuis GitHub, chaque dossier sur GitHub repr√©sentant la partie du cours dans laquelle vous vous trouvez.
  </li><br>
  <li>
    Placez ce fichier dans le dossier correspondant √† votre utilisateur Windows, Mac ou Linux.
  </li><br>
  <li>
    Allez dans votre terminal, entrez la commande  <strong><u>mysql -u root -p nom_de_la_base_de_donnees < nom_du_fichier.sql</u></strong><br>
    puis tapez votre mot de passe root (que vous venez de cr√©er dans cette partie !).<br>
    Prenez bien soin de remplacer ‚Äúnom_de_la_base_de_donnees‚Äù par le nom de la BDD que vous souhaitez mettre √† jour (par exemple, foodly)<br>
    et ‚Äúnom_du_fichier‚Äù par le nom du fichier t√©l√©charg√© (par exemple, foodly.sql).
  </li><br>
</ul>
</div><br>
Et voil√†, votre BDD est √† jour !

<h3>En r√©sum√©</h3>
<ul>
  <li>Pour cr√©er une base de donn√©es, on utilise la commande  <strong><u>CREATE DATABASE;</u></strong>  .</li><br>
  <li>Une table est un espace dans votre base de donn√©es qui va stocker des objets de m√™me type. On la cr√©e avec la commande  <strong><u>CREATE TABLE;</u></strong>  </li><br>
  <li>Pour v√©rifier la cr√©ation des tables, on utilise la commande  <strong><u>SHOW COLUMNS FROM table;</u></strong>   qui permet de voir la structure de cette table.</li><br>
</ul>
<h5><a href="#sommaire">Sommaire</a></h5>

  <h2 id="contraintes">1.4 - Les contraintes -</h2>
  Les contraintes sont les regles definies sur les tables lors de la creation des tables.
  <ul>
    <li><strong><u>NOT NULL</u></strong><br>
      signifie que le champ doit etre renseigne ;
    </li><br>
    <li><strong><u>DEFAULT</u></strong><br>
      Valeur par defaut.<br>
      Si on veut un boolean avec une valeur par defaut 'false'<br>
      <strong><u>DEFAULT 0</u></strong>
    </li><br>
    <li><strong><u>CHECK</u></strong><br>
      Verification d'une valeur<br>
      Verifier que la valeur "prix" est positive<br>
      <strong><u>CHECK(prix > 0)</u></strong>
         <strong>Ajouter la contrainte CHECK</strong><br>
        <div class="code">
          ALTER TABLE nomdelatable<br>
          ADD  CHECK(prix > 0);
        </div>
        <strong>Ajouter la contrainte CHECK sur plusieurs champs</strong><br>
        <div class="code">
          ALTER TABLE nomdelatable<br>
          ADD  CONSTRAINT CHK_nomdelacontrainte CHECK(prix > 0, stock > 0);
        </div>
        <strong>Supprimer la contrainte CHECK sur plusieurs champs</strong><br>
        <div class="code">
          ALTER TABLE nomdelatable<br>
          DROP CHECK CHK_nomdelacontrainte;
        </div>    
    </li><br>
    <li><strong><u>UNIQUE</u></strong><br>
      Valeur de champs unique.<br>
      Par exemple , un pseudo est unique , 2 utilisateurs ne peuvent pas avoir le meme pseudo.<br>
      La valeur unique permet de verifier que 2 champs differents n'ont pas la meme valeur.<br>
      <strong>Ajouter la contrainte UNIQUE sur 'user_name'</strong><br>
      <div class="code">
        ALTER TABLE nomdelatable<br>
        ADD UNIQUE('user_name');
      </div> 
      <strong>Ajouter la contrainte UNIQUE sur plusieurs champs</strong><br>
      <div class="code">
        ALTER TABLE nomdelatable<br>
        ADD CONSTRAINT UC_user UNIQUE('id_user'user_name');
      </div> 
      <strong>Supprimer la contrainte UNIQUE sur plusieurs champs</strong><br>
      <div class="code">
        ALTER TABLE nomdelatable<br>
        DROP INDEX UC_user;
      </div> 
     
    </li><br>
    <li><strong><u>PRIMARY KEY</u></strong><br>
      Dans le langage SQL la ‚ÄúPRIMARY KEY‚Äù, autrement la cl√© primaire, permet d‚Äôidentifier chaque enregistrement dans une table de base de donn√©es.<br>
      Chaque enregistrement de cette cl√© primaire doit √™tre UNIQUE et ne doit pas contenir de valeur NULL.<br>
      La cl√© primaire est un index, chacune des tables ne peut contenir qu‚Äôune seule cl√© primaire, compos√©e d‚Äôune ou plusieurs colonnes.<br>
      L‚Äôusage le plus fr√©quent consiste √† cr√©er une colonne num√©rique qui s‚Äôincr√©mente automatiquement √† chaque enregistrement gr√¢ce √† <div class="inner_code">AUTO_INCREMENT</div>.
      <strong>Ajouter la cle primaire a 'user_name'</strong><br>
      <div class="code">
        ALTER TABLE nomdelatable<br>
        ADD PRIMARY KEY('user_name');
      </div> 
    </li><br>
    <li><strong><u>AUTO_INCREMENT</u></strong><br>
      Auto incrementation, SQL va incrementer la valeur automatiquement<br>
      Tres utile pour les identifiants
    </li><br>
    <li><strong><u>INDEX</u></strong><br>
      En SQL, les index sont des ressources tr√®s utiles qui permettent d‚Äôacc√©der plus rapidement aux donn√©es.<br>
      Cette <a href="https://sql.sh/cours/index" target='_target'>page</a> explique le fonctionnement des index et leurs int√©r√™ts pour accro√Ætre les performances de lectures des donn√©es.
    </li><br>
  </ul>

  <ul>
    <li><strong>Modifier une contrainte</strong><br>
    <div class="code">
      ALTER TABLE nomdelatable<br>
      ALTER nomdelavaleur SET nomdelacontrainte;
    </div>
    </li><br>
    <li><strong>Supprimer une contrainte</strong><br>
      <div class="code">
        ALTER TABLE nomdelatable<br>
        ALTER nomdelavaleur DROP nomdelacontrainte;
      </div>
      </li><br>
  </ul>


<h5><a href="#sommaire">Sommaire</a></h5>

  <h2 id="BDD_data_insert">2.1 - Ins√©rez des donn√©es dans votre BDD -</h2>
  <figure>
    <img src="media/18_CRUD.png" alt="">
    <figcaption>L‚Äôacronyme CRUD o√π MAJ signifie Mettre √Ä Jour</figcaption>
  </figure><br>
  Commencez d'abord par t√©l√©charger la base de donn√©e <a href="https://github.com/OpenClassrooms-Student-Center/Course-implementez-BDD-SQL/blob/master/partie_2/foodly.sql" target=_blank">Foodly</a> de cette partie 2.

  <h3>Ins√©rez des objets uniques pour alimenter votre BDD</h3>
  Premi√®re √©tape : vous allez ajouter un utilisateur √† votre BDD, car une application sans utilisateurs n‚Äôest pas une BDD.<br>
  Imaginez qu‚Äôun nouvel utilisateur s‚Äôinscrive sur Foodly.<br>
  Comment l‚Äôapplication ferait-elle pour inscrire cet utilisateur dans la base MySQL ?<br>
  <div class="remarque">
    Elle utiliserait la commande <strong><u>SQLINSERT INTO</u></strong>.<br>
    Cette commande prend en compte :
<ul>
  <li>les param√®tres de la table dans laquelle vous souhaitez ajouter l‚Äôobjet (ici la table ‚Äúutilisateur‚Äù) ;</li><br>
  <li>l‚Äôordre des colonnes (ou caract√©ristiques de l‚Äôobjet) ;</li><br>
  <li>ainsi que les valeurs correspondantes pour l‚Äôobjet.</li><br>
</ul>
</div><br>
<img src="media/19_insert.png" alt="">
<figcaption>Insertion d‚Äôun utilisateur dans la BDD de Foodly</figcaption>
</figure><br>
Souvenez-vous, votre table ‚Äúutilisateur‚Äù dispose de 4 champs :<br>
<table>
<tr>
      <th>Nom du champ</th>
      <th>Descriptif du champ</th>
      <th>Exemple de valeur</th>
  </tr>
  <tr>
      <td>id</td>
      <td>identifiant unique de l'utilisateur dans la BDD</td>
      <td>1</td>
  </tr>
  <tr>
      <td>nom</td>
      <td>nom de famille de l'utilisateur</td>
      <td>Durantay</td>
  </tr>
  <tr>
      <td>prenom</td>
      <td>pr√©nom de l'utilisateur</td>
      <td>Quentin</td>
  </tr>
  <tr>
      <td>email</td>
      <td>email de l'utilisateur</td>
      <td>quentin@gmail.com</td>
  </tr>
</table><br>
<div class="remarque">
  Remarquez que je ne me pr√©occupe pas de l‚Äôid.<br>
  Je pourrais tout √† fait le renseigner.<br>
  Mais souvenez-vous, nous l‚Äôavons configur√© de mani√®re √† ce que MySQL l‚Äôauto-incr√©mente pour nous.<br>
  Du coup, soyons fain√©ants et laissons MySQL g√©rer ce param√®tre pour nous !
</div><br><br>
Voici, par exemple, la commande pour m‚Äôajouter en tant qu‚Äôutilisateur dans la base :<br>
<div class="code">
  INSERT INTO `utilisateur` (`nom`, `prenom`, `email`)<br>
  <br>
VALUES<br>
<br>
('Durantay', 'Quentin', 'quentin@gmail.com');<br>
</div><br>
<div class="important">
  Si vous ex√©cutez cette commande plusieurs fois, vous remarquerez  un message d‚Äôerreur.<br>
  C‚Äôest tout √† fait normal.<br>
   Souvenez-vous, l‚Äôe-mail d‚Äôun utilisateur a √©t√© configur√© dans le sch√©ma de la table comme une valeur unique.<br>
  Vous ne pouvez donc pas cr√©er un 2e utilisateur avec le m√™me e-mail.
</div><br><br>
Voyons ensemble ce qui vient de se passer :
<ol>
  <li>On indique en SQL qu‚Äôon souhaite ajouter un objet avec <strong><u>INSERT INTO</u></strong>.</li><br>
  <li>On √©crit ensuite le nom de la table dans laquelle on souhaite ajouter l‚Äôobjet, ici <strong><u>'utilisateur'</u></strong>.</li><br>
  <li>On √©crit ensuite entre parenth√®ses la liste des colonnes que l‚Äôon va ajouter, ainsi que leur ordre.</li><br>
  <li>On ajoute le mot cl√© SQL <strong><u>VALUES</u></strong> qui indique qu‚Äôon va ensuite d√©clarer les valeurs que l‚Äôon souhaite ajouter.</li><br>
  <li>On √©crit la liste des valeurs de l‚Äôobjet qu‚Äôon souhaite ajouter, dans le m√™me ordre que les colonnes cit√©es en 3.</li><br>
</ol>

<h3>Ins√©rez plusieurs objets √† la fois</h3>
Vous avez d√©sormais une application avec un utilisateur, mais il va vous en falloir plusieurs !<br>
Je ne sais pas vous, mais je trouve √ßa fastidieux d‚Äôavoir √† √©crire une commande pour chaque utilisateur que j‚Äôajoute.<br><br>
SQL a pens√© √† nous !<br>
Il est possible d‚Äôajouter plusieurs objets en une seule commande en s√©parant leurs valeurs par des virgules,<br>
comme dans la commande ci-dessous gr√¢ce √† laquelle j‚Äôajoute 4 utilisateurs √† la BDD :<br>
<div class="code">
  INSERT INTO `utilisateur` (`nom`, `prenom`, `email`)<br>
  <br>
VALUES<br>
<br>
('Doe', 'John', 'john@yahoo.fr'),<br>
<br>
('Smith', 'Jane', 'jane@hotmail.com'),<br>
<br>
('Dupont', 'Sebastien', 'sebastien@orange.fr'),<br>
<br>
('Martin', 'Emilie', 'emilie@gmail.com');<br>
</div><br><br>
Dans les faits, vous allez user et abuser de cette commande pour ajouter diff√©rents objets dans votre base.<br>
R√©utilisons-la justement pour ajouter des aliments.<br><br>
Souvenez-vous, la table ‚Äúaliment‚Äù est constitu√©e des colonnes suivantes :<br>
<table>
  <tr>
      <th>Nom du champ</th>
      <th>Descriptif du champ</th>
      <th>Exemple de valeur</th>
  </tr>
  <tr>
      <td>id</td>
      <td>identifiant unique de l'aliment dans la BDD</td>
      <td>1</td>
  </tr>
  <tr>
      <td>nom</td>
      <td>nom de l'aliment</td>
      <td>poire</td>
  </tr>
  <tr>
      <td>marque</td>
      <td>marque de l'aliment</td>
      <td>Monoprix</td>
  </tr>
  <tr>
      <td>calories</td>
      <td>nombre de calories contenues dans l'aliment (en kcal)</td>
      <td>72</td>
  </tr>
  <tr>
      <td>sucre</td>
      <td>la concentration en sucre de l‚Äôaliment (en grammes)</td>
      <td>19,1</td>
  </tr>
  <tr>
      <td>graisses</td>
      <td>la concentration en graisses de l‚Äôaliment (en grammes)</td>
      <td>0,2</td>
  </tr>
  <tr>
      <td>proteines</td>
      <td>la concentration en prot√©ines de l‚Äôaliment (en grammes)</td>
      <td>0,4</td>
  </tr>
</table><br>
Voici la commande pour ajouter les aliments poire, pomme, ≈ìuf et lait d‚Äôamande √† notre BDD :<br>
<div class="code">
  INSERT INTO `aliment` (`nom`, `marque`, `sucre`, `calories`, `graisses`, `proteines`,`bio`)<br>
  <br>
VALUES<br>
<br>
('poire', 'monoprix', 27.5, 134, 0.2, 1.1, FALSE),<br>
<br>
('pomme', 'monoprix', 19.1, 72, 0.2, 0.4, FALSE),<br>
<br>
('oeuf', 'carrefour', 0.6, 82, 5.8, 6.9, FALSE),<br>
<br>
('lait d\'amande', 'bjorg', 4.5, 59, 3.9, 1.1, TRUE);<br>
</div><br>
<div class="remarque">
  Vous vous demandez s√ªrement pourquoi certaines valeurs sont entre guillemets simples, d‚Äôautres entre backticks (`) et certaines sans rien.
</div><br>
<figure>
  <img src="media/20_syntax_bdd.png" alt="">
  <figcaption>La r√©daction des valeurs selon leur type</figcaption>
</figure><br>
Les explications sont simples :
<ul>
  <li>Pour signaler √† SQL des noms de tables ou colonnes, utilisez des backticks.</li><br>
  <li>Pour les valeurs de type texte (souvenez-vous, les types <strong>TEXT</strong> ou <strong>VARCHAR</strong>), vous devez les √©crire entre guillemets.<br>
     Si un guillemet est pr√©sent dans le texte (comme dans l‚Äôexemple plus haut avec <strong><u>'lait d\'amande'</u></strong>), vous devez mettre un backslash (\) avant ce dernier pour dire √† SQL qu‚Äôil fait partie int√©grante de la valeur.</li><br>
  <li>Pour le reste (les valeurs de type <strong>BOOLEAN</strong>, <strong>INTEGER</strong> ou <strong>FLOAT</strong>), pas besoin de guillemets !</li><br>
</ul><br>
<h3>√Ä vous de jouer !</h3>
Essayez maintenant de cr√©er un nouvel aliment.<br>
Partons sur une bo√Æte de conserve de haricots verts.<br>
En voici les donn√©es nutritionnelles :<br>
<table>
  <tr>
      <th>nom</th>
      <th>marque</th>
      <th>calories</th>
      <th>sucre</th>
      <th>graisses</th>
      <th>proteines</th>
      <th>bio</th>
  </tr>
  <tr>
      <td>haricots verts</td>
      <td>Monoprix</td>
      <td>25</td>
      <td>3</td>
      <td>0</td>
      <td>1,7</td>
      <td>FALSE</td>
  </tr>
</table><br>
√Ä partir de ce tableau, j‚Äôaimerais que vous ajoutiez cet aliment dans la BDD de Foodly.<br>
Regardez bien comment nous nous y sommes pris jusqu‚Äôici.<br>
<video src="media/3_insert_items_database.mp4" controls width="800"></video><br/><br/>
<h3>En r√©sum√©</h3>
<ul>
  <li>On ajoute un objet √† une table avec la commande <strong><u>INSERT INTO</u></strong>.</li><br>
  <li>Lors de l‚Äôutilisation de cette commande, on mentionne quelles sont les colonnes (et dans quel ordre) que l‚Äôon va remplir.<br>
     Et on les s√©pare par des virgules.</li><br>
  <li>On peut ajouter un ou plusieurs objets √† la fois, l√† aussi, en les s√©parant par des virgules.</li><br>
</ul>

<h5><a href="#sommaire">Sommaire</a></h5>

  <h2 id="BDD_data_select">2.2 - S√©lectionnez les donn√©es pr√©sentes dans votre BDD -</h2> 

  <h3>Lisez les objets que vous venez de cr√©er</h3>
  Vous venez d‚Äôajouter vos premi√®res donn√©es dans votre BDD, c‚Äôest top !<br>
  Mais √† quoi cela servirait si vous ne pouvez pas les r√©cup√©rer par la suite ?<br><br>
  Reprenons l‚Äôexemple de l‚Äôapplication Foodly.<br>
  L‚Äôobjectif des utilisateurs de cette application est de savoir quelle est la composition des aliments qu‚Äôils envisagent d‚Äôacheter.<br>
  C‚Äôest bien beau d‚Äôavoir une BDD, mais encore faut-il que l‚Äôapplication puisse y lire les objets.<br><br>
  C‚Äôest ce √† quoi on va s‚Äôattaquer dans ce chapitre...<br>
  Nous allons voir ensemble les commandes qui vous permettent de r√©cup√©rer et lire la donn√©e contenue dans la base de Foodly.<br>
  Commen√ßons par une question simple : comment faire pour afficher tous les utilisateurs pr√©sents dans votre BDD ?<br>
  Comme pour les commandes d‚Äôinsertion, vous allez devoir indiquer la table dans laquelle vous souhaitez r√©cup√©rer la donn√©e, ici ‚Äúutilisateur‚Äù.<br><br>
  <div class="remarque">
    Le mot cl√© pour r√©cup√©rer et lire de la donn√©e est <strong>SELECT</strong>.<br>
    En commen√ßant une commande SQL par ce mot, MySQL (et les autres SGBD) comprend que vous souhaitez s√©lectionner (et donc r√©cup√©rer) de la donn√©e.
  </div><br><br>
  Tapez cette commande dans votre terminal :<br>
  <div class="code">
    SELECT * FROM utilisateur;
  </div><br>
  <figure>
    <img src="media/21_select_table.png" alt="">
    <figcaption>Voici ce que vous devriez voir appara√Ætre apr√®s avoir saisi la commande</figcaption>
  </figure><br>
  MySQL vous affiche la table ‚Äúutilisateur‚Äù sous forme de tableau r√©capitulatif, avec chaque objet sur sa propre ligne.<br><br>
  <figure>
    <img src="media/22_select_table_syntax.png" alt="">
    <figcaption>La commande SELECT</figcaption>
  </figure>
  D√©cortiquons ensemble la commande que nous venons d‚Äôeffectuer pour arriver √† ce r√©sultat :
  <ul>
    <li><strong>SELECT</strong><br>
      comme nous l‚Äôavons vu, indique √† MySQL que nous souhaitons r√©cup√©rer de la donn√©e ;</li><br>
    <li><strong>*</strong> indique que l‚Äôon souhaite r√©cup√©rer toutes les colonnes (ou champs) pr√©sents dans cette table (ici : id, nom, prenom et email) ;</li><br>
    <li><strong>FROM</strong> table permet √† MySQL de comprendre depuis quelle table nous souhaitons r√©cup√©rer de la donn√©e.</li><br>
  </ul>
  <h3>Lisez quelques colonnes seulement</h3>
  C‚Äôest super √ßa, mais je suis r√©ellement oblig√© de r√©cup√©rer toutes les colonnes √† chaque fois ?<br>
  Avant que je vous r√©ponde, tapez cette commande dans votre terminal :<br>
  <div class="code">
    SELECT `nom`, `prenom`, `email` FROM utilisateur;
  </div><br><br>
  Que remarquez-vous apr√®s l‚Äôavoir tap√©e ?<br>
  Eh oui, la colonne <strong><u>id</u></strong> n‚Äôest plus visible dans le tableau r√©capitulatif !<br>
  <figure>
    <img src="media/23_select_table_syntax_col.png" alt="">
    <figcaption>√âcran du terminal suite √† la commande saisie</figcaption>
  </figure><br>
  De la m√™me mani√®re qu‚Äôon pr√©cisait les colonnes que l‚Äôon souhaitait ajouter avec <strong><u>INSERT</u></strong>, on peut pr√©ciser celles que l‚Äôon veut que l‚Äôapplication lise avec <strong><u>SELECT</u></strong>.<br>
  Pour cela, il suffit de mentionner les noms de colonnes que l‚Äôon souhaite r√©cup√©rer apr√®s le mot cl√© <strong><u>SELECT</u></strong>, comme dans l‚Äôexemple ci-dessus.
  <h3>√Ä votre tour d‚Äôessayer !</h3>
  Je vous propose de lister tous les noms et les calories associ√©es pour chaque aliment pr√©sent dans la BDD de Foodly.<br>
  Comment feriez-vous ?<br>
  <div class="code">
    SELECT `nom`,`calories` FROM aliment;
  </div><br>
  <video src="media/4_select_item_database.mp4" controls width="800"></video>
  <h3>En r√©sum√©</h3>
  <ul>
    <li>
      Les objets d‚Äôune table se lisent avec la commande <strong><u>SELECT FROM</u></strong> .
    </li><br>
    <li>
      Lors de l‚Äôutilisation de cette commande, on mentionne <strong>quelles sont les colonnes</strong> que l‚Äôon veut afficher <strong>en les s√©parant par des virgules</strong>.
    </li><br>
  </ul>


  <h5><a href="#sommaire">Sommaire</a></h5>

  <h2 id="update_BDD">2.3 - Mettez √† jour les donn√©es de votre BDD -</h2>
  <h3>Mettez √† jour un objet en particulier</h3>
  Admettons maintenant qu‚Äôun utilisateur souhaite mettre √† jour son e-mail via l‚Äôapplication.<br>
  Comment Foodly traduirait ceci en commande SQL pour MySQL ?<br>
  Ici, le mot cl√© magique est <strong><u>UPDATE</u></strong>, qui signifie ‚Äúmise √† jour‚Äù en anglais.<br>
  Tapez cette commande dans votre terminal pour changer l‚Äôe-mail du premier utilisateur :<br>
  <div class="code">
    UPDATE `utilisateur` SET `email` = 'quentind@gmail.com' WHERE `id` = '1';
  </div><br>
  Vous devriez avoir un message qui confirme ce changement.<br>
  Si vous lisez √† nouveau les donn√©es de votre BDD sur la table ‚Äúutilisateur‚Äù,<br>
  vous remarquerez que l‚Äôe-mail de l‚Äôutilisateur avec l‚Äôid 1 est celui qu‚Äôon vient de taper.<br><br>
  <figure>
    <img src="media/24_update_item_from_table.png" alt="">
    <figcaption>La commande UPDATE</figcaption>
  </figure><br>
  <table>
    <tr>
        <th>Mot cl√©</th>
        <th>Description</th>
    </tr>
    <tr>
        <td><strong>UPDATE</strong> table</td>
        <td>Signifie √† SQL que vous souhaitez mettre √† jour de la donn√©e dans votre BDD.<br>
          Vous indiquez aussi la table dans laquelle se trouve(nt) le ou les objets que vous souhaitez modifier.</td>
    </tr>
    <tr>
        <td><strong>SET</strong> colonne = valeur</td>
        <td>Sert √† indiquer √† SQL quelles sont la ou les colonnes √† modifier,<br>
          et quelles sont la ou les valeurs qu‚Äôelles doivent d√©sormais prendre.</td>
    </tr>
    <tr>
        <td><strong>WHERE</strong> colonne = valeur</td>
        <td>C‚Äôest ce qu‚Äôon appelle un filtre.<br>
          Vous allez les voir plus en d√©tail dans la partie 3, mais sachez qu‚Äôils servent √† restreindre<br>
          la commande en cours √† un ou des objets r√©pondant √† des conditions pr√©cises.<br>
          Ici, on va mettre √† jour uniquement l‚Äôobjet dont l‚Äôid est 1, soit le premier utilisateur !</td>
    </tr>
  </table><br>
  <div class="remarque">
    Il est tout √† fait possible d‚Äôutiliser  <strong><u>UPDATE</u></strong>  sans filtres (sans  <strong><u>WHERE </u></strong> ).<br>
    N√©anmoins, la commande modifierait tous les objets de notre table.<br>
     C‚Äôest tr√®s rarement ce que l‚Äôon souhaite.
  </div><br>
  <h3>√Ä vous de jouer !</h3>
  Nous avons oubli√© de pr√©ciser le type de pomme vendue √† Intermarch√©.<br>
  Il s'agit d'une pomme golden.<br>
  Comment feriez-vous pour rectifier le tir ?<br>
  <strong>Reponse</strong><br>
  <div class="code">
    UPDATE aliment SET `nom`= 'Pomme Golden' WHERE `id`= '2';
  </div><br>
  <video src="media/5_update_item_from_table.mp4" controls width="800"></video>

  <h3>En r√©sum√©</h3>
<ul>
  <li>On met √† jour les objets d‚Äôune table avec la commande <strong><u>UPDATE</u></strong>.</li><br>
  <li>Lors de l‚Äôutilisation de cette commande, on mentionne quelles sont les colonnes qu‚Äôon souhaite mettre √† jour avec <strong><u>SET</u></strong>.</li><br>
  <li>Si on ne filtre pas avec <strong><u>WHERE</u></strong>, on risque de <strong>mettre √† jour tous les objets</strong> de la table.<br>
     Ce qui est rarement ce que l‚Äôon souhaite !</li><br>
</ul>


<h5><a href="#sommaire">Sommaire</a></h5>

  <h2 id="delete_BDD">2.4 - Supprimez des objets dans votre BDD -</h2> 

  <h3>Supprimez un objet en particulier</h3>
  Finissons par un dernier cas d‚Äôusage.<br>
  Admettons qu‚Äôun utilisateur souhaite se d√©sinscrire de Foodly.<br>
  Il faudrait alors le supprimer de votre BDD.<br>
   Mais comment faire ?<br><br>
   <div class="remarque">
    Ici, le mot cl√© est <strong><u>DELETE</u></strong>. Signifiant ‚Äúsupprimer‚Äù en anglais.
   </div><br>
   <div class="important">
    Attention toutefois, cette commande est tr√®s simple √† utiliser, parfois trop m√™me !<br>
    Une fois la donn√©e supprim√©e de votre BDD, impossible de la r√©cup√©rer !<br>
    √Ä utiliser avec parcimonie.
   </div><br>
   Voici par exemple la commande pour supprimer le deuxi√®me utilisateur :<br>
   <div class="code">
    DELETE FROM `utilisateur` WHERE `id` = '2';
   </div><br>
   Une fois cette commande effectu√©e, vous pouvez v√©rifier qu‚Äôelle a fonctionn√© en listant les utilisateurs (commande <strong><u>SELECT</u></strong>).<br>
   <div class="important">
    L√† aussi, il vaut mieux utiliser cette commande avec <strong><u>WHERE</u></strong> pour en limiter l‚Äôeffet.<br>
     Si vous ne le faites pas, vous risqueriez de supprimer tous les objets d‚Äôune table !<br>
     Dans notre cas, adieu √† nos utilisateurs.
   </div><br>
   <h3>√Ä vous de jouer !</h3>
   Bon, on va dire qu‚Äôon s‚Äôest compl√®tement tromp√© pour notre pomme golden.<br>
   M√™me en la modifiant pr√©c√©demment dans la BDD de Foodly, les donn√©es sont compl√®tement fausses.<br>
   Comment feriez-vous pour la supprimer d√©finitivement de la BDD ?<br>
   Reprenez votre terminal et essayez de supprimer la pomme golden.<br>
   <strong>Reponse</strong><br>
   <div class="code">DELETE FROM aliment WHERE `id`='2'; </div><br>
   <video src="media/6_delete_item_from_table.mp4" controls width="800"></video><br/><br/>

   <h3>En r√©sum√©</h3>
   <ul>
     <li>On supprime les objets d‚Äôune table avec la commande <strong><u>DELETE</u></strong>.</li><br>
     <li>Si on ne filtre pas avec <strong><u>WHERE</u></strong>, on risque de supprimer tous les objets de la table.<br>
      Ce qui est rarement ce que l‚Äôon souhaite !</li><br>
    </ul>
    

    <h5><a href="#sommaire">Sommaire</a></h5>

    <h2 id="extract_data">3.1 - Extrayez des informations sp√©cifiques de votre BDD -</h2>
    Vous allez apprendre dans cette partie comment extraire uniquement l‚Äôinformation qui vous int√©resse, et en tirer quelques enseignements !<br>
    Avant tout, t√©l√©chargez la base de donn√©es <a href="https://github.com/OpenClassrooms-Student-Center/Course-implementez-BDD-SQL/tree/master/partie_3" target="_blank">Foodly</a> pour cette partie.
    <h3>Isolez un objet unique</h3>    
    Dans la partie pr√©c√©dente, √† chaque fois que vous lisiez de la donn√©e, c‚Äô√©tait celle d‚Äôune table toute enti√®re.<br>
    <div class="remarque">
      Pour rappel, une commande telle que  <strong><u>SELECT * FROM aliment;</u></strong>   va vous afficher tous les aliments de votre BDD.
    </div><br>
    Imaginons un utilisateur dans votre application Foodly. Il est en train de scanner un aliment lors de ses courses.<br>
    L‚Äôapplication demandera √† la BDD de lui restituer l‚Äôaliment en question.<br>
    Pour ce faire, il existe une commande en SQL que l‚Äôapplication pourra utiliser pour r√©cup√©rer uniquement cet aliment.<br>
    <div class="important">
      Il s‚Äôagit de la commande <strong><u>WHERE</u></strong>.
    </div><br>
    Par exemple, la commande :<br>
    <div class="code">
      SELECT * FROM aliment WHERE id = 4;
    </div><br>
    va nous restituer uniquement l‚Äôaliment dont l‚Äô<strong>id est le num√©ro 4</strong> !<br><br>
    <strong><strong><u>WHERE</u></strong>  ne se limite pas uniquement aux id.</strong><br>
    <div class="code">
      SELECT * FROM aliment WHERE nom = ‚Äúpoire‚Äù;
    </div><br>
    va nous restituer uniquement l‚Äôaliment dont le <strong>nom est 'poire'</strong> !<br><br>
    <div class="important">
      Vous pouvez appliquer  <strong><u>WHERE</u></strong>  √† n‚Äôimporte quelle colonne en utilisant le nom de cette colonne.
    </div><br>
    <div class="important">
      √Ä noter que  <strong><u>WHERE</u></strong>  peut s'ex√©cuter avec  <strong><u>SELECT</u></strong>  ,<br>
       mais aussi avec n‚Äôimporte quelle autre commande :<br>
       vous pouvez l‚Äôutiliser avec  <strong><u>UPDATE</u></strong>  ou  <strong><u>DELETE</u></strong>  pour ne mettre √† jour ou supprimer qu‚Äôun objet sp√©cifique, et non tous les objets de votre table !
    </div>
    <h3>Isolez plusieurs objets r√©pondant √† un crit√®re de comparaison</h3>
    OK, c‚Äôest utile de ne pouvoir s√©lectionner qu‚Äôun seul objet.<br>
    Mais admettons que votre utilisateur souhaite voir tous les aliments bio de son hypermarch√©, ou bien ceux qui ne sont pas trop caloriques.<br><br>
    <strong><u>WHERE</u></strong>  fonctionne avec un principe de comparaison.<br>
    Dans vos pr√©c√©dentes commandes, vous utilisiez l‚Äôop√©rateur √©gal <strong><u>=</u></strong> pour indiquer que vous ne vouliez que l‚Äôobjet dont le nom √©tait √©gal √† une valeur.<br><br>
    Or, vous pouvez utiliser tous les op√©rateurs classiques, tels que :
    <ul>
      <li>sup√©rieur √† ( > ) ;</li><br>
      <li>inf√©rieur √† ( < ) ;</li><br>
      <li>sup√©rieur ou √©gal √† (>=) ;</li><br>
      <li>et inf√©rieur ou √©gal √† (<=).</li><br>
    </ul><br>
    <div class="code">
      SELECT * FROM aliment WHERE calories < 90;
    </div><br>
    va afficher tous les aliments dont la <strong>teneur en calories n‚Äôexc√®de pas (strictement) 90 kcal</strong>

    <h3>Isolez des objets √† partir d‚Äôune comparaison sur du texte</h3>
    <div class="remarque">
      La limite de  <strong><u>WHERE</u></strong>  est que la comparaison ne peut s‚Äôeffectuer que sur des donn√©es chiffr√©es.
    </div><br><br>
    <div class="important">
      Il existe un autre mot cl√© pour effectuer des comparaisons sur du texte : il s‚Äôagit du mot cl√© <strong><u>LIKE</u></strong>.
    </div><br><br>
    Ce dernier permet de s√©lectionner les objets dont le texte d‚Äôune colonne r√©pond √† un mod√®le sp√©cifique.<br>
     C‚Äôest en fait lui-m√™me un op√©rateur, car il s‚Äôajoute au sein d‚Äôune commande  <strong><u>WHERE</u></strong>.<br>
     <div class="code">
      SELECT * FROM utilisateur WHERE email LIKE ‚Äú%gmail.com‚Äù;
     </div><br>
     va afficher tous les utilisateurs dont l‚Äô<strong>e-mail se termine par ‚Äúgmail.com‚Äù</strong>.<br>
     <figure>
      <img src="media/25_like_item_from_table.png" alt="">
      <figcaption>L‚Äôutilisation du pourcentage (%)</figcaption>
    </figure><br>
    <div class="remarque">
    Ce ‚Äú%gmail.com‚Äù signifie que vous souhaitez r√©cup√©rer tout texte finissant par ‚Äúgmail.com‚Äù.<br>
    Le pourcentage (%) indique √† SQL :
      <ul>
        <li>‚Äúil peut y avoir autant de texte que tu veux, et aussi long que tu veux avant le ‚Äúgmail.com‚Äù ;</li><br>
        <li>
          ‚Äúne pr√™te pas attention au contenu qu‚Äôil y a avant gmail.com.‚Äù
        </li><br>
      </ul>
    Si vous souhaitiez r√©cup√©rer le texte qui commence par ‚Äúgmail.com‚Äù vous √©cririez : ‚Äúgmail.com%‚Äù.<br>
    Enfin, si vous cherchiez tout texte qui contient ‚Äúgmail‚Äù, peu importe qu‚Äôil soit au d√©but ou √† la fin, vous √©cririez ‚Äú%gmail%‚Äù.
    </div>

    <h3>Ordonnez les objets r√©cup√©r√©s pour chaque requ√™te</h3>
    Reprenons l‚Äôexemple de notre utilisateur qui cherche √† afficher les aliments peu caloriques dans Foodly.<br><br>
    Gr√¢ce √† ce que vous avez appris, vous pouvez d√©sormais afficher les aliments dont les calories ne d√©passent pas un certain seuil.<br>
    Le mot cl√© <strong><u>ORDER BY calories ASC</u></strong> permet d‚Äôafficher les aliments par ordre croissant de calories.<br>
    <figure>
      <img src="media/26_order_item_from_table.png" alt="">
      <figcaption>Le mot cl√© ORDER BY</figcaption>
    </figure>
    Ce mot cl√© vous permet d‚Äôordonner une colonne par ordre croissant (ascending en anglais, d‚Äôo√π le mot cl√© SQL <strong><u>ASC</u></strong>),<br>
    ou d√©croissant (descending en anglais, soit le mot cl√© <strong><u>DESC</u></strong>).<br>
    Voici donc la commande √† effectuer pour afficher les aliments par ordre croissant de calories :<br>
    <div class="code">
      SELECT * FROM aliment ORDER BY calories ASC;
    </div><br><br>
    Bien s√ªr, vous pouvez mixer les commandes entre elles !<br>
    Voici la commande pour n‚Äôafficher que les <strong>aliments dont les calories ne d√©passent pas 90 kcal</strong>, mais de mani√®re <strong>d√©croissante</strong> :<br>
    <div class="code">
      SELECT * FROM aliment WHERE calories < 90 ORDER BY calories DESC;
    </div><br><br>
    Cette commande fonctionne aussi avec le texte !<br>
    Si vous effectuez un  <strong><u>ORDER BY</u></strong> sur une colonne de texte, celle-ci sera ordonn√©e :
    <ul>
      <li>soit dans l‚Äôordre alphab√©tique (  <strong><u>ASC</u></strong>  ).<br>
      <strong><u>SELECT * FROM utilisateurs ORDER BY prenom ASC;</u></strong><br>
      affiche les utilisateurs avec les pr√©noms affich√©s par ordre alphab√©tique ;
      </li><br>
      <li>soit dans l‚Äôordre oppos√© (  <strong><u>DESC</u></strong>  ).<br>
        <strong><u>SELECT * FROM utilisateurs ORDER BY prenom DESC;</u></strong><br>
        affiche les utilisateurs avec les pr√©noms affich√©s par ordre anti-alphab√©tique.
      </li><br>
    </ul>
    <h3>√Ä vous de jouer !</h3>
    Imaginons que je vous demande tous les aliments qui ne sont pas bio dans la base, class√©s par ordre d√©croissant de contenance en prot√©ines.<br><br>
    <strong><u>SELECT * FROM aliment WHERE bio = false ORDER BY proteines DESC;</u></strong><br><br>
    <video src="media/7_orderby.mp4" controls width="800"></video><br/><br/>

    <h3>En r√©sum√©</h3>
    <ul>
      <li>Vous avez appris comment filtrer la donn√©e que vous souhaitez r√©cup√©rer avec la commande <strong><u>WHERE</u></strong>(et les op√©rateurs comme <strong><u>=</u></strong>ou <strong><u>LIKE</u></strong>).</li><br>
      <li>Vous savez d√©sormais ordonner les r√©sultats d‚Äôune requ√™te SQL avec la commande <strong><u>ORDER BY</u></strong>.</li><br>
    </ul>


    <h5><a href="#sommaire">Sommaire</a></h5>

  
    <h2 id="count">3.2 - Effectuez des op√©rations et sauvegardez vos requ√™tes -</h2>

    <h3>Comptez le nombre d‚Äôobjets r√©cup√©r√©s via une requ√™te</h3>
    Combien d‚Äôobjets r√©pondent √† un crit√®re (ou une requ√™te SQL) donn√© ?<br>
    Par exemple, admettons qu‚Äôun utilisateur de Foodly souhaite savoir combien il existe d‚Äôaliments bio, ou que vous souhaitiez compter le nombre d‚Äôutilisateurs dans l‚Äôapplication.<br><br>
    Il existe le mot cl√© <strong><u>COUNT</u></strong>, qui permet justement cela.<br>
    Appliqu√© √† n‚Äôimporte quelle commande SQL de type  <strong><u>SELECT</u></strong>  , il vous donnera le nombre d‚Äôobjets r√©cup√©r√©s plut√¥t que leur valeur.<br><br>
    <div class="remarque">
      En plus de ne faire ‚Äúque compter‚Äù,  <strong><u>COUNT</u></strong>  est bien plus rapide √† effectuer qu‚Äôun  <strong><u>SELECT</u></strong>  ‚Äúclassique‚Äù pour votre base de donn√©es.<br>
      Le SGBD et la BDD arriveront √† retrouver le r√©sultat de votre commande bien plus rapidement (parfois, la diff√©rence se compte en minutes !).<br>
      Privil√©giez-le avant d‚Äôeffectuer des requ√™tes sur un large groupe de donn√©es !
    </div><br><br>
    Vous souvenez-vous de la commande que nous avions effectu√©e pour r√©cup√©rer uniquement les utilisateurs dont l‚Äôe-mail √©tait un Gmail ?<br>
    Comment l‚Äôadapter pour conna√Ætre le nombre d‚Äôutilisateurs avec une adresse Gmail dans la base ?<br><br>
    <div class="code">
      SELECT COUNT(*) FROM utilisateur WHERE email LIKE "%gmail.com";
    </div><br><br>
    MySQL vous affiche le nombre d‚Äôobjets plut√¥t que leur contenu.<br>
    Vous voyez donc combien d‚Äôutilisateurs r√©pondent √† ce crit√®re.<br><br>
    <div class="remarque">
      En appliquant un  <strong><u>COUNT(*)</u></strong>  , vous comptez le nombre d‚Äôobjets.<br>
      Mais vous pouvez aussi restreindre le comptage √† une colonne sp√©cifique en √©crivant  <strong><u>COUNT(colonne)</u></strong> .<br>
      Enfin, vous pouvez aussi compter le nombre d‚Äô√©l√©ments uniques d‚Äôune colonne avec  <strong><u>COUNT(DISTINCT colonne)</u></strong>  .
    </div><br><br>
    Par exemple,<strong><u>SELECT COUNT(*)FROM utilisateur;</u></strong> compte tous les utilisateurs,<br>
    tandis que  <strong><u>SELECT COUNT(nom) FROM utilisateur;</u></strong>  compte tous les noms de famille.<br><br>
    Ok, vous allez me dire qu‚Äôon trouve exactement le m√™me nombre. Et c‚Äôest vrai.<br>
    Compter dans une colonne prend vraiment son sens en comptant le nombre de valeurs distinctes.<br><br>
    <strong><u>SELECT COUNT(DISTINCT nom) FROM utilisateur;</u></strong>  comptera uniquement les noms de familles diff√©rents, vous permettant de voir si certains utilisateurs ont le m√™me nom !

    <h3>Effectuez des op√©rations sur des donn√©es chiffr√©es</h3>
    Admettons que l‚Äôon souhaite conna√Ætre le total calorique d‚Äôun groupe d‚Äôarticles, ou bien la contenance moyenne en sucre d‚Äôun groupe d‚Äôaliments :  au lieu de tout noter √† la main depuis la base de donn√©es, laissez MySQL effectuer ces op√©rations pour vous !<br><br>
    Pour cela, il existe plusieurs mots cl√©s que vous pouvez appliquer √† une colonne lors d‚Äôune requ√™te pour en modifier le r√©sultat :
    <ul>
      <li><strong><u>AVG</u></strong>  : nous donne la moyenne de la colonne sur la s√©lection ;</li><br>
      <li><strong><u>SUM</u></strong>  : nous donne la somme de la colonne sur la s√©lection ;</li><br>
      <li><strong><u>MAX</u></strong>  : nous donne le maximum de la colonne sur la s√©lection ;</li><br>
      <li><strong><u>MIN</u></strong>  : nous donne le minimum de la colonne sur la s√©lection.</li><br>
    </ul><br>
    Envie de conna√Ætre le maximum de teneur en sucre des aliments dans notre base ?<br>
    Rien de plus simple :<br>
    <div class="code">
      SELECT MAX(sucre) FROM aliment;
    </div><br><br>
    Quelle est la teneur moyenne en calories des aliments de 30 kcal ou plus ?<br>
    <div class="code">
      SELECT AVG(calories) FROM aliment WHERE calories >= 30;
    </div><br><br>
    <h4>√Ä vous de jouer !</h4>
    Je vous laisse tester ces op√©rations avec  <strong><u>MIN</u></strong>  et  <strong><u>SUM</u></strong>  !<br>
    Pour voir √† quoi cela ressemble dans le terminal, voici un screencast explicatif o√π je reprends une √† une toutes ces commandes sur la liste des aliments qui ne sont pas bio :<br>
    <div class="code">
      SELECT COUNT(*) FROM aliment WHERE bio = false;
    </div><br>
    Compte le nombre d'aliment qui ne sont pas bio<br><br>
    <div class="code">
      SELECT MAX(proteines) FROM aliment WHERE bio = false;
    </div><br>
    Selectionne l'aliment qui a le max de proteine qui n'est pas bio<br>
     (et affiche le nombre de proteines)<br><br>
     <div class="code">
      SELECT MIN(proteines) FROM aliment WHERE bio = false;
    </div><br>
    Selectionne l'aliment qui a le moins de proteine qui n'est pas bio<br>
     (et affiche le nombre de proteines)<br><br>
     <div class="code">
      SELECT AVG(proteines) FROM aliment WHERE bio = false;
    </div><br>
    Affiche la moyenne de proteines dans les aliments qui ne sont pas bio<br>
     (et affiche le nombre de proteines)<br><br>
    <video src="media/8_min_max_avg_count_from_item.mp4" controls width="800"></video><br/><br/>

    <h3>Sauvegardez vos requ√™tes avec CREATE VIEW</h3>
    MySQL a un syst√®me de ‚Äúvues‚Äù qui permet de cr√©er des tables temporaires √† partir d‚Äôune commande SQL.<br>
    Entendez par l√† que vous allez ‚Äúsauvegarder‚Äù une commande SQL pour ne plus avoir √† la r√©effectuer √† chaque fois !<br><br>
    Admettons que vous souhaitiez sauvegarder dans une vue la commande suivante : les utilisateurs dont l‚Äôadresse mail est une adresse Gmail.<br>
    Vous utilisez la commandeCREATE VIEW!<br>
    <div class="code">
      CREATE VIEW utilisateurs_gmail_vw AS SELECT * FROM utilisateur WHERE email LIKE "%gmail.com";
    </div><br><br>
    <figure>
      <img src="media/27_create_view.png" alt="">
      <figcaption>La commande CREATE VIEW</figcaption>
    </figure><br><br>
    Je viens de cr√©er la vue <strong>‚Äúutilisateurs_gmail_vw‚Äù</strong>.<br>
    Cette derni√®re s‚Äôutilise d√©sormais comme une table.<br>
    Ainsi, pour r√©cup√©rer les utilisateurs avec une adresse Gmail, plus besoin d‚Äô√©crire ma requ√™te compliqu√©e !<br>
    Je n‚Äôai plus qu‚Äô√† √©crire :<br>
    <div class="code">
      SELECT * FROM utilisateurs_gmail_vw;
    </div><br><br>
    <figure>
      <img src="media/28_select_created_view.png" alt="">
      <figcaption>Utilisation de la commande CREATION VIEW avec SELECT * FROM</figcaption>
    </figure><br><br>
<div class="remarque">
  La convention chez les utilisateurs de SQL est de toujours pr√©fixer le nom d‚Äôune vue avec ‚Äú_vw‚Äù, pour la distinguer des ‚Äúvraies‚Äù tables.
</div><br><br>
Le plus utile avec cela, c‚Äôest que la vue se comporte comme une vraie table.<br>
Vous pouvez ainsi r√©appliquer d‚Äôautres commandes SQL sur cette derni√®re.<br><br>
Par exemple : afficher les utilisateurs dont l‚Äôadresse e-mail est une adresse Gmail ET dont le pr√©nom contient la lettre ‚Äúm‚Äù :<br>
<div class="code">
  SELECT * FROM utilisateurs_gmail_vw WHERE prenom LIKE "%m%";
</div><br><br>
<div class="remarque">
  Gr√¢ce aux vues, vous pouvez ‚Äúraccourcir‚Äù des requ√™tes SQL complexes et r√©barbatives, vous permettant d‚Äôaller encore plus loin dans vos analyses !
</div><br>
<h4>√Ä vous de jouer !</h4>
Essayez √† pr√©sent par vous-m√™me la cr√©ation d'une vue.<br>
Cr√©ez une vue reprenant notre liste des aliments non bio, class√©s par contenance en prot√©ines (de mani√®re d√©croissante).<br><br>
<div class="code">
  CREATE VIEW aliments_non_bio_vw AS SELECT * FROM aliment WHERE bio = false ORDER BY proteines DESC;
</div><br>
<video src="media/9_create_view.mp4" controls width="800"></video><br/><br/>

<h3>En r√©sum√©</h3>
<ul>
  <li>
    Vous avez appris √† effectuer des op√©rations math√©matiques simples avec des mots cl√©s comme <strong><u>COUNT</u></strong> ou <strong><u>AVG</u></strong>.
  </li><br>
  <li>
    Vous savez sauvegarder des requ√™tes avec <strong><u>CREATE VIEW</u></strong>
  </li><br>
</ul>


<h5><a href="#sommaire">Sommaire</a></h5>

<h2 id="join">3.3 - Impl√©mentez des relations entre vos donn√©es gr√¢ce √† JOIN -</h2> 
Les bases de donn√©es SQL sont dites de type ‚Äúrelationnel‚Äù.<br>
Cela sous-entend que leur force r√©side sur leur capacit√© √† <strong>relier plusieurs types de donn√©es entre elles</strong>.<br>
Pour l‚Äôinstant, vous avez utilis√© de la donn√©e sans relations.<br>
Par exemple, pour r√©cup√©rer ou mettre √† jour un utilisateur ou un aliment.<br><br>
Or, si vous reprenez l‚Äôexemple de Foodly, l‚Äôapplication doit stocker les aliments qu‚Äôun utilisateur a scann√©s.<br>
Pour ce faire, il faut <strong>stocker les relations entre ces m√™mes utilisateurs et certains aliments</strong>.<br>
Nous verrons comment mettre en place de telles relations dans la partie 4.<br>
Mais en attendant, voyons comment r√©cup√©rer des objets selon les relations qu‚Äôils ont entre eux.

<h3>Extrayez des informations via une relation 1 √† plusieurs</h3>
Beaucoup d‚Äôutilisateurs vont utiliser Foodly, et ce, dans plusieurs pays.<br>
Afin de pouvoir s‚Äôadapter √† chacun, l‚Äôapplication va devoir <strong>stocker la langue pr√©f√©r√©e</strong> de chaque utilisateur.<br>
Pour ce faire, la table ‚Äúlangue‚Äù a √©t√© rajout√©e √† la base de donn√©es <a href="https://github.com/OpenClassrooms-Student-Center/Course-implementez-BDD-SQL/blob/master/partie_3/foodly.sql" target="_blank">Foodly</a> que vous avez t√©l√©charg√©e au d√©but de cette partie.<br>
Chaque utilisateur est reli√© √† une langue.<br>
Et chaque langue peut √™tre reli√©e √† plusieurs utilisateurs.<br>
<figure>
  <img src="media/29_one_to_many.png" alt="">
  <figcaption>La relation un √† plusieurs entre les utilisateurs et les langues</figcaption>
</figure><br>
<div class="important">
  On parle alors d‚Äôune relation 1 √† plusieurs entre utilisateur et langue (one-to-many, en anglais).
</div><br><br>
Pour mat√©rialiser une telle relation dans une base SQL telle que MySQL, on suit un principe assez simple :
<ol>
  <li>Dans ce cas sp√©cifique, une langue est reli√©e √† plusieurs utilisateurs.<br>
    On cr√©e donc cet objet normalement, comme vous avez pu le faire pr√©c√©demment.<br>
  <div class="code">
    INSERT INTO `langue` VALUES ('fran√ßais');
  </div>
  </li><br>
  <li>Chaque utilisateur se voyant reli√© √† une langue,<br>
    c‚Äôest l‚Äôutilisateur qui va devoir stocker l‚Äô<strong>id unique</strong> de la langue associ√©e.<br>
    Par convention, on utilise comme nom de ce champ  <strong><u>{nom de l‚Äôobjet associ√©}_id</u></strong>  (donc ici,  <strong><u>langue_id</u></strong>  ).
  </li><br>
  <li></li><br>
</ol>
Les utilisateurs de la base de donn√©es mise √† jour dans la partie 2 ont ainsi un champ  <strong><u>langue_id</u></strong>  , o√π est stock√© l‚Äô<strong>id de la langue</strong> qu‚Äôils souhaitent utiliser.<br>
<div class="remarque">
  Par exemple, le premier utilisateur a comme <strong><u>langue_id</u></strong> 1, soit l‚Äôid du fran√ßais dans la table des langues.
</div><br><br>
Imaginez d√©sormais qu‚Äôon vous demande de ressortir toutes les langues utilis√©es par les 10 premiers utilisateurs, ou tous les utilisateurs ayant configur√© Foodly en anglais.<br>
<div class="important">
  Il existe une commande qui est justement l√† pour r√©gler ce genre de probl√®me.<br>
   La commande <strong><u>JOIN</u></strong>.
</div><br><br>
Gr√¢ce √† cette commande, vous allez pouvoir <strong>expliquer √† MySQL comment joindre deux tables selon un identifiant qu‚Äôelles ont en commun</strong>.<br>
Partons du principe que :
<ul>
  <li>la langue_id du premier utilisateur est le fran√ßais ;</li><br>
  <li>l‚Äôid du fran√ßais est 1.</li><br>
</ul>
Vous allez sp√©cifier √† MySQL de joindre les tables ‚Äúutilisateur‚Äù et ‚Äúlangue‚Äù en lui pr√©cisant que l‚Äôid de langue et langue_id de l‚Äôutilisateur doivent √™tres √©gaux !<br><br>
Prenons un exemple.<br>
Regardons tous les utilisateurs avec les langues qui leur sont associ√©es.<br>
Tapez cette commande dans votre terminal :<br>
<div class="code">
  SELECT * FROM `utilisateur`<br>
  <br>
JOIN `langue`<br>
<br>
ON `utilisateur`.`langue_id` = `langue`.`id`;<br>
</div><br>
Que s‚Äôest-il pass√© dans cette commande ?<br>
<ul>
  <li>Nous avons demand√© √† MySQL de s√©lectionner tous les utilisateurs.<br>
    <strong><u>SELECT * FROM `utilisateur`</u></strong>
  </li><br>
  <li>Auxquels nous voulons joindre les langues.<br>
    <strong><u>JOIN `langue`</u></strong></li><br>
  <li>En pr√©cisant √† MySQL de les relier, en consid√©rant que l‚Äô<strong>id de la langue </strong>est stock√©e dans chaque utilisateur dans le champ <strong>langue_id</strong>.<br>
    <strong><u>ON `utilisateur`.`langue_id` = `langue`.`id`</u></strong></li><br>
</ul>
<figure>
  <img src="media/30_join.png" alt="">
  <figcaption>L'utilisation de la commande JOIN</figcaption>
</figure><br><br>
Ici, vous avez utilis√© la commande SQL pour lier la totalit√© d‚Äôune table (utilisateur) avec une autre (langue).<br>
Mais on peut tout √† fait limiter cette jointure √† seulement quelques objets en particulier.<br><br>
<h4>√Ä vous de jouer !</h4>
Admettons que je vous demande de me donner tous les noms de famille des utilisateurs ayant s√©lectionn√© le fran√ßais.<br>
<div class="code">
  SELECT * FROM utilisateur<br>
  <br>
JOIN langue<br>
<br>
ON utilisateur.langue_id = langue.id WHERE langue.nom = 'fran√ßais';<br>
</div><br><br>
<video src="media/10_join.mp4" controls width="800"></video><br/><br/>

<h3>Obtenez des informations complexes via une relation plusieurs √† plusieurs</h3>
Reprenons ensemble l‚Äôid√©e premi√®re de l‚Äôapplication Foodly.<br/>
Cette derni√®re sert √† des utilisateurs (comme vous et moi) √† scanner des aliments.<br/><br/>
Une fois ces aliments scann√©s, il serait plus qu‚Äôutile que la base de donn√©es les garde en m√©moire,<br/>
afin que les utilisateurs puissent les retrouver par la suite (pour par exemple faire leur prochaine liste de courses).<br/><br/>
Pour ce faire, il faudrait un moyen de stocker dans la BDD tous les aliments qui ont √©t√© scann√©s par un utilisateur pr√©cis.<br/>
Sachant que :
<ul>
  <li>un m√™me utilisateur peut stocker plusieurs aliments scann√©s ;</li><br>
  <li>un aliment peut lui-m√™me √™tre scann√© par plusieurs utilisateurs.</li><br>
</ul>
<figure>
  <img src="media/31_many_to_many.png" alt="">
  <figcaption>La relation un √† plusieurs entre les utilisateurs et les aliments</figcaption>
</figure><br>
On parle ici de relation plusieurs √† plusieurs.<br>
<strong>Chaque objet d‚Äôune table pouvant √™tre reli√© √† plusieurs objets de l‚Äôautre table, et vice versa.</strong><br><br>
Or, tout ce que sait faire MySQL (et les bases de donn√©es SQL en g√©n√©ral), c‚Äôest de stocker une valeur unique par champ.<br>
<strong>Il n‚Äôest pas possible par exemple de stocker plusieurs id d‚Äôaliments au sein d‚Äôun m√™me utilisateur.</strong><br><br>
Par d√©faut, le SQL ne sait mod√©liser que des relations 1 √† plusieurs.<br>
Une relation plusieurs √† plusieurs, c‚Äôest une multitude de relations 1 √† plusieurs.<br>
Regardez les tables pr√©sentes dans la BDD que vous avez t√©l√©charg√©es pour cette partie.<br>
Elle contient une table appel√©e  <strong><u>utilisateur_aliment</u></strong><br>
Celle-ci contient des  <strong><u>utilisateur_id</u></strong>   et des  <strong><u>aliment_id</u></strong>  .<br>
Vous l‚Äôavez peut-√™tre devin√© : elle sert √† stocker des relations entre un utilisateur et un aliment pr√©cis.<br><br>
<div class="important">
  On appelle table de liaison ce genre de table.<br>
Par convention, elle prend le nom  <strong><u>{table1}_{table2}</u></strong>  ,<br>
et sert √† <strong>relier les tables 1 et 2</strong>  qui y sont stock√©es,<br>
en sauvegardant <strong>l‚Äôid d‚Äôun objet de la table 1</strong>, √† l‚Äô<strong>id de l‚Äôobjet de la table 2</strong> correspondant.
</div><br><br>
En r√©cup√©rant tous les objets pr√©sents dans cette base,<br>
qui ne sont autres que des relations 1 √† plusieurs vers utilisateur et aliment,<br>
on peut reconstituer les relations plusieurs √† plusieurs entre ces m√™mes utilisateurs et aliments !<br><br>
<figure>
  <img src="media/32_table-liaison.png" alt="">
  <figcaption>La table de liaison relie les utilisateurs aux aliments</figcaption>
</figure><br>
On utilise aussi <strong><u>JOIN</u></strong><br>
Voici la commande pour relier tous les utilisateurs aux aliments qu‚Äôils ont scann√©s :<br>
<div class="code">
  SELECT * FROM utilisateur<br>
  JOIN utilisateur_aliment ON (utilisateur.id = utilisateur_aliment.utilisateur_id)<br>
  JOIN aliment ON (aliment.id = utilisateur_aliment.aliment_id);<br>
</div><br>
<div class="remarque">
  D√©composons cette commande ensemble :
<ul>
<li>Nous avons demand√© √† MySQL de s√©lectionner tous les utilisateurs.<br>
  <div class="code">SELECT * FROM `utilisateur`</div>
</li><br><br>
<li>Auxquels nous voulons joindre la table <strong><u>utilisateur_aliment</u></strong>.<br>
  <div class="code">JOIN `utilisateur_aliment`</div>
</li><br><br>
<li>En pr√©cisant √† MySQL de les relier en consid√©rant<br>
  que l‚Äô<strong>id de l‚Äôutilisateur</strong> est stock√© en tant que <strong><u>utilisateur_id </u></strong><br>
  dans la table <strong><u>utilisateur_aliment</u></strong>.<br>
  <div class="code">ON (utilisateur.id = utilisateur_aliment.utilisateur_id)</div>
</li><br><br>
<li>√Ä ce  <strong><u>JOIN</u></strong>  ,<br>
   on veut √† nouveau lier de la donn√©e de la table aliment,<br>
    soit un nouveau  <strong><u>JOIN</u></strong>.<br>
    <div class="code">JOIN `aliment`</div>
  </li><br><br>
<li>Pour ce faire, on pr√©cise √† MySQL que l‚Äô<strong>id de l‚Äôaliment</strong><br>
   est stock√© dans <strong><u>utilisateur_aliment</u></strong><br>
    en tant que <strong><u>aliment_id</u></strong>.<br>
    <div class="code">ON (aliment.id = utilisateur_aliment.utilisateur_id)</div></li><br>
</ul>
</div>
<h4>√Ä vous de jouer !</h4>
Admettons que vous souhaitiez voir tous les aliments s√©lectionn√©s par les utilisateurs dont l‚Äôadresse e-mail et une adresse Gmail.<br>
<div class="code">
  SELECT * FROM utilisateurs_gmail_vw<br>
  JOIN utilisateur_aliment ON (utilisateurs_gmail_vw.id = utilisateur_aliment.utilisateur_id)<br>
  JOIN aliment ON (aliment.id = utilisateur_aliment.aliment_id);<br>
</div><br>
<video src="media/10_join_multi.mp4.mp4" controls width="800"></video><br/><br/>

<h3>En r√©sum√©</h3>
<ul>
  <li>
    Vous savez d√©sormais joindre plusieurs objets entre eux gr√¢ce au mot cl√© JOIN.
  </li><br>
  <li>
    Et ce, que ce soit pour une <strong>relation un √† plusieurs</strong><br>
    ou pour une relation <strong>plusieurs √† plusieurs</strong> gr√¢ce √† une <strong>table de liaison</strong>.
  </li><br>
</ul>

<h5><a href="#sommaire">Sommaire</a></h5>

  <h2 id="alter_table">4.1 - Modifiez la structure d‚Äôun objet avec ALTER TABLE -</h2> 

  <h3>Ajoutez ou supprimez un champ</h3>
  <h4>Ajoutez un champ aux aliments</h4>
  Le dernier rapport sur l‚Äôutilisation de Foodly vient de tomber.<br>
  Dans celui-ci, les utilisateurs ont pu voter pour les am√©liorations qu‚Äôils souhaiteraient voir appara√Ætre dans l‚Äôapplication.<br>
  La plus demand√©e √©tait celle de voir la contenance en vitamines de chaque aliment.<br><br>
  Sachant cela, l‚Äô√©quipe de Foodly organise une r√©union concernant l‚Äôimpl√©mentation d‚Äôune telle fonctionnalit√©.<br>
  Le design est pr√™t, les d√©veloppeurs ont cod√© l‚Äôinterface, mais il manque une chose cruciale pour r√©cup√©rer la contenance en vitamines dans l‚Äôapplication : l‚Äôajout de cette donn√©e dans la BDD.<br><br>
  Prenons l‚Äôexemple de la vitamine C.<br>
  Cette colonne n‚Äôappara√Æt nulle part dans le sch√©ma de la table aliment.<br>
  Il nous faut la cr√©er.<br>
  De la m√™me mani√®re que vous l‚Äôavez fait lors de la premi√®re partie,  il faudra sp√©cifier son type √† MySQL.<br><br>
  Pour ce faire, utilisez la commande <strong><u>ALTER TABLE</u></strong>.<br><br>
  Voyons √† quoi ressemble la commande SQL pour rajouter cette colonne, puis d√©cortiquons-la ensemble :<br>
  <div class="code">ALTER TABLE aliment ADD vitamines_c FLOAT;</div><br><br>
  Ici, on signale √† MySQL :
  <ul>
    <li>
      de modifier la structure d‚Äôune table avec <strong><u>ALTER TABLE</u></strong>;
    </li><br>
    <li>quelle table modifier (ici <strong>"aliment‚Äù</strong>) ;</li><br>
    <li>que la modification va faire ajouter une colonne avec <strong><u>ADD</u></strong>;</li><br>
    <li>le nom de cette nouvelle colonne (ici <strong>‚Äúvitamines_c‚Äù</strong>) ;</li><br>
    <li>enfin, le type de la colonne (ici,<strong><u>FLOAT</u></strong>, car les vitamines sont stock√©es usuellement en mg/100g, valeur d√©cimale).</li><br>
  </ul>
  <figure>
    <img src="media/33_alter_table.png" alt="">
    <figcaption>La commande ALTER TABLE</figcaption>
  </figure><br>
<div class="remarque">
  √Ä noter que le type n‚Äôest parfois pas seul.<br>
  On peut aussi (comme dans la partie 1), mentionner √† MySQL qu‚Äôon rajoute une colonne qui est :
  <ul>
    <li>une cl√© primaire (<strong><u>PRIMARY KEY</u></strong>) ;</li><br>
    <li>avec une valeur par d√©faut (<strong><u>DEFAULT valeur_par_d√©faut</u></strong>) ;</li><br>
    <li>non nulle (<strong><u>NOT NULL</u></strong>).<br>
    Auquel cas il faudra pr√©ciser une valeur par d√©faut,<br>
    MySQL cr√©ant la colonne avec la valeur ‚ÄúNULL‚Äù pour tous les objets existants dans cette table ;</li><br>
  </ul>
</div><br>
<h4>√Ä vous de jouer !</h4>
Admettons que l‚Äôon souhaite rajouter une colonne √† la table <strong>‚Äúlangue‚Äù</strong><br>
Cette colonne, c‚Äôest le <a href="http://www.lingoes.net/en/translator/langcode.htm" target="_blank">code ISO des langues</a> (par exemple : ‚Äúfr-fr‚Äù pour le Fran√ßais de m√©tropole).<br><br>
<div class="code">
  ALTER TABLE langue ADD code VARCHAR(100);
</div><br>
<video src="media/11_alter_table.mp4" controls width="800"></video><br/><br/>
<h4>Supprimez un champ aux aliments</h4>
Le management de chez Foodly nous mentionne d‚Äôautres changements √† effectuer sur l‚Äôapplication, qui impliquent la BDD.<br>
Les utilisateurs de Foodly n‚Äôutilisent que tr√®s rarement la fonctionnalit√© pour savoir si un aliment est bio ou non.<br>
Les d√©veloppeurs, dans leur volont√© de toujours diminuer la dette technique (√† savoir, le code √† maintenir), souhaitent retirer l‚Äôaffichage bio de la fiche des aliments sur Foodly.<br>
En tant que gestionnaire de la BDD, vous pensez qu‚Äôil serait pratique de faire de m√™me de votre c√¥t√©, pour √©viter de maintenir un champ qui ne sera plus mis √† jour.<br>
Pour ce faire, rien de plus simple :<br>
<strong>supprimons la colonne ‚Äúbio‚Äù de la table ‚Äúaliment‚Äù avec <strong><u>DROP</u></strong>.</strong><br>
Voici la commande SQL pour le faire :<br>
<div class="code">
  ALTER TABLE aliment DROP bio;
</div><br><br>
D√©composons cette commande ensemble :
<ul>
  <li>On modifie toujours la structure d‚Äôune table avecALTER TABLE.</li><br>
  <li>On lui signale √† nouveau quelle table modifier (ici, ‚Äúaliment‚Äù).</li><br>
  <li>On lui indique que la modification va supprimer une colonne avecDROP.</li><br>
  <li>On mentionne le nom de la colonne √† supprimer (ici, ‚Äúbio‚Äù).</li><br>
</ul><br>
<figure>
  <img src="media/34_drop_item_from_table.png" alt="">
  <figcaption>Utilisation de DROP</figcaption>
</figure><br><br>
<div class="important">
  Il faut n√©anmoins faire attention lorsqu‚Äôon utilise cette commande.<br>
  Une fois la colonne supprim√©e, celle-ci est d√©finitivement d√©truite et ne peut plus √™tre r√©cup√©r√©e.<br>
  Vous perdez l‚Äôinformation pour tous les objets pr√©sents en base.<br>
  √Ä utiliser avec parcimonie !
</div><br><br>
<h4>√Ä vous de jouer !</h4>
Maintenant, admettons que le service l√©gal de Foodly vous dise que stocker des noms de famille va √† l‚Äôencontre des conditions de protection des donn√©es des utilisateurs.<br>
Comment feriez-vous pour supprimer les noms de famille ?<br><br>
<div class="code">
  ALTER TABLE utilisateur DROP nom;
</div><br><br>
<video src="media/12_drop_item_from_table.mp4" controls width="800"></video><br/><br/>

<h3>Modifiez un champ existant</h3>
<h4>Modifiez un champ des aliments</h4>
Le management de Foodly revient encore une fois vers vous !<br>
Apr√®s avoir regard√© des utilisateurs se servir de Foodly, ils se sont rendu compte que les utilisateurs souhaiteraient pouvoir filtrer les aliments selon leurs apports calorifiques avec plus de pr√©cision.<br>
Pour ce faire, les d√©veloppeurs vous indiquent qu‚Äôils vont devoir comparer les calories de deux aliments entre eux, et ce, √† la virgule pr√®s.<br>
Or, les calories sont actuellement stock√©es sous forme d‚Äôentiers (sans d√©cimales, du coup).<br>
Voici la commande pour effectuer cette op√©ration :<br><br>
<div class="code">
  ALTER TABLE aliment MODIFY calories FLOAT;
</div><br><br>
Analysons cette commande :
<ul>
  <li>On modifie toujours la structure d‚Äôune table avec <strong><u>ALTER TABLE</u></strong>.</li><br>
  <li>On lui signale √† nouveau quelle table modifier (ici, <strong>‚Äúaliment‚Äù</strong>).</li><br>
  <li>On lui indique que la modification va modifier le type d‚Äôune colonne avec <strong><u>MODIFY</u></strong>.</li><br>
  <li>On mentionne le nom de la colonne √† modifier (ici, <strong>‚Äúcalories‚Äù</strong>).</li><br>
  <li>On indique le nouveau type de la colonne (ici,<strong><u>FLOAT</u></strong>).</li><br>
</ul><br><br>
<figure>
  <img src="media/35_alter_table_modify.png" alt="">
  <figcaption>L'utilisation de FLOAT</figcaption>
</figure><br>
<h4>√Ä vous de jouer !</h4>
Les d√©veloppeurs viennent vous voir affol√©s !<br>
Certains utilisateurs ne peuvent pas s‚Äôinscrire car leur email d√©passe les 255 caract√®res.<br>
Pourriez-vous augmenter la limite √† 500 ?<br><br>
<div class="code">
  ALTER TABLE utilisateur MODIFY email varchar(500);
</div><br>
<video src="media/13_alter_table_modify.mp4" controls width="800"></video><br/><br/>

<h4>Renommez un champ des aliments</h4>
Ce coup-ci, c‚Äôest la designer de Foodly qui revient vers vous : les utilisateurs sont perturb√©s‚Ä¶<br>
Pour chaque aliment, la valeur en prot√©ines, vitamines, mati√®res grasses est mentionn√©e au pluriel.<br>
Alors que les sucres, eux, sont mentionn√©s au singulier.<br>
Ce qui perturbe la compr√©hension des aliments par les utilisateurs.<br>
Comment renommer cette colonne dans la BDD ?<br>
Voici la commande √† effectuer :<br>
<div class="code">
  ALTER TABLE aliment CHANGE sucre sucres FLOAT;
</div><br><br>
Voici les explications de cette commande :
<ul>
  <li>On modifie toujours la structure d‚Äôune table avec <strong><u>ALTER TABLE</u></strong>.</li><br>
  <li>On lui signale √† nouveau quelle table modifier (ici, <strong>‚Äúaliment‚Äù</strong>).</li><br>
  <li>On lui indique que la modification va modifier le nom d‚Äôune colonne avec <strong><u>CHANGE</u></strong>.</li>
  <li>On mentionne le nom de la colonne √† renommer, ainsi que son nouveau nom (ici, <strong><u>sucre</u></strong> devient <strong><u>sucres</u></strong>).</li>
  <li>On indique le nouveau type de la colonne (ici,<strong><u>FLOAT</u></strong>).</li>
</ul><br><br>
C‚Äôest une sp√©cificit√© propre √† MySQL : pour renommer une colonne, il faut aussi indiquer son type.<br>
Ce qui n‚Äôest pas n√©cessaire si vous utilisez un autre SGBD.<br>
Cela permet de modifier √† la fois le nom et le type d‚Äôune colonne dans une seule commande.<br>
Et ce, m√™me si vous ne souhaitez pas le modifier(r√©utilisez alors le m√™me type)<br>
<h4>√Ä vous de jouer !</h4>
A pr√©sent, les d√©veloppeurs trouvent que le nom <strong><u>code</u></strong> dans la table des langues est peu explicite.<br>
Ils aimeraient qu‚Äôelle s‚Äôappelle <strong><u>code_pays</u></strong>.<br><br>
<div class="code">
  ALTER TABLE langue CHANGE code code_pays varchar(100);
</div><br>

<video src="media/14_alter_table_change.mp4" controls width="800"></video><br/><br/>

<h3>En r√©sum√©</h3>
<ul>
  <li>Vous savez que toute modification de la structure d‚Äôun objet s‚Äôeffectue avec une commande <strong><u>ALTER TABLE</u></strong>.</li>
  <li>Pour ajouter un champ √† un objet, il vous faut utiliser le mot cl√© <strong><u>ADD</u></strong>.</li>
  <li>Pour supprimer un champ, le mot cl√© est <strong><u>DROP</u></strong>.</li>
  <li>Pour modifier un champ, le mot cl√© est <strong><u>MODIFY</u></strong> pour en modifier la structure, <strong><u>CHANGE</u></strong> pour le renommer.</li>
</ul>


    <h5><a href="#sommaire">Sommaire</a></h5>

  <h2 id="relation_un_plusieurs">4.2 - Ajoutez une relation un √† plusieurs -</h2> 
  Voyons dans ce chapitre comment ajouter une relation un √† plusieurs, en cr√©ant notre table <strong>"famille"</strong>.<br>
  Puis retrouvez dans le chapitre suivant comment ajouter une relation plusieurs √† plusieurs avec la cr√©ation de la table <strong>"lieu"</strong>.
  <h3>Ajoutez une nouvelle table "famille"</h3>
  Nous avons obtenu une nouvelle demande d‚Äôam√©lioration de l‚Äôapplication de la part des utilisateurs !<br>
  Ces derniers aimeraient pouvoir trier les aliments selon leur <strong>"famille"</strong>.<br>
  Par exemple, regrouper ensemble les fruits, les l√©gumes, les viandes, etc.<br>
  Les d√©veloppeurs pensent qu‚Äôil serait utile de s√©parer ces familles des aliments.<br>
  En effet, ils pensent que les familles d‚Äôaliments pourront √™tre utilis√©es de mani√®re ind√©pendante, pas forc√©ment uniquement sur les fiches des aliments.<br>
  Par exemple, pour effectuer un r√©sum√© de la consommation en fruits ou l√©gumes d‚Äôune personne sur un mois, ou la r√©partition au sein de ses courses.<br><br>
  <div class="remarque">
    Pour cela, il faudrait que les familles d‚Äôaliments soient sur une table distincte de celle des aliments !
  </div><br><br>
  Maintenant que vous savez <strong>joindre</strong> plusieurs tables entre elles, il est temps de construire une telle relation entre tables.<br>
  Avant de pouvoir relier les aliments √† leur famille, il faut d‚Äôabord‚Ä¶ eh bien, cr√©er la table famille !<br>
  Pour l‚Äôinstant, un objet de type famille ne devra contenir que le nom de cette famille (‚Äúfruit‚Äù, ‚Äúviande‚Äù, etc.).<br><br>
  <div class="code">
    CREATE TABLE famille (<br>
    <br>
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,<br>
    <br>
    nom VARCHAR(100) NOT NULL<br>
    <br>
    );<br>
  </div><br><br>
  Maintenant que cette table est cr√©√©e, ins√©rons un objet dans celle-ci.<br>
  Disons, l‚Äôobjet qui va repr√©senter les l√©gumes.<br><br>
  <div class="code">
    INSERT INTO famille (`nom`) VALUES ('l√©gumes');
  </div><br><br>
  Et voil√†, vous voici en possession d‚Äôune nouvelle table ‚Äúfamille‚Äù qui dispose d‚Äôun objet ‚Äúl√©gumes‚Äù.

  <h3>Ajoutez la relation entre famille et aliment</h3>
  Une des choses √† d√©terminer lors de l‚Äôajout d‚Äôune relation, c‚Äôest de savoir si :
  <ul>
    <li>c‚Äôest une relation <strong>un √† plusieurs</strong> ;</li>
    <li>ou une relation <strong>plusieurs √† plusieurs</strong>.</li>
  </ul><br>
  Ici, un aliment peut avoir une seule famille, mais une famille peut √™tre pr√©sente sur plusieurs aliments.<br>
  Par exemple, une poire et une pomme font partie de la famille ‚Äúfruits‚Äù.<br>
  <div class="remarque">
    Il s‚Äôagit donc d‚Äôune relation un √† plusieurs.
  </div><br><br>
  Dans le cadre d‚Äôune telle relation, c‚Äôest <strong>l‚Äôobjet qui se trouve du c√¥t√© ‚Äúplusieurs‚Äù de la relation qui va √™tre modifi√©</strong>, ici les aliments.<br>
  On va devoir y stocker l‚Äôid de l‚Äôobjet ‚Äúun‚Äù associ√©, par exemple ‚Äúfruits‚Äù.<br>
  Ici, les aliments vont donc devoir √™tre mis √† jour pour y stocker une r√©f√©rence √† leur famille.<br>
  Cette r√©f√©rence, par convention, sera l‚Äôid de la famille.<br><br>
  Voici les √©tapes que l‚Äôon va suivre :
  <ol>
    <li>Ajout du champ <strong><u>famille_id</u></strong> sur les aliments.<br>
    </li>
    <li>Modification de ce champ pour signaler √† MySQL que c‚Äôest une r√©f√©rence √† la table famille.
    </li>
    <li>Modification d‚Äôun objet pour y stocker une relation.</li>
  </ol><br>
  Ajout du champ <strong><u>famille_id</u></strong> sur les aliments.<br>
    <div class="code">
      ALTER TABLE aliment<br>
      ADD famille_id INT NOT NULL;<br>
    </div><br><br>
      Il faut qu‚Äôon indique √† MySQL que ce champ est une r√©f√©rence √† une autre table,<br>
      en lui pr√©cisant quel champ de cette autre table on r√©f√©rence.<br>
      Pour modifier le champ famille_id, on utilise la commande :<br>
      <div class="code">
        ALTER TABLE aliment<br>
        ADD FOREIGN KEY (famille_id) REFERENCES famille (id)<br>
        ON DELETE CASCADE;<br>
      </div><br>
      Voyons ensemble ce que cette commande signifie :
      <ul>
        <li>On signale √† MySQL qu‚Äôon souhaite modifier la table <strong>‚Äúaliment‚Äù</strong>, pour y ajouter une colonne<br>
           (enfin, plut√¥t y ajouter une contrainte, dans ce cas pr√©cis).
        </li>
        <li>
          On dit √† MySQL que la colonne <strong><u>famille_id</u></strong> est une cl√© √©trang√®re (foreign key en anglais),<br>
          soit une r√©f√©rence √† une colonne d‚Äôune autre table (ici, avec la partie  <strong><u>FOREIGN KEY (famille_id)</u></strong>  ).
        </li>
        <li>
          On indique ensuite ce √† quoi cette cl√© fait r√©f√©rence.<br>
          Soit, dans notre cas, la colonne <strong>‚Äúid‚Äù</strong> de la table <strong>‚Äúfamille‚Äù</strong> (soit la commande  <strong><u>REFERENCES famille(id)</u></strong>  ).
        </li>
        <li>
          Enfin, s√ªrement la partie la plus obscure pour vous, on indique √† MySQL le comportement √† adopter en cas de suppression de l‚Äôobjet ‚Äúunique‚Äù (ici, la ‚Äúfamille‚Äù).<br>
          Admettons que je vienne de cr√©er ma famille ‚Äúfruits‚Äù, et qu‚Äôelle soit reli√©e √† mes objets ‚Äúpomme‚Äù et ‚Äúpoire‚Äù.<br>
          Que se passe-t-il si je supprime la famille ‚Äúfruits‚Äù ?<br>
          Eh bien, MySQL a besoin de le savoir.<br>
          Pour cela, on lui indique via la commande<strong><u>ON DELETE</u></strong>.<br>
          Cette derni√®re peut prendre une option parmi celles-ci :
          <ul>
            <li><strong><u>RESTRICT</u></strong> ou <strong><u>NO ACTION</u>  : MySQL va emp√™cher la suppression tant que ‚Äúfruits‚Äù est r√©f√©renc√© sur au moins un objet ‚Äúaliment‚Äù.</strong></li>
            <li><strong><u>SET NULL</u></strong>: MySQL va autoriser la suppression de ‚Äúfruits‚Äù, et remplacer ‚Äúfamille_id‚Äù sur ‚Äúpomme‚Äù et ‚Äúpoire‚Äù par la valeur NULL.</li>
            <li><strong><u>CASCADE</u></strong> l‚Äôoption la plus courante, mais la plus dangereuse.<br>
              Ici, MySQL va supprimer ‚Äúpoire‚Äù et ‚Äúpomme‚Äù en m√™me temps que ‚Äúfruits‚Äù (il va donc supprimer tous les objets reli√©s).</li>
          </ul>
        </li>
      </ul>
      <figure>
        <img src="media/36_ON-DELETE.png" alt="">
        <figcaption>Actions de la commande ON DELETE</figcaption>
      </figure><br><BR>
      Voil√†, MySQL sait que ‚Äúfamille_id‚Äù est une r√©f√©rence √† l‚Äôid de la table famille !<BR>
      Reste maintenant √† mettre √† jour vos aliments !<BR>
      Ajouter la relation de l‚Äôobjet ‚Äúharicots verts‚Äù vers la famille ‚Äúl√©gumes‚Äù.<br>
      Voici la commande :<br>
      <div class="code">
        UPDATE `aliment` SET `famille_id` = '1' WHERE `nom` = 'haricots verts';
      </div><br><br>
      <div class="remarque">
        N‚Äôoubliez pas, ‚Äúl√©gumes‚Äù ayant √©t√© ajout√© en premier √† la table ‚Äúfamille‚Äù, il a l‚Äôid num√©ro 1. 
      </div><br><br>
      Pour v√©rifier que cela a bien fonctionn√©, vous pouvez s√©lectionner les haricots verts avec leur famille gr√¢ce √† un <strong><u>JOIN</u></strong>.<br>
      <div class="code">
        SELECT * FROM aliment<br>
        JOIN famille ON aliment.famille_id = famille.id<br>
        WHERE<br>aliment.nom = "haricots verts";
      </div><br><br>
      Gr√¢ce √† cette commande, vous verrez appara√Ætre un tableau r√©capitulatif, o√π la famille de ‚Äúharicots verts‚Äù est bien ‚Äúl√©gumes‚Äù.<br><br>
      Il ne vous reste plus qu‚Äô√† ajouter les autres familles vous-m√™me, rajouter sa famille √† chaque aliment, et le tour est jou√© !
      <h4>√Ä vous de jouer !</h4>
      Faisons un petit exercice :<br>
      On souhaite rajouter les r√©ductions disponibles sur les aliments.<br>
      Une r√©duction pouvant √™tre la m√™me pour plusieurs aliments mais chaque aliment pouvant n‚Äôavoir qu‚Äôune seule r√©duction, il s‚Äôagit d‚Äôune relation un √† plusieurs.<br>
      Les r√©ductions sont uniquement constitu√©es d‚Äôun champ ‚Äúvaleur‚Äù, qui va contenir la r√©duction au format texte.<br>
      Comment feriez-vous pour cr√©er cette table et la lier aux aliments ?<br><br>
      Creation de la table "reduction"<br>
      <div class="code">
      CREATE TABLE reduction<br>
      (id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,<br>
      valeur VARCHAR(100) NOT NULL).<br>
      </div><br>
      Creation des valeurs<br>
      <div class="code">
        INSERT INTO reduction (valeur) VALUES ('-30%');
      </div><br>
      <div class="code">
        INSERT INTO reduction (valeur) VALUES ('-50%');
      </div><br>
      Ajout de la colonne <strong><u>reduction_id</u></strong><br>
      <div class="code">
        ALTER TABLE aliment ADD reduction_id INT;<br>
      </div><br>
      Ajout de la liaison des tables<br>
      <div class="code">
        ALTER TABLE aliment<br>
        ADD FOREIGN KEY (reduction_id)<br>
        REFERENCES reduction (id);<br>
        ON DELETE SET NULL;
      </div><br>
      Affecter une reduction de 50% √† l'aliment dont l'id=1<br>
      <div class="code">
        UPDATE aliment SET reduction_id=1 WHERE id=1;
      </div><br>
      Utilisation de <strong><u>JOIN</u></strong><br>
      <div class="code">
        SELECT * from aliment JOIN reduction ON aliment.reduction_id = reduction.id WHERE aliment.id=1;
      </div><br><br>
      <video src="media/15_alter_table_join_one_to_many.mp4" controls width="800"></video><br/><br/>
      <h3>En r√©sum√©</h3>
      Vous savez ajouter une relation un √† plusieurs entre deux objets en ajoutant √† l‚Äôobjet A un champ qui contiendra l‚Äôid (ou cl√© primaire) de l‚Äôobjet B.
      
      
      <h5><a href="#sommaire">Sommaire</a></h5>

      <h2 id="relation_plusieurs_plusieurs">4.3 - Ajoutez une relation plusieurs √† plusieurs -</h2>
      Souvenez-vous on aimerait ensuite ajouter le type de magasin o√π sont pr√©sents les aliments.<br>
      Un m√™me aliment pouvant √™tre pr√©sent dans plusieurs lieux, nous allons cr√©er une relation plusieurs √† plusieurs.
      <h3>Ajoutez une nouvelle table ‚Äúlieu‚Äù</h3>
      La derni√®re demande de mise √† jour des utilisateurs est arriv√©e !<br>
      Ces derniers r√©clament une chose en th√©orie simple : pouvoir visualiser dans l‚Äôapplication de Foodly dans quel magasin sont disponibles leurs aliments pr√©f√©r√©s.<br>
      Par exemple, savoir si leur jambon de pr√©dilection est disponible aussi bien √† Carrefour que chez Leclerc.<br>
      Les d√©veloppeurs se sont de nouveau regroup√©s : il va falloir <strong>stocker les lieux de vente dans la BDD</strong>.<br>
      Un lieu pouvant vendre plusieurs aliments, et ces m√™mes aliments pouvant √™tre vendus dans plusieurs lieux, vous allez devoir cr√©er une <strong>relation plusieurs √† plusieurs</strong>.<br>
      Mais avant toute chose, il vous faut cr√©er la nouvelle table des lieux de vente (que nous allons sobrement appeler ‚Äúlieu‚Äù).<br>
      Un lieu de vente, c‚Äôest :
      <ul>
        <li>un nom (exemple : Carrefour City) ;</li>
        <li>un type (exemple : supermarch√©).</li>
      </ul><br><br>
      <div class="code">
        CREATE TABLE lieu (<br>
        id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,<br>
        nom VARCHAR(100) NOT NULL,<br>
        type VARCHAR(100) NOT NULL<br>
        );<br>
      </div><br><br>
      ins√©rons un lieu dans cette derni√®re, partons sur un simple Carrefour City<br>
      <div class="code">
        INSERT INTO `lieu` (`nom`, `type`) VALUES ('Carrefour City', 'supermarch√©');
      </div>
      La nouvelle table est cr√©√©e, et un objet y a √©t√© ins√©r√©.<br>
      Passons maintenant aux choses s√©rieuses en cr√©ant la relation plusieurs √† plusieurs avec les aliments.

      <h3>Ajoutez la table de liaison</h3>
      Les aliments vont avoir des relations un √† plusieurs avec la table de liaison.<br>
      Les lieux, eux aussi, vont disposer de telles relations avec cette table.<br>
      Et c‚Äôest en reliant ces deux tables via cette table de liaison que vous allez pouvoir ressortir les relations entre lieux et aliments.<br><br>
      Pour ce faire, une table de liaison doit √™tre cr√©√©e.<br>
      Par convention, elle doit toujours avoir cette forme :
      <ul>
        <li>Son nom doit regrouper les deux tables qu‚Äôelle relie, sous la forme : <strong>‚Äútable1_table2‚Äù</strong>.</li>
        <li>Elle n‚Äôa que deux champs √† stocker : <strong><u>table1_id</u></strong> et <strong><u>table2_id</u></strong>.<br>
          Soit les id de chaque objet qu‚Äôelle relie.
          <ul>
            <li>Ces id sont donc des r√©f√©rences aux id des autres tables.</li>
          </ul>
        </li>
        <li>Sa cl√© primaire n‚Äôest autre que l‚Äôassociation de ces deux id (association qui doit toujours √™tre unique).</li>
      </ul><br><br>
      Dans notre cas, cela donne ceci en commande SQL :<br>
      <div class="code">
        CREATE TABLE aliment_lieu (<br>
          aliment_id INT NOT NULL,<br>
          lieu_id INT NOT NULL,<br>
          FOREIGN KEY (aliment_id) REFERENCES aliment (id) ON DELETE RESTRICT ON UPDATE CASCADE,<br>
          FOREIGN KEY (lieu_id) REFERENCES lieu (id) ON DELETE RESTRICT ON UPDATE CASCADE,<br>
          PRIMARY KEY (aliment_id, lieu_id)<br>
          <br>
          );<br>
      </div><br><br>
      D√©cortiquons cette commande ensemble :
      <ul>
        <li>On cr√©e une <strong>nouvelle table</strong> avec le nom des deux tables qu‚Äôelle relie (ici la table <strong>‚Äúaliment‚Äù</strong>, ainsi que la table <strong>‚Äúlieu‚Äù</strong>).</li>
        <li>On ajoute les r√©f√©rences aux id de ces deux tables :
          <ul>
            <li><strong><u>aliment_id</u></strong>, qui est une r√©f√©rence aux id de la table <strong>‚Äúaliment‚Äù</strong> ;</li>
            <li><strong><u>lieu_id</u></strong>, qui est une r√©f√©rence aux id de la table <strong>‚Äúlieu‚Äù</strong> ;</li>
            <li>on signale √† MySQL comment mettre √† jour la BDD en cas de suppression ou de mise √† jour d‚Äôun objet de ‚Äúaliment_lieu‚Äù.</li>
          </ul>
        </li>
        <li>
          On explique √† MySQL que l‚Äôid de cette table sera l‚Äôassociation entre les deux id pr√©c√©dents.
        </li>
      </ul><br>
      <div class="remarque">
        <strong><u>ON UPDATE</u></strong> est le comportement que doit adopter MySQL en cas de mise √† jour d‚Äôun champ.<br>
        Il peut avoir les m√™mes options que <strong><u>ON DELETE</u></strong>
      </div><br><br>
      <figure>
        <img src="media/37_ON-update.png" alt="">
        <figcaption>Actions de la commande ON UPDATE</figcaption>
      </figure><br>
      Admettons que le ‚Äúoeuf‚Äù pr√©sent dans notre BDD soit vendu chez ‚ÄúCarrefour City‚Äù.<br>
      Il vous faudrait alors cr√©er un objet dans <strong>‚Äúaliment_lieu‚Äù</strong>, avec l‚Äô<strong><u>id</u></strong> de ‚Äúoeuf‚Äù ainsi que l‚Äô<strong><u>id</u></strong> de ‚ÄúCarrefour City‚Äù.<br><br>
      Retrouvez ces id dans votre BDD et √©crivez la commande SQL pour cr√©er cette relation.<br>
      Sachant que 3 est l‚Äôid de ‚Äúoeuf‚Äù, 1 celui du ‚ÄúCarrefour City‚Äù, cela donne √ßa :<br>
      <div class="code">
        INSERT INTO `aliment_lieu` (`aliment_id`, `lieu_id`) VALUES ('3', '1');
      </div><br><br>
      Le fait que le blanc de dinde soit vendu √† Carrefour est stock√© en base de donn√©es.<br><br>
      Pour retrouver cette relation, il vous faudra faire un double <strong><u>JOIN</u></strong>.<br>
      <div class="code">
        SELECT * FROM aliment<br>
        JOIN aliment_lieu ON aliment.id = aliment_lieu.aliment_id<br>
        JOIN lieu ON lieu.id = aliment_lieu.lieu_id<br>
        WHERE aliment.id = 3;<br>
      </div><br><br>
      <div class="remarque">
        Ici, on joint la table aliment √† la table lieu via la table de liaison, comme si c‚Äô√©tait une simple relation un √† plusieurs r√©p√©t√©e.
      </div><br>
      <h3>√Ä vous de jouer !</h3>
      On souhaite savoir quels sont les appareils sur lesquels les utilisateurs ont install√© Foodly (par exemple : mac, pc, android, etc).<br>
      Un utilisateur peut utiliser Foodly sur plusieurs appareils, et un m√™me appareil peut √™tre commun √† plusieurs utilisateurs.<br>
      Il s‚Äôagit d‚Äôune relation plusieurs √† plusieurs<br><br>
      Un appareil est uniquement constitu√© de son type au format texte.<br>
      Comment feriez-vous pour cr√©er cette table et la lier aux utilisateurs ?<br><br>
      Creation de la table <strong>"appareil"</strong><br>
      <div class="code">
        CREATE TABLE appareil (<br>
        id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,<br>
        type VARCHAR(100) NOT NULL);
      </div><br>
      Ajout d'appareil dans la table <strong>"appareil"</strong><br>
      <div class="code">
        INSERT INTO appareil (type) VALUES ('Iphone');
      </div><br>
      <div class="code">
        INSERT INTO appareil (type) VALUES ('Android');
      </div><br>
      <div class="code">
        INSERT INTO appareil (type) VALUES ('PC');
      </div><br>
      <div class="code">
        INSERT INTO appareil (type) VALUES ('MAC');
      </div><br>
      Creation de la table de liaison <strong>utilisateur_appareil</strong><br>
      <div class="code">
        CREATE TABLE utilisateur_appareil (
          utilisateur_id INT NOT NULL,<br>
          appareil_id INT NOT NULL,<br>
          FOREIGN KEY (utilisateur_id) REFERENCES utilisateur (id) ON DELETE RESTRICT ON UPDATE CASCADE,<br>
          FOREIGN KEY (appareil_id) REFERENCES appareil (id) ON DELETE RESTRICT ON UPDATE CASCADE,<br>
          PRIMARY KEY (utilisateur_id, appareil_id)<br>
        )
      </div><br>
      Lier le premier utilisateur (id=1) √† ses appareils<br>
      <div class="code">
        INSERT INTO utilisateur_appareil (utilisateur_id, appareil_id)<br>
        VALUES<br>
        (1,2);
      </div><br>
      <div class="code">
        INSERT INTO utilisateur_appareil (utilisateur_id, appareil_id)<br>
        VALUES<br>
        (1,4);
      </div><br>
      Verification du lien<br>
      <div class="code">
        SELECT * FROM utilisateur<br>
        JOIN utilisateur_appareil ON utilisateur.id = utilisateur_appareil.utilisateur_id<br>
        JOIN appareil ON appareil.id = utilisateur_appareil.appareil_id<br>
        WHERE  utilisateur.id = 1;<br>
      </div><br><br>
<video src="media/16_alter_table_join_many_to_many.mp4" controls width="800"></video><br/><br/>

<h3>En r√©sum√©</h3>
Vous savez ajouter une <strong>relation plusieurs √† plusieurs</strong> entre deux objets en <strong>cr√©ant une table de liaison</strong> qui contiendra les <strong>id de chaque objet</strong>.

<h5><a href="#sommaire">Sommaire</a></h5>
  
<h2 id="mysql_connect">5 - Connecter une base de donn√©es MySQL √† une app Node.js</h2> 
Plusieurs librairies NodeJS permettent d‚Äô√©tablir une connexion avec une base de donn√©es MySQL et d'ex√©cuter des requ√™tes.<br>
Parmi elles, les deux plus populaires sont :
<ul>
  <li><strong>mysql</strong><br>
    un driver MySQL basique pour Node.js √©crit en javascript et ne n√©cessitant pas de compilation.<br>
    Il s‚Äôagit de la solution la plus simple et rapide √† mettre en place pour interagir avec une base de donn√©es MySQL en Node.</li>
  <li><strong><a href="https://sequelize.org/" target="_blank">Sequelize</a></strong><br>
  La librairie la plus populaire pour utiliser les syst√®mes de gestion de bases de donn√©es bas√©s sur SQL avec Node.js.<br>
  Elle supporte MySQL mais √©galement Postgres, Microsoft SQL, MariaDB‚Ä¶<br>
  Cet ORM (Object-Relational Mapping) puissant permet entre autres l‚Äôutilisation de promesses et la customisation des messages d‚Äôerreur pour chaque champs.</li>
</ul>
<h3>Utiliser le module mysql pour utiliser une base de donn√©es MySql en Node</h3>
Commencez par installer le module mysql dans le dossier de votre projet Node.js avec npm install :<br>
<div class="code">
  npm install mysql
</div><br>
Dans le fichier point d‚Äôentr√©e de votre projet Node.js, initialisez le module dans une variable avec require() :<br>
<div class="code">
  const mysql = require('mysql');
</div><br>
Votre app NodeJS peut maintenant se connecter √† votre base de donn√©es MySQL.
<h4>Se connecter √† la base MySQL avec le module mysql</h4>
Pour vous connecter √† votre base MySQL, renseignez l‚Äôh√¥te, l‚Äôutilisateur et le mot de passe sp√©cifi√© lors de l‚Äôinstallation de MySQL sur votre syst√®me :<br>
<div class="code">
  const db = mysql.createConnection({<br>

    host: "localhost",<br>
 
    user: "nom_utilisateur",<br>
 
    password: "mot_de_passe_utilisateur"<br>
 
  });
</div><br><br>
Enfin, utilisez la fonction <strong>connect</strong> pour vous connecter √† votre base de donn√©es MySQL.<br>
Une exception sera jet√©e en cas d‚Äôerreur :<br>
<div class="code">
  db.connect(function(err) {<br>
    if (err) throw err;<br>
    console.log("Connect√© √† la base de donn√©es MySQL!");<br>
  });
</div><br><br>
Votre utilisateur est d√©sormais connect√© √† la base de donn√©es MySQL et peut y ex√©cuter des requ√™tes.
<h4>Cr√©er une base de donn√©es MySQL en Node.js avec le module mysql</h4>
Pour cr√©er une base de donn√©es MySQL, ex√©cutez simplement une requ√™te <div class="inner_code">CREATE DATABASE</div> avec la fonction <strong>query()</strong> dans le code de votre app :<br>
<div class="code">
  const mysql = require('mysql');<br>

  const db = mysql.createConnection({<br>
     host: "localhost",<br>
     user: "nom_utilisateur",<br>
     password: "mot_de_passe_utilisateur"<br>
   });<br>
   <br>
   db.connect(function(err) {<br>
     if (err) throw err;<br>
     console.log("Connect√© √† la base de donn√©es MySQL!");<br>
    db.query("CREATE DATABASE mabdd", function (err, result) {<br>
         if (err) throw err;<br>
         console.log("Base de donn√©es cr√©√©e !");<br>
       });<br>
   });
</div><br><br>
<h4>Ex√©cuter des requ√™tes SQL sur une base MySQL avec NodeJS</h4>
Vous pouvez ainsi ex√©cuter tout type de requ√™te SQL, comme par exemple une jointure :<br>
<div class="code">
  const mysql = require('mysql');<br>
  <br>
const con = mysql.createConnection({<br>
   host: "localhost",<br>
   user: "nom_utilisateur",<br>
   password: "mot_de_passe_utilisateur"<br>
   database : "mabdd"<br>
 });<br>
 <br>
  con.connect(function(err) {<br>
   if (err) throw err;<br>
   console.log("Connect√© √† la base de donn√©es MySQL!");<br>
   con.query("SELECT eleves.id as 'eleve_id', eleves.nom as 'eleve_nom', eleves.cours_id, cours.nom as 'cours_nom', cours.date as 'cours_date' FROM eleves<br>
        JOIN cours on eleves.cours_id = cours.id", function (err, result) {<br>
       if (err) throw err;<br>
       console.log(result);<br>
     });<br>
 });
</div><br><br>
Notez que nous avons cette fois pr√©cis√© le nom de la base de donn√©es MySQL sur laquelle se connecter dans l‚Äôappel √† la fonction createConnection().<br>
On retrouve ces m√™mes r√©sultats:<br>
<figure>
  <img src="media/requeteMySQL_node.jpg" alt="">
  <figcaption>Voici la r√©ponse fournie par le package mysql invoqu√© depuis notre fichier javascript</figcaption>
</figure>
<h3>Utiliser une base de donn√©es MySQL en NodeJS avec Sequelize</h3>
Pour utiliser Sequelize afin d‚Äôinteragir avec votre base de donn√©es MySQL en Node, il vous faut d‚Äôabord installer le driver <strong>mysql2</strong>.<br>
Il s‚Äôagit d‚Äôun driver distinct du module mysql, moins populaire que ce dernier, mais qui propose quelques fonctionnalit√©s suppl√©mentaires.<br><br>
Installez mysql2 avec npm install :<br>
<div class="code">
  npm install mysql2
</div><br><br>
Dans le code de votre app, initialisez Sequelize avec require() :<br>
<div class="code">
  const { Sequelize } = require('sequelize');
</div><br><br>
Dans un nouvel objet Sequelize, indiquez le nom d‚Äôutilisateur, le nom d‚Äôutilisateur, le mot de passe et le nom de la base de donn√©es MySQL afin d‚Äô√©tablir la connexion :<br>
<div class="code">
  const sequelize = new Sequelize("nom_base_de_donnees", "nom_utilisateur", "mot_de_passe_utilisateur", {<br>
    dialect: "mysql",<br>
    host: "localhost"<br>
});
</div><br><br>
Enfin, vous pouvez v√©rifier que la connexion est bien √©tablie avec <div class="inner_code">authenticate()</div>, mais cette partie n‚Äôest pas n√©cessaire pour ex√©cuter des requ√™tes sur votre base :<br>
<div class="code">
  try {<br>
    sequelize.authenticate();<br>
    console.log('Connect√© √† la base de donn√©es MySQL!');<br>
  } catch (error) {<br>
    console.error('Impossible de se connecter, erreur suivante :', error);<br>
  }
</div><br><br>
<h4>Cr√©er une base de donn√©es MySQL en Node.js avec Sequelize</h4>
Pour cr√©er une base de donn√©es MySQL en Node avec Sequelize, ajoutez simplement une requ√™te <div class="inner_code">CREATE DATABASE</div> dans un appel √† la fonction <strong>query()</strong> √† votre code :<br>
<div class="code">
  const sequelize = new Sequelize("", "nom_utilisateur", "mot_de_passe_utilisateur", {<br>
    dialect: "mysql",<br>
    host: "localhost"<br>
   });<br>
   <br>
   try {<br>
      sequelize.authenticate();<br>
      console.log('Connect√© √† la base de donn√©es MySQL!');<br>
      sequelize.query("CREATE DATABASE `mabdd`;").then(([results, metadata]) => {<br>
          console.log('Base de donn√©es cr√©√©e !');<br>
        })<br>
    } catch (error) {<br>
      console.error('Impossible de se connecter, erreur suivante :', error);<br>
    }
</div><br><br>
<h4>Ex√©cuter des requ√™tes SQL sur une base MySQL avec Sequelize</h4>
Avec la fonction <div class="inner_code">query()</div>, vous pouvez ex√©cuter n‚Äôimporte quelle requ√™te SQL sur votre base de donn√©es,<br>
 comme par exemple la jointure de lo'exemple precedent :<br>
 <div class="code">
  const sequelize = new Sequelize("mabdd", "nom_utilisateur", "mot_de_passe_utilisateur", {<br>
    dialect: "mysql",<br>
    host: "localhost"<br>
   });<br>
   <br>
   try {<br>
      sequelize.authenticate();<br>
      console.log('Connect√© √† la base de donn√©es MySQL!');<br>
      sequelize.query("SELECT eleves.id as 'eleve_id', eleves.nom as 'eleve_nom', eleves.cours_id, cours.nom as 'cours_nom', cours.date as 'cours_date' <br>
      FROM eleves JOIN cours on eleves.cours_id = cours.id").then(([results, metadata]) => {<br>
          console.log(results);<br>
        })<br>
    } catch (error) {<br>
      console.error('Impossible de se connecter, erreur suivante :', error);<br>
    }
 </div><br><br>
 On retrouve le m√™me r√©sultat dans la console :<br>
 <figure>
  <img src="media/requeteMySQL_node_sequelize.jpg" alt="">
  <figcaption>R√©ponse SQL via le package Seequelize</figcaption>
</figure>



  </body>
</html>

