<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="media/logo.png">

    <link rel="stylesheet" href="stylecours.css" />
    
    <title>SQL</title>
  </head>

  <body>

    <div class="title">ImplÃ©mentez vos bases de donnÃ©es relationnelles avec SQL</div>

    <div class="content">
      <div class="sommaire">
        <h2 id="sommaire">- Sommaire -</h2>
        <ul class="list_sommaire">  
            <li><strong><a href="#sgbd">1.1 - DÃ©couvrez le systÃ¨me de gestion de base de donnÃ©es (SGBD) -</a></strong></li>
            <li><strong><a href="#MySQL_install">1.2 - Installez le SGBD MySQL -</a></strong></li>
            <li><strong><a href="#bdd">1.3 - CrÃ©ez votre base de donnÃ©es (BDD) -</a></strong></li>
            <li><strong><a href="#BDD_data_insert">2.1 - InsÃ©rez des donnÃ©es dans votre BDD -</a></strong></li>
            <li><strong><a href="#BDD_data_select">2.2 - SÃ©lectionnez les donnÃ©es prÃ©sentes dans votre BDD -</a></strong></li>
            <li><strong><a href="#update_BDD">2.3 - Mettez Ã  jour les donnÃ©es de votre BDD -</a></strong></li>
            <li><strong><a href="#delete_BDD">2.4 - Supprimez des objets dans votre BDD -</a></strong></li>
            <li><strong><a href="#extract_data">3.1 - Extrayez des informations spÃ©cifiques de votre BDD -</a></strong></li>
            <li><strong><a href="#count">3.2 - Effectuez des opÃ©rations et sauvegardez vos requÃªtes -</a></strong></li>
            <li><strong><a href="#join">3.3 - ImplÃ©mentez des relations entre vos donnÃ©es grÃ¢ce Ã  JOIN -</a></strong></li>
            <li><strong><a href="#alter_table">4.1 - Modifiez la structure dâ€™un objet avec ALTER TABLE -</a></strong></li>
            <li><strong><a href="#relation_un_plusieurs">4.2 - Ajoutez une relation un Ã  plusieurs -</a></strong></li>
            <li><strong><a href="#relation_plusieurs_plusieurs">4.3 - Ajoutez une relation plusieurs Ã  plusieurs -</a></strong></li>
            <li><strong><a href="CommandeSQL.html" target="_blank">Commande MySQL</a></strong></li>
            <li><strong><a href="quizz.html" target="_blank">Quiz MySQL</a></strong></li>


        </ul>
      </div>
      <div class="sommaire">
        <h2>- Ressource -</h2>
        <ul class="list_sommaire">
          <li><a href="https://www.mysql.com/fr/" target="_blank">MySQL</a></li>
          <li><a href="https://dev.mysql.com/downloads/installer/" target="_blank">MySQL Install</a></li>
          <li><a href="https://www.oracle.com/fr/database/" target="_blank">Oracle</a></li>
          <li><a href="https://www.postgresql.org/" target="_blank">PostgreSQL</a></li>
          <li><a href="https://www.sqlite.org/index.html" target="_blank">SQLite</a></li>
          <li><a href="https://dev.mysql.com/doc/refman/8.0/en/data-types.html" target="_blank">SQL Data Types</a></li>
          
        </ul>
        <h2>- Cours et Tutos -</h2>
        <ul class="list_sommaire">
          <li><a href="https://www.youtube.com/watch?v=qrmLVJBJ-D4&list=PLjwdMgw5TTLUJLpzUYGBK7K5-hPgZA7zo" target="_blank">Grafikart - Tuto MySQL YouTube</a></li>
          <li><a href="https://grafikart.fr/tutoriels/introduction-1093#autoplay" target="_blank">Grafikart - Tuto MySQL</a></li>

          
        </ul>
      </div>
    </div>
    <h3 class="sommaire_fixed"><a href="#sommaire">Index</a></h3>
    <h2 id="sgbd">1.1 - DÃ©couvrez le systÃ¨me de gestion de base de donnÃ©es (SGBD) -</h2> 

    <h3>DÃ©couvrez votre mission dans ce cours</h3>
    Dans ce cours, nous allons crÃ©er ensemble une base de donnÃ©es (BDD) pour une application imaginaire, Foodly.<br>
    Cette application permet Ã  des internautes de sÃ©lectionner les aliments quâ€™ils souhaitent acheter pour voir leur composition en protÃ©ines, graisses, sucres, etc.<br>
    <figure>
      <img src="media/1_Foodly-logo_static.png" alt="foodly">
    </figure><br>
    <div class="remarque">
      Jâ€™utiliserai tout au long du cours l'abrÃ©viation <strong>BDD pour base de donnÃ©es</strong>.<br>
      Vous dÃ©couvrirez quelques autres abrÃ©viations que je vous expliquerai au fur et Ã  mesure, mais câ€™est surtout celle-ci que vous devez retenir pour lâ€™instant !
    </div><br>
    La BDD de Foodly va donc stocker les donnÃ©es dont lâ€™application a besoin pour fonctionner, Ã  savoir  :
    <ul>
      <li>
        les utilisateurs inscrits ; 
      </li><br>
      <li>
        les aliments disponibles.
      </li><br>
    </ul>
Chacune de ces donnÃ©es aura des caractÃ©ristiques, comme lâ€™e-mail pour lâ€™utilisateur ou les calories pour les aliments.<br>
Nous allons les voir par la suite.<br>
<figure>
  <img src="media/2_preÌsentation-fil-rouge_static.png" alt="foodly">
  <figcaption>Les donnÃ©es utilisateur et aliment Ã  stocker dans la BDD Foodly</figcaption>
</figure><br>
Ã€ la fin de ce cours, vous aurez crÃ©Ã© plusieurs utilisateurs en base, de nombreux aliments, ainsi quâ€™un moyen de lier les utilisateurs aux aliments quâ€™ils ont achetÃ©s.<br>
Avant de mettre les mains dans le cambouis, on doit passer par une partie pas forcÃ©ment plaisante, mais indispensable : le choix et lâ€™installation de notre systÃ¨me de gestion de bases de donnÃ©es.<br>
Car sans lui, pas de BDD.<br><br>
Installer des logiciels sur son ordinateur nâ€™est pas la chose la plus drÃ´le.<br>
Pour avoir dÃ» installer deux fois dâ€™affilÃ©e toutes les librairies (petits programmes qui nous permettent de coder) sur mon ordinateur professionnel, aprÃ¨s me lâ€™Ãªtre fait voler, je peux vous lâ€™assurer, personne nâ€™aime Ã§a.<br>
Je vous promets de faire au mieux pour rendre cela plaisant et aller droit au but.<br><br>
Votre objectif une fois cette partie finie : Ãªtre capable de choisir votre systÃ¨me de gestion de base de donnÃ©es et de lâ€™installer.

<h3>Choisissez votre SGBD</h3>
<strong>Le SGBD est le logiciel qui va vous permettre de manipuler les donnÃ©es dâ€™une base</strong>.<br>
Câ€™est ce logiciel qui commande les interactions avec votre base pour y rÃ©cupÃ©rer, ajouter, modifier ou supprimer des donnÃ©es.<br>
Pour Ã©changer avec votre base, vous allez donc donner des ordres Ã  votre SGBD.<br>
Des ordres en franÃ§ais ?<br>
Pas exactement !<br>
Ces ordres, vous allez les lui donner dans un langage trÃ¨s simple : <strong>le langage SQL</strong>.<br>
Pas dâ€™inquiÃ©tude, on va avancer pas Ã  pas ensemble pour que vous puissiez prendre en main ce langage !<br>
Le SQL, abrÃ©viation de Structured Query Language (en franÃ§ais, langage de requÃªte structurÃ©e), est un langage informatique qui vous permet d'interagir avec vos bases de donnÃ©es.<br>
Câ€™est le plus rÃ©pandu ; par consÃ©quent il est indispensable de le connaÃ®tre.<br>
On va donc sâ€™en servir pour gÃ©rer notre base de donnÃ©es pour la suite du cours.<br><br>
Imaginez quâ€™un utilisateur arrive sur Foodly.<br>
Il scanne un aliment prÃ©sent dans son supermarchÃ© pour connaÃ®tre ses caractÃ©ristiques nutritionnelles.<br>
Que va faire notre application ?<br>
Lâ€™application va traduire cette recherche en SQL et lâ€™envoyer au SGBD, qui va rÃ©cupÃ©rer lâ€™aliment en question dans le stockage de la base de donnÃ©es, pour ensuite le redonner Ã  lâ€™application.<br>
Lâ€™utilisateur retrouvera ainsi son aliment avec toutes ses caractÃ©ristiques.<br>
<figure>
  <img src="media/3_Lien-SGBD-SQL_static.png" alt="">
  <figcaption>La relation entre le langage SQL et le SGBD lors d'une action sur l'application</figcaption>
</figure><br>
Chaque SGBD implÃ©mente sa propre syntaxe du SQL en plus des normes communes Ã  tous.<br>
Vous vous demandez sÃ»rement pourquoi il existe diffÃ©rents SGBD et comment en choisir un plutÃ´t quâ€™un autre.<br>
Câ€™est exactement ce que je vais vous expliquer dans la suite de ce chapitre.<br><br>

<h3>DÃ©couvrez les diffÃ©rents SGBD</h3>
<ul>
  <li><strong>MySQL</strong><br>
  <strong><a href="https://www.mysql.com/fr/" target="_blank">MySQL</a> est le plus connu des SGBD</strong> .<br>
  Câ€™est le plus utilisÃ©, car il Ã©tait (auparavant) open-source (ce qui veut dire que son code et son utilisation Ã©taient gratuits).<br>
  Jâ€™insiste sur le â€œauparavantâ€, car MySQL a depuis Ã©tÃ© rachetÃ© par Oracle Corporation, et nâ€™est plus open-source.<br>
  NÃ©anmoins, il en existe une â€œcopieâ€ open-source appelÃ©e MariaDB, qui suit les mÃªmes rÃ¨gles de langage que MySQL (et que je vous recommande).<br>
  MySQL est surtout connu pour Ãªtre le SGBD utilisÃ© par les sites WordPress, ce qui a fait grandement augmenter sa popularitÃ©.<br>
  MalgrÃ© cette popularitÃ©, câ€™est un peu la â€œtÃªte de muleâ€ des SGBD.<br>
  Il ne suit pas rigoureusement la syntaxe prÃ©conisÃ©e par le SQL.<br>
  Il est aussi parfois trop â€œpermissifâ€ sur les requÃªtes SQL, provoquant des erreurs.<br>
  Mais câ€™est un SGBD robuste, qui fonctionne trÃ¨s bien, mÃªme sur de grandes quantitÃ©s de donnÃ©es !<br>
  Par exemple, câ€™Ã©tait pendant longtemps le seul SGBD utilisÃ© par Facebook.
  </li><br>
  <li><strong>Oracle Database</strong><br>
    <strong><a href="https://www.oracle.com/fr/database/" target="_blank">Oracle</a> est le SGBD Ã©ditÃ© par Oracle Corporation</strong> .<br>
    Câ€™est trÃ¨s cher, mais utile pour traiter un trÃ¨s gros volume de donnÃ©es.<br>
    Du coup, ce sont presque exclusivement les grandes entreprises qui lâ€™utilisent.<br>
    Mais mÃªme en entreprise (il est par exemple utilisÃ© par Samsung), Oracle tend Ã  se faire rattraper par les SGBD open-source type MariaDB ou PostgreSQL.<br>
    Il est en rÃ©elle perte de vitesse sur le marchÃ©.
  </li><br>
  <li><strong>PostgreSQL</strong><br>
    <strong><a href="https://www.postgresql.org/" target="_blank">PostgreSQL</a> est â€œlâ€™autreâ€ grand SGBD open-source disponible sur le marchÃ©.</strong> .<br>
    Moins utilisÃ© que MySQL car longtemps confinÃ© au monde linuxien (systÃ¨me dâ€™exploitation Linux), et plus obscur aux yeux des dÃ©butants.<br>
    Mais câ€™est en train de changer car câ€™est le SGBD qui suit le plus les recommandations du SQL, ainsi que le plus rapide (ces derniÃ¨res annÃ©es).<br>
    Il est notamment utilisÃ© par Instagram ou par Spotify.
  </li><br>
  <li><strong>SQLite</strong><br>
    <strong><a href="https://www.sqlite.org/index.html" target="_blank">SQLite</a> câ€™est le â€œpetit frÃ¨reâ€. Mais petit ne veut pas dire moins puissant, bien au contraire.</strong> .<br>
    Ã€ lâ€™instar des autres SGBD, SQLite stocke toute la base de donnÃ©es dans un seul et unique fichier.<br>
    Peu propice Ã  lâ€™utilisation sur un grand nombre de donnÃ©es, câ€™est un SGBD trÃ¨s simple Ã  configurer et qui â€œne prend pas la tÃªteâ€.<br>
    Câ€™est dâ€™ailleurs le SGBD quâ€™on utilise quand on dÃ©veloppe une base de donnÃ©es â€œen localâ€ (sur son ordinateur), alors quâ€™une fois â€œen productionâ€ (sur un serveur spÃ©cifique gÃ©nÃ©ralement utilisÃ© par votre entreprise ou vos clients), on va utiliser MySQL ou PostgreSQL.<br>
    Câ€™est aussi le SGBD utilisÃ© par vos applications Android (par exemple pour vos films Netflix en mode hors-connexion) pour stocker de la donnÃ©e !
  </li><br>
</ul>
Pour vous aider, voici un tableau rÃ©capitulatif des forces et faiblesses de chaque SGBD :<br>
<table>
  <tr>
      <th></th>
      <th>MySQL</th>
      <th>Oracle Database</th>
      <th>PostgreSQL</th>
      <th>SQLite</th>
  </tr>
  <tr>
      <td>PopularitÃ©</td>
      <td>trÃ¨s rÃ©pandu</td>
      <td>UtilisÃ© par les grands groupes<br> ayant un grand nombre de donnÃ©es</td>
      <td>moins rÃ©pandu que les autres</td>
      <td>rÃ©pandu pour le prototypage</td>
  </tr>
  <tr>
      <td>Prix</td>
      <td>gratuit (licence fermÃ©e)</td>
      <td>trÃ¨s cher (licence fermÃ©e)</td>
      <td>gratuit (open-source)</td>
      <td>gratuit (open-source)</td>
  </tr>
  <tr>
    <td>SimilaritÃ© avec le langage SQL</td>
    <td>ne suit pas toujours la syntaxe SQL</td>
    <td>ne suit pas toujours la syntaxe SQL</td>
    <td>suit la syntaxe SQL de trÃ¨s prÃ¨s</td>
    <td>suit la syntaxe SQL de trÃ¨s prÃ¨s</td>
  </tr>
  <tr>
    <td>Entreprises utilisatrices</td>
    <td>utilisÃ© par Facebook</td>
    <td>utilisÃ© par Samsung</td>
    <td>utilisÃ© par Spotify</td>
    <td>utilisÃ© pour les apps Android</td>
  </tr>
</table><br>
<h3>En rÃ©sumÃ©</h3>
<ul>
  <li>Le langage SQL sert Ã  communiquer entre votre application et votre base de donnÃ©es.<br>
    Mais câ€™est le SGBD qui rÃ©cupÃ¨re la commande en SQL pour en sortir de la donnÃ©e depuis la base.</li><br>
  <li>MySQL est un systÃ¨me de gestion de bases de donnÃ©es (SGBD).<br>
    Câ€™est mÃªme le plus rÃ©pandu sur le marchÃ©.</li><br>
</ul>

  <h5><a href="#sommaire">Sommaire</a></h5>

  <h2 id="MySQL_install">1.2 - Installez le SGBD MySQL -</h2>

  <h3>Installez MySQL sur Windows</h3>
  <h4>1.TÃ©lÃ©chargez le programme dâ€™installation de MySQL et lancez-le</h4>
  Rendez-vous sur <a href="https://dev.mysql.com/downloads/installer/" target="_blank">https://dev.mysql.com/downloads/installer/</a> et sÃ©lectionnez le programme dâ€™installation Ã  tÃ©lÃ©charger.<br>
  <div class="remarque">
    Je vous conseille de tÃ©lÃ©charger le deuxiÃ¨me programme (la version â€œcommunityâ€),<br>
     qui dispose dâ€™options supplÃ©mentaires par rapport au premier (la version â€œwebâ€).
  </div><br>
  <figure>
    <img src="media/4_MySQL_install.png" alt="">
    <figcaption>Ã‰cran d'installation MySQL</figcaption>
  </figure><br>
  Une fois le programme tÃ©lÃ©chargÃ©, lancez-le en double-cliquant dessus ; vous devriez arriver sur cette fenÃªtre :<br>
  <figure>
    <img src="media/5_MySQL_install_2.png" alt="">
    <figcaption>FenÃªtre d'acceptation des conditions gÃ©nÃ©rales</figcaption>
  </figure><br>
  Sur lâ€™Ã©cran suivant, on vous demandera de faire un choix.<br>
   SÃ©lectionnez â€œDeveloper Defaultâ€ pour installer MySQL dans son entiÃ¨retÃ©.<br>
   <figure>
    <img src="media/6_MySQL_install_3.png" alt="">
    <figcaption>SÃ©lection du paramÃ©trage par dÃ©faut</figcaption>
  </figure><br>
  <div class="remarque">
    Les autres options sont utiles si vous utilisez MySQL via un outil externe,<br>
    ou que vous avez dÃ©jÃ  votre base de donnÃ©es.<br>
    Cliquez ensuite sur Suivant.
  </div><br>
  Une fois arrivÃ© sur la derniÃ¨re Ã©tape, validez et câ€™est bon, MySQL est installÃ© sur votre machine !<br>
  Il nous reste maintenant Ã  le lancer.

  <h4>2.Lancez MySQL sur votre ordinateur</h4>
  Pour lancer MySQL sur Windows, double-cliquez sur la console MySQL.<br>
  Celle-ci doit avoir apparu dans vos programmes, suite Ã  lâ€™installation prÃ©cÃ©dente.<br>
  Une fois celle-ci lancÃ©e, vous vous retrouvez dans un terminal.<br>
  Câ€™est ici que vous allez pouvoir gÃ©rer votre future base de donnÃ©es.

  <h4>3.CrÃ©ez le mot de passe de lâ€™utilisateur root de votre BDD</h4>
  Avant de pouvoir lancer MySQL, il vous faut crÃ©er un utilisateur dit root, qui sera lâ€™utilisateur nous permettant de manipuler notre BDD.<br>
  <p>En informatique, et notamment dans le monde des bases de donnÃ©es, lâ€™utilisateur dit â€œrootâ€ (ou racine) est un utilisateur qui a tous les droits (crÃ©ation, suppression, mise Ã  jour).<br>
     Câ€™est celui quâ€™on utilise pour installer des logiciels sur notre machine.<br>
      Mais attention Ã  ne jamais lâ€™utiliser en production !<br>
    En effet, il serait trÃ¨s dangereux quâ€™un utilisateur puisse lâ€™utiliser, car il obtiendrait lâ€™accÃ¨s Ã  toutes nos donnÃ©es.</p>
    <div class="remarque">
      â€œUtiliser en productionâ€ dÃ©signe lâ€™utilisation de votre base par votre application, depuis un serveur.<br>
      Alors que â€œlâ€™utilisation en localâ€ signifie lâ€™utilisation sur votre ordinateur, Ã  des fins de dÃ©veloppement uniquement.
    </div><br>
    Pour crÃ©er le mot de passe â€œrootâ€, utilisez la commande  <strong><u>mysqladmin -u root password 'votresupermotdepassetrescomplique'</u></strong>   (vous lâ€™aurez compris, remplacez le mot de passe par celui que vous aurez choisi).<br>
    Vous pouvez vous fÃ©liciter, vous venez dâ€™installer MySQL sur votre Windows !

    <h3>Installez MySQL sur Mac</h3>
    La maniÃ¨re la plus simple et efficace pour installer MySQL sur Mac est de passer par Homebrew.
    <h4>1.Installez le gestionnaire Homebrew</h4>
    Homebrew est un gestionnaire de paquets.<br>
    Câ€™est un petit programme que vous pouvez utiliser dans votre terminal pour installer toutes sortes de choses.<br>
    Câ€™est le gestionnaire open-source le plus rÃ©pandu sur Mac.<br>
    TrÃ¨s polyvalent, il va vous permettre dâ€™installer MySQL sur votre machine.<br>
    Mais il peut aussi vous permettre dâ€™installer toutes sortes de programmes, allant de navigateurs comme Google Chrome Ã  des langages de programmation comme Python !<br><br>
    Pour installer Homebrew, rendez-vous sur le site web de Homebrew : <a href="https://brew.sh/index_fr" target="_blank">https://brew.sh/index_fr</a><br>
    <figure>
      <img src="media/7_homebrew.png" alt="">
      <figcaption>La page dâ€™accueil de Homebrew</figcaption>
    </figure><br>
    <ul>
      <li>Ouvrez votre terminal (jâ€™utilise iTerm2, disponible ici : <a href="https://iterm2.com/" target="_blank">https://www.iterm2.com/</a>; mais vous pouvez utiliser le terminal natif de votre Mac). </li><br>
      <li>Copiez-collez la ligne de commande disponible sur le site dans votre terminal et appuyez sur â€œenterâ€.<br>
        Ã€ lâ€™heure actuelle, cette ligne de commande est :<br>
        <strong><u>/bin/bash -c "$(curl -<br>
        fsSL <a href="https://raw.githubusercontent.com/Homebrew/install/master/install.sh" target="_blank">https://raw.githubusercontent.com/Homebrew/install/master/install.sh)â€</a></u></strong> <br>
        <figure>
          <img src="media/7_bin_bash.png" alt="">
          <figcaption>La commande dans votre terminal</figcaption>
        </figure>
       </li><br>
    </ul>
    Lâ€™installation de Homebrew devrait se lancer.<br>
    Une fois celle-ci terminÃ©e, vous pouvez vÃ©rifier que lâ€™installation sâ€™est bien dÃ©roulÃ©e en tapant  <strong><u>brew help</u></strong>  .<br>
    Vous devriez voir ceci apparaÃ®tre sur votre terminal :<br>
    <figure>
      <img src="media/9_brewhelp.png" alt="">
      <figcaption>DonnÃ©es affichÃ©es dans votre terminal</figcaption>
    </figure><br>
    Lâ€™Ã©cran liste les commandes disponibles via Homebrew.<br>
    <div class="remarque">
      Si ce nâ€™est pas le cas, tentez de rÃ©installer Homebrew.<br>
      Soyez sÃ»r dâ€™avoir une connexion Internet fiable, et que votre compte utilisateur a les privilÃ¨ges administrateur.
    </div><br>
    <h4>2.Installez MySQL via Homebrew</h4>
    Maintenant que Homebrew est installÃ©, il est temps dâ€™installer MySQL !<br>
    Pour ce faire, rien de plus simple : utilisez la commande dâ€™installation de Homebrew : <br>
    <strong><u>brew install [le nom de ce quâ€™on souhaite installer]</u></strong> <br>
    <div class="remarque">
      La commande complÃ¨te pour installer MySQL est donc  <strong><u>brew install mysql</u></strong>.<br>
      Appuyez sur <span class="keyboard">enter</span> pour la valider.
    </div><br>
    Vous venez dâ€™installer MySQL, mais il vous faut encore le dÃ©marrer !<br>
    Ne dÃ©sespÃ©rez pas, câ€™est encore une fois trÃ¨s simple, et tout se fait via Homebrew.
    <h4>3.DÃ©marrez MySQL avec Homebrew</h4>
    Pour que Homebrew puisse dÃ©marrer des processus (ici, celui de MySQL), utilisez la commande  <strong><u>brew tap homebrew/services</u></strong> .<br>
    Une fois cette commande effectuÃ©e, dÃ©marrez MySQL grÃ¢ce Ã  la commande  <strong><u>brew services start mysql</u></strong>  .<br>
    Pour vÃ©rifier que le processus de MySQL est bien lancÃ©, utilisez <strong><u>brew services list</u></strong>.<br>
    Si vous voyez apparaÃ®tre MySQL dans la liste, câ€™est que tout sâ€™est bien passÃ© !<br>
    Vous pouvez mÃªme le vÃ©rifier doublement en tapant la commande  <strong><u>mysql -V</u></strong>  qui vous permet de regarder quelle version de MySQL est actuellement en train de tourner sur votre machine (dans mon cas, la version 8.0.21).<br>
    <figure>
      <img src="media/10_MySQL_mac_install.png" alt="">
      <figcaption>Ã‰cran confirmant lâ€™installation de Homebrew</figcaption>
    </figure><br>
    <h4>4.CrÃ©ez le mot de passe de lâ€™utilisateur root de votre BDD</h4>
    Il vous reste une ultime commande et le tour est jouÃ© !<br>
    Câ€™est celle qui vous permet de crÃ©er le mot de passe de lâ€™utilisateur â€œrootâ€.<br>
    <p>En informatique, et notamment dans le monde des bases de donnÃ©es, lâ€™utilisateur dit â€œrootâ€ (ou racine) est un utilisateur qui a tous les droits (crÃ©ation, suppression, mise Ã  jour).<br>
      Câ€™est celui quâ€™on utilise pour installer des logiciels sur notre machine.<br>
       Mais attention Ã  ne jamais lâ€™utiliser en production !<br>
     En effet, il serait trÃ¨s dangereux quâ€™un utilisateur puisse lâ€™utiliser, car il obtiendrait lâ€™accÃ¨s Ã  toutes nos donnÃ©es.</p>
     <div class="remarque">
       â€œUtiliser en productionâ€ dÃ©signe lâ€™utilisation de votre base par votre application, depuis un serveur.<br>
       Alors que â€œlâ€™utilisation en localâ€ signifie lâ€™utilisation sur votre ordinateur, Ã  des fins de dÃ©veloppement uniquement.
     </div><br>
     Pour crÃ©er le mot de passe â€œrootâ€, utilisez la commande  <strong><u>mysqladmin -u root password 'votresupermotdepassetrescomplique'</u></strong>   (vous lâ€™aurez compris, remplacez le mot de passe par celui que vous aurez choisi).<br>
     <figure>
      <img src="media/11_MySQL_root_user.png" alt="">
      <figcaption>La commande dans votre terminal</figcaption>
    </figure><br>
     Vous pouvez vous fÃ©liciter, vous venez dâ€™installer MySQL sur votre Mac !

     <h3>Installez MySQL sur Linux (Ubuntu)</h3>
     La maniÃ¨re la plus simple et efficace pour installer MySQL sur Linux est de passer par le terminal.<br>
     Le terminal, câ€™est un programme qui vous permet de lancer des commandes de programmation (vous savez, le fameux Ã©cran avec du texte bizarre comme dans Matrix).<br>
     Il se trouve dans vos programmes (il est installÃ© par dÃ©faut sur Linux).<br>
     <h4>1.Installez MySQL via le terminal</h4>
     Sur Linux, la vie est trÃ¨s simple car vous disposez dâ€™un super gestionnaire de paquets : APT.<br>
     Câ€™est un petit programme que vous pouvez utiliser dans votre terminal pour installer toutes sortes de choses.<br>
     TrÃ¨s polyvalent, il va vous permettre dâ€™installer MySQL sur votre machine.<br>
     Mais il peut aussi vous permettre dâ€™installer toutes sortes de programmes, comme par exemple des langages de programmation comme Python !<br><br>
     Commencez par mettre Ã  jour APT en tapant dans votre terminal la commande  <strong><u>sudo apt update</u></strong>  .<br>
     Appuyez sur <span class="keyboard">enter</span> pour la valider.<br>
     Une fois cette commande effectuÃ©e, installez MySQL en tapant la commande<br>
     <strong><u>sudo apt install mysql-community-server</u></strong>.<br>
     MySQL est  maintenant installÃ© sur votre machine, il reste Ã  le dÃ©marrer et le configurer.
     <h4>2.DÃ©marrez MySQL avec le terminal</h4>
     Pour dÃ©marrer MySQL, il vous faut lancer le â€œserviceâ€ de MySQL.<br>
     Câ€™est-Ã -dire faire comprendre Ã  votre ordinateur quâ€™il doit lancer MySQL et le laisser tourner.<br>
      Pour ce faire, entrez la commande <strong><u>sudo service mysql start</u></strong> dans votre terminal.<br>
    MySQL tourne (enfin ğŸ™ŒğŸ¼), mais il vous reste Ã  le configurer.
    <h4>3.CrÃ©ez le mot de passe de lâ€™utilisateur root de votre BDD</h4>
    Il vous reste une ultime commande et le tour est jouÃ© !<br>
    Câ€™est celle qui vous permet de crÃ©er le mot de passe de lâ€™utilisateur â€œrootâ€.<br>
    <p>En informatique, et notamment dans le monde des bases de donnÃ©es, lâ€™utilisateur dit â€œrootâ€ (ou racine) est un utilisateur qui a tous les droits (crÃ©ation, suppression, mise Ã  jour).<br>
      Câ€™est celui quâ€™on utilise pour installer des logiciels sur notre machine.<br>
       Mais attention Ã  ne jamais lâ€™utiliser en production !<br>
     En effet, il serait trÃ¨s dangereux quâ€™un utilisateur puisse lâ€™utiliser, car il obtiendrait lâ€™accÃ¨s Ã  toutes nos donnÃ©es.</p>
     <div class="remarque">
       â€œUtiliser en productionâ€ dÃ©signe lâ€™utilisation de votre base par votre application, depuis un serveur.<br>
       Alors que â€œlâ€™utilisation en localâ€ signifie lâ€™utilisation sur votre ordinateur, Ã  des fins de dÃ©veloppement uniquement.
     </div><br>
     Pour crÃ©er le mot de passe â€œrootâ€, utilisez la commande  <strong><u>mysqladmin -u root password 'votresupermotdepassetrescomplique'</u></strong>   (vous lâ€™aurez compris, remplacez le mot de passe par celui que vous aurez choisi).<br>
     <figure>
      <img src="media/12_MySQL_root_user.png" alt="">
      <figcaption>La commande dans votre terminal</figcaption>
    </figure><br>
     Vous pouvez vous fÃ©liciter, vous venez dâ€™installer MySQL sur votre Linux !
    <h3>En rÃ©sumÃ©</h3>
    La premiÃ¨re chose Ã  faire pour utiliser un SGBD est de crÃ©er un utilisateur â€œrootâ€, qui aura tous les droits pour crÃ©er et modifier des bases de donnÃ©es.

    <h5><a href="#sommaire">Sommaire</a></h5>

    <h2 id="bdd">1.3 - CrÃ©ez votre base de donnÃ©es (BDD) -</h2> 

    <h3>CrÃ©ez votre BDD avec CREATE DATABASE</h3>
    Une application, câ€™est le code informatique qui vous permet dâ€™effectuer des actions.<br>
    Par exemple, commander un taxi ou Ã©crire du texte.<br>
    Or, cette application a besoin de donnÃ©es pour exister, donnÃ©es quâ€™elle va piocher dans une BDD.<br><br>
    <div class="remarque">
      Prenez Le Bon Coin : le code de lâ€™application vous permet de voir des listes dâ€™objets Ã  acheter prÃ¨s de chez vous, de contacter leur propriÃ©taire, etc.<br>
      Mais pour connaÃ®tre ces objets, numÃ©ros de tÃ©lÃ©phone, adresses, Le Bon Coin a dÃ» aller les chercher dans une base de donnÃ©es (probablement MySQL ğŸ˜‰).
    </div><br><br>
    CrÃ©ons la base qui contiendra nos objets.
    <ul>
      <li>Dans une BDD, on stocke plusieurs choses.<br>
         Et mÃªme un peu ce quâ€™on veut. Un objet, câ€™est chacune de ces â€œchosesâ€.<br>
         Imaginons que vous soyez au marchÃ©. Un objet, câ€™est une volaille, un fruit, etc.
        </li><br>
        <li>
          Si on reprend notre exemple de lâ€™application Foodly, une pomme ou une poire sont chacune une instance dâ€™un objet â€œfruitâ€.
        </li><br>
    </ul>
    Chaque application est associÃ©e Ã  une base de donnÃ©es.<br>
    Foodly Ã©tant une seule et unique application, nous allons crÃ©er une seule BDD.<br>
    Base quâ€™on va tout naturellement appelerâ€¦ Foodly. <br><br>
    <div class="remarque">
      Une application complexe peut Ãªtre reliÃ©e Ã  plusieurs BDD Ã  la fois, et ce, pour plusieurs raisons.<br>
      Par exemple, Facebook utilise plusieurs BDD pour des besoins spÃ©cifiques (certaines gÃ¨rent mieux la recherche, les autres le stockageâ€¦),<br>
      mais surtout pour des raisons de taille de la donnÃ©e !<br>
      Vous vous doutez quâ€™avec plus dâ€™un milliard dâ€™utilisateurs, il leur faut plusieurs bases.
    </div><br>
    <div class="important">
      Attention lorsquâ€™on nomme les bases de donnÃ©es !<br>
      Tout comme beaucoup de â€œnomsâ€ en informatique (variables, objets, identifiantsâ€¦), ceux-ci ne doivent pas contenir de caractÃ¨res spÃ©ciaux ou dâ€™espaces.<br>
      Il est mÃªme recommandÃ© de nâ€™utiliser que des caractÃ¨res minuscules.
    </div><br><br>
    Pour activer MySQL dans votre terminal, il va falloir exÃ©cuter la commande<br>
     <strong><u>mysql -u root -p</u></strong> .<br>
     Cette commande signale que vous souhaitez lancer MySQL, avec lâ€™utilisateur root en saisissant le mot de passe (vous vous en souvenez ? Nous en avons parlÃ© prÃ©cÃ©demment).<br>
     Justement, MySQL nous demande ledit mot de passe.<br>
     Entrez celui que vous avez crÃ©Ã© prÃ©cÃ©demment, et le tour est jouÃ© !<br><br>
     <figure>
      <img src="media/13_MySQL_start.png" alt="">
      <figcaption>Ã‰cran du terminal suite Ã  lâ€™entrÃ©e de votre mot de passe</figcaption>
    </figure><br><br>
    Pour crÃ©er une base, on utilise la commande  <strong><u>CREATE DATABASE nomdelabase;</u></strong>  .<br>
    Pour crÃ©er la base de Foodly, la commande Ã  taper devient  <strong><u>CREATE DATABASE foodly;</u></strong>.<br>
    <figure>
      <img src="media/14_MySQL_create_database.png" alt="">
      <figcaption>Ã‰cran du terminal aprÃ¨s avoir saisi la commande</figcaption>
    </figure><br><br>
<div class="remarque">
  SQL vous indique que la commande a fonctionnÃ© en rÃ©pondantQuery OK .
</div><br><br>
Il reste nÃ©anmoins un problÃ¨me : MySQL ne sait pas que vous souhaitez spÃ©cifiquement utiliser cette base de donnÃ©es.<br>
Car vous pourriez en avoir plusieurs !<br>
Imaginez que vous travailliez sur plusieurs projets Ã  la fois, vous pourriez trÃ¨s bien avoir une base de donnÃ©es pour chacun.<br>
Pour sÃ©lectionner la base que vous venez de crÃ©er, utilisez la commande  <strong><u>USE nomdelabase;</u></strong>  , qui devient doncâ€¦  <strong><u>USE foodly;</u></strong> 
<figure>
  <img src="media/14_MySQL_create_database.png" alt="">
  <figcaption>Ã‰cran du terminal pour lâ€™utilisation de la BDD</figcaption>
</figure><br><br>
Une fois  <strong><u>USE foodly;</u></strong>   exÃ©cutÃ©e, Ã§a y est, la base Foodly est sÃ©lectionnÃ©e et vous travaillez uniquement dans cette derniÃ¨re.<br><br>
<div class="important">
  Si jamais vous aviez besoin de changer de base de donnÃ©es, alors vous devriez rÃ©pÃ©ter cette commande pour passer sur la nouvelle base.
</div><br><br>
<video src="media/1_creation_database.mp4" controls width="800"></video><br/><br/>

<h3>Testez lâ€™activation de votre BDD avec SHOW TABLES</h3>
Pour tester lâ€™activation de votre base de donnÃ©es, vous allez y insÃ©rer votre premier objet.<br>
Dans son Ã©tat actuel, votre base vide ne vous sert pas Ã  grand-chose...
<h4>DÃ©finissez les types de donnÃ©es</h4>
Avant de pouvoir insÃ©rer quoi que ce soit, vous devez dâ€™abord crÃ©er une table.<br>
En effet, chaque â€œtableâ€ est lâ€™Ã©quivalent dâ€™une feuille de travail dans un logiciel type Excel ou Google Sheets, qui stocke toutes les occurrences dâ€™un objet en particulier.<br>
Qui dit base de donnÃ©es dit type de donnÃ©es.<br>
MySQL doit savoir quelle forme auront vos objets avant de vous laisser les manipuler dans chaque table.<br>
Câ€™est lâ€™Ã©quivalent en SQL de la modÃ©lisation de bases de donnÃ©es oÃ¹ vous devez dÃ©clarer les objets que vous souhaitez stocker et ce quâ€™ils vont contenir.<br><br>
<div class="remarque">
  Le type de donnÃ©e est comme un papier d'identitÃ©.<br>
  Il est commun Ã  toutes les personnes dâ€™un pays et permet de les identifier selon des critÃ¨res prÃ©cis.<br>
  Le modÃ¨le de donnÃ©es, câ€™est pareil, mais pour chaque objet de la base de donnÃ©es.
</div><br><br>
Quand on parle de type en base de donnÃ©es, on peut parler de deux types :
<ul>
  <li><strong>Les types dâ€™objets, catÃ©gorisÃ©s par leur nom.</strong><br>
    Par exemple, vous avez ici deux objets dont les noms sont utilisateur et aliment.<br>
    La convention veut quâ€™on utilise des noms en minuscules et au singulier.
  </li><br>
  <li><strong>Les types de champs</strong><br>
    dont on va parler juste aprÃ¨s.
  </li><br>
</ul><br><br>
Je vous propose de copier-coller cette commande pour crÃ©er la table des utilisateurs.<br>
Je vais ensuite vous lâ€™expliquer, ne vous en faites pas.<br>
<div class="code">
  CREATE TABLE utilisateur (<br>
  <br>
  id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,<br>
  <br>
  nom VARCHAR(100),<br>
  <br>
  prenom VARCHAR(100),<br>
  <br>
  email VARCHAR(255) NOT NULL UNIQUE<br>
  <br>
  );<br>
</div><br>
On obtient bien  <strong><u>Query OK</u></strong>, donc tout sâ€™est bien passÃ©.<br>
<strong>Votre objet utilisateur va Ãªtre composÃ© de plusieurs caractÃ©ristiques, aussi appelÃ©es champs</strong>.<br>
 Tout comme votre passeport qui recense votre nom ou votre Ã¢ge, eh bien, pour vos utilisateurs, on va faire de mÃªme.<br>
Chacun de ces champs doit avoir un type, pour que MySQL comprenne Ã  quoi â€œva ressemblerâ€ la donnÃ©e qui sera stockÃ©e dans ce champ.<br>
Par exemple, est-ce que le champ contiendra du texte, des chiffres, etc.
Ici, on dÃ©clare plusieurs champs qui seront partagÃ©s par tous les utilisateurs.<br>
Voici un tableau rÃ©capitulatif du schÃ©ma des utilisateurs :<br>

<table>
<tr>
      <th>Nom du champ</th>
      <th>Type du champ et options</th>
      <th>Description</th>
  </tr>
  <tr>
      <td><strong>id</strong></td>
      <td>PRIMARY KEY (option)</td>
      <td>Champ spÃ©cial <strong>obligatoire</strong> dans toutes les tables.<br>
        Indique Ã  MySQL que ce champ sera l'identifiant permettant d'identifier les objets.</td>
  </tr>
  <tr>
      <td></td>
      <td>INTEGER (type)</td>
      <td>Champ numÃ©rique sous forme de nombre entier.</td>
  </tr>
  <tr>
    <td></td>
    <td>NOT NULL (option)</td>
    <td>Ce champ ne peut pas Ãªtre nul.</td>
  </tr>
  <tr>
    <td></td>
    <td>AUTO_INCREMENT (option)</td>
    <td>Ce champ sera crÃ©Ã© par MySQL automatiquement, pas besoin de s'en soucier !<br>
      MySQL va utiliser l'id prÃ©cÃ©dent et y ajouter +1 lors de l'ajout d'un nouvel objet.</td>
  </tr>
  <tr>
    <td><strong>nom</strong></td>
    <td>VARCHAR(100) (type)</td>
    <td>Champ sous forme de texte,<br>
       limitÃ© Ã  100 caractÃ¨res.</td>
  </tr>
  <tr>
    <td><strong>prenom</strong></td>
    <td>VARCHAR(100) (type)</td>
    <td>Champ sous forme de texte,<br>
      limitÃ© Ã  100 caractÃ¨res.</td>
  </tr>
  <tr>
    <td><strong>email</strong></td>
    <td>VARCHAR(255) (type)</td>
    <td>Champ sous forme de texte,<br>
      limitÃ© Ã  255 caractÃ¨res.</td>
  </tr>
  <tr>
    <td><strong></strong></td>
    <td>NOT NULL (option)</td>
    <td>Ce champ ne peut pas Ãªtre nul.</td>
  </tr>
  <tr>
    <td><strong></strong></td>
    <td>UNIQUE (option)</td>
    <td>Ce champ ne peut pas avoir la mÃªme valeur en double.</td>
  </tr>
</table><br>
Une option dans un champ est un attribut optionnel qui va modifier le comportement de ce champ.<br>
Retrouvez sur le site de MySQL tous les types de champs disponibles sur le <a href="https://dev.mysql.com/doc/refman/8.0/en/data-types.html" target="_blank">SGBD</a> (en anglais).<br><br>
Au tour des aliments !<br>
Copiez-collez cette commande pour crÃ©er leur table.<br><br>
<div class="code">
  CREATE TABLE aliment (<br>
  <br>
id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,<br>
<br>
nom VARCHAR(100) NOT NULL,<br>
<br>
marque VARCHAR(100),<br>
<br>
sucre FLOAT,<br>
<br>
calories INTEGER NOT NULL,<br>
<br>
graisses FLOAT,<br>
<br>
proteines FLOAT,<br>
<br>
bio BOOLEAN DEFAULT false<br>
<br>
);<br>
</div><br><br>
<ul>
  <li><strong><u>FLOAT</u></strong><br>
    signifie que le champ contiendra des chiffres dÃ©cimaux ;
  </li><br>
  <li><strong><u>BOOLEAN</u></strong><br>
    est un type de champ trÃ¨s connu en informatique.<br>
    Il ne peut stocker que les valeurs  <strong><u>true</u></strong>   (vrai) ou  <strong><u>false</u></strong>   (faux) ;
  </li><br>
  <li><strong><u>DEFAULT</u></strong><br>
    sert Ã  indiquer une valeur par dÃ©faut.<br>
    Utile pour ne pas avoir Ã  spÃ©cifier une valeur tout le temps !<br>
    Ici, on indique que la valeur par dÃ©faut sera la valeur  <strong><u>false</u></strong>  .
  </li><br>
</ul><br>
Et pour les champs, câ€™est assez simple :
<ul>
  <li><strong>id</strong><br>
    l'identification de l'objet ;
  </li><br>
  <li><strong>nom</strong><br>le nom de lâ€™aliment (ex. : lait de soja) ;</li><br>
  <li><strong>marque</strong><br>sa marque (ex. : Bjorg) ;</li><br>
  <li><strong>sucre, calories, graisses, proteines</strong><br>la contenance de chaque Ã©lÃ©ment en grammes (ex. : â€œ2â€ pour 2 grammes) ;</li><br>
  <li><strong>bio</strong><br>si lâ€™aliment est bio ou non.</li><br>
</ul>
Voici un exemple de ce que donnerait cette table avec quelques aliments :<br>
<table>
  <tr>
      <th>id</th>
      <th>nom</th>
      <th>marque</th>
      <th>calories</th>
      <th>sucre</th>
      <th>graisses</th>
      <th>proteines</th>
      <th>bio</th>
  </tr>
  <tr>
      <td>1</td>
      <td>Pomme</td>
      <td>Monoprix</td>
      <td>65</td>
      <td>14,4</td>
      <td>0,4</td>
      <td>0,4</td>
      <td>FALSE</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Oeuf Bio</td>
    <td>Carrefour</td>
    <td>167</td>
    <td>0</td>
    <td>11,1</td>
    <td>14,2</td>
    <td>TRUE</td>
  </tr>
  <tr>
    <td>3</td>
    <td>Brique de lait</td>
    <td>IntermarchÃ©</td>
    <td>414</td>
    <td>43,2</td>
    <td>13,5</td>
    <td>28,8</td>
    <td>FALSE</td>
  </tr>
</table><br>
Pour vÃ©rifier que tout ce que vous avez fait fonctionne, rien de plus simple !<br>
On demande Ã  MySQL de nous afficher toutes les tables prÃ©sentes dans notre base grÃ¢ce Ã  la commande  <strong><u>SHOW tables;</u></strong>.<br>
<figure>
  <img src="media/15_MySQL_show_table.png" alt="">
  <figcaption>Ã‰cran du terminal aprÃ¨s avoir saisi la commande SHOW tables</figcaption>
</figure><br>
On peut mÃªme aller encore plus loin en demandant Ã  MySQL de nous afficher le schÃ©ma de chaque table grÃ¢ce Ã  la commande  <strong><u>SHOW COLUMNS FROM lenomdematable;</u></strong>.<br>
Pour lire le schÃ©ma de vos tables, il vous faut taper  <strong><u>SHOW COLUMNS FROM utilisateur;</u></strong><br>
   et  <strong><u>SHOW COLUMNS FROM aliment;</u></strong>.<br>
   Si vous obtenez le mÃªme rÃ©sultat que sur ces screenshots, câ€™est que vous avez tout bon !<br><br>
   <figure>
    <img src="media/16_MySQL_show_utilisateur.png" alt="">
    <figcaption></figcaption>
  </figure>
  <figure>
    <img src="media/17_MySQL_show_aliment.png" alt="">
    <figcaption>Affichage des schÃ©mas des tables utilisateur et aliment</figcaption>
  </figure><br>
  Vous avez saisi ces nouvelles commandes dans votre terminal ? VÃ©rifiez-les grÃ¢ce au screencast rÃ©capitulatif<br>
  <video src="media/2_verif_database.mp4" controls width="800"></video><br/><br/>

<div class="important">
Lors des parties suivantes, je vous demanderai parfois de tÃ©lÃ©charger un fichier afin de mettre votre BDD Ã  jour.<br>
Pour ce faire, jâ€™ai crÃ©Ã© un projet GitHub disponible ici : <a href="https://github.com/OpenClassrooms-Student-Center/Course-implementez-BDD-SQL" target="_blank">Github</a><br>
Ã€ chaque fois que vous souhaiterez mettre Ã  jour votre BDD :
<ul>
  <li>
    TÃ©lÃ©chargez le fichier correspondant depuis GitHub, chaque dossier sur GitHub reprÃ©sentant la partie du cours dans laquelle vous vous trouvez.
  </li><br>
  <li>
    Placez ce fichier dans le dossier correspondant Ã  votre utilisateur Windows, Mac ou Linux.
  </li><br>
  <li>
    Allez dans votre terminal, entrez la commande  <strong><u>mysql -u root -p nom_de_la_base_de_donnees < nom_du_fichier.sql</u></strong><br>
    puis tapez votre mot de passe root (que vous venez de crÃ©er dans cette partie !).<br>
    Prenez bien soin de remplacer â€œnom_de_la_base_de_donneesâ€ par le nom de la BDD que vous souhaitez mettre Ã  jour (par exemple, foodly)<br>
    et â€œnom_du_fichierâ€ par le nom du fichier tÃ©lÃ©chargÃ© (par exemple, foodly.sql).
  </li><br>
</ul>
</div><br>
Et voilÃ , votre BDD est Ã  jour !

<h3>En rÃ©sumÃ©</h3>
<ul>
  <li>Pour crÃ©er une base de donnÃ©es, on utilise la commande  <strong><u>CREATE DATABASE;</u></strong>  .</li><br>
  <li>Une table est un espace dans votre base de donnÃ©es qui va stocker des objets de mÃªme type. On la crÃ©e avec la commande  <strong><u>CREATE TABLE;</u></strong>  </li><br>
  <li>Pour vÃ©rifier la crÃ©ation des tables, on utilise la commande  <strong><u>SHOW COLUMNS FROM table;</u></strong>   qui permet de voir la structure de cette table.</li><br>
</ul>


<h5><a href="#sommaire">Sommaire</a></h5>

  <h2 id="BDD_data_insert">2.1 - InsÃ©rez des donnÃ©es dans votre BDD -</h2>
  <figure>
    <img src="media/18_CRUD.png" alt="">
    <figcaption>Lâ€™acronyme CRUD oÃ¹ MAJ signifie Mettre Ã€ Jour</figcaption>
  </figure><br>
  Commencez d'abord par tÃ©lÃ©charger la base de donnÃ©e <a href="https://github.com/OpenClassrooms-Student-Center/Course-implementez-BDD-SQL/blob/master/partie_2/foodly.sql" target=_blank">Foodly</a> de cette partie 2.

  <h3>InsÃ©rez des objets uniques pour alimenter votre BDD</h3>
  PremiÃ¨re Ã©tape : vous allez ajouter un utilisateur Ã  votre BDD, car une application sans utilisateurs nâ€™est pas une BDD.<br>
  Imaginez quâ€™un nouvel utilisateur sâ€™inscrive sur Foodly.<br>
  Comment lâ€™application ferait-elle pour inscrire cet utilisateur dans la base MySQL ?<br>
  <div class="remarque">
    Elle utiliserait la commande <strong><u>SQLINSERT INTO</u></strong>.<br>
    Cette commande prend en compte :
<ul>
  <li>les paramÃ¨tres de la table dans laquelle vous souhaitez ajouter lâ€™objet (ici la table â€œutilisateurâ€) ;</li><br>
  <li>lâ€™ordre des colonnes (ou caractÃ©ristiques de lâ€™objet) ;</li><br>
  <li>ainsi que les valeurs correspondantes pour lâ€™objet.</li><br>
</ul>
</div><br>
<img src="media/19_insert.png" alt="">
<figcaption>Insertion dâ€™un utilisateur dans la BDD de Foodly</figcaption>
</figure><br>
Souvenez-vous, votre table â€œutilisateurâ€ dispose de 4 champs :<br>
<table>
<tr>
      <th>Nom du champ</th>
      <th>Descriptif du champ</th>
      <th>Exemple de valeur</th>
  </tr>
  <tr>
      <td>id</td>
      <td>identifiant unique de l'utilisateur dans la BDD</td>
      <td>1</td>
  </tr>
  <tr>
      <td>nom</td>
      <td>nom de famille de l'utilisateur</td>
      <td>Durantay</td>
  </tr>
  <tr>
      <td>prenom</td>
      <td>prÃ©nom de l'utilisateur</td>
      <td>Quentin</td>
  </tr>
  <tr>
      <td>email</td>
      <td>email de l'utilisateur</td>
      <td>quentin@gmail.com</td>
  </tr>
</table><br>
<div class="remarque">
  Remarquez que je ne me prÃ©occupe pas de lâ€™id.<br>
  Je pourrais tout Ã  fait le renseigner.<br>
  Mais souvenez-vous, nous lâ€™avons configurÃ© de maniÃ¨re Ã  ce que MySQL lâ€™auto-incrÃ©mente pour nous.<br>
  Du coup, soyons fainÃ©ants et laissons MySQL gÃ©rer ce paramÃ¨tre pour nous !
</div><br><br>
Voici, par exemple, la commande pour mâ€™ajouter en tant quâ€™utilisateur dans la base :<br>
<div class="code">
  INSERT INTO `utilisateur` (`nom`, `prenom`, `email`)<br>
  <br>
VALUES<br>
<br>
('Durantay', 'Quentin', 'quentin@gmail.com');<br>
</div><br>
<div class="important">
  Si vous exÃ©cutez cette commande plusieurs fois, vous remarquerez  un message dâ€™erreur.<br>
  Câ€™est tout Ã  fait normal.<br>
   Souvenez-vous, lâ€™e-mail dâ€™un utilisateur a Ã©tÃ© configurÃ© dans le schÃ©ma de la table comme une valeur unique.<br>
  Vous ne pouvez donc pas crÃ©er un 2e utilisateur avec le mÃªme e-mail.
</div><br><br>
Voyons ensemble ce qui vient de se passer :
<ol>
  <li>On indique en SQL quâ€™on souhaite ajouter un objet avec <strong><u>INSERT INTO</u></strong>.</li><br>
  <li>On Ã©crit ensuite le nom de la table dans laquelle on souhaite ajouter lâ€™objet, ici <strong><u>'utilisateur'</u></strong>.</li><br>
  <li>On Ã©crit ensuite entre parenthÃ¨ses la liste des colonnes que lâ€™on va ajouter, ainsi que leur ordre.</li><br>
  <li>On ajoute le mot clÃ© SQL <strong><u>VALUES</u></strong> qui indique quâ€™on va ensuite dÃ©clarer les valeurs que lâ€™on souhaite ajouter.</li><br>
  <li>On Ã©crit la liste des valeurs de lâ€™objet quâ€™on souhaite ajouter, dans le mÃªme ordre que les colonnes citÃ©es en 3.</li><br>
</ol>

<h3>InsÃ©rez plusieurs objets Ã  la fois</h3>
Vous avez dÃ©sormais une application avec un utilisateur, mais il va vous en falloir plusieurs !<br>
Je ne sais pas vous, mais je trouve Ã§a fastidieux dâ€™avoir Ã  Ã©crire une commande pour chaque utilisateur que jâ€™ajoute.<br><br>
SQL a pensÃ© Ã  nous !<br>
Il est possible dâ€™ajouter plusieurs objets en une seule commande en sÃ©parant leurs valeurs par des virgules,<br>
comme dans la commande ci-dessous grÃ¢ce Ã  laquelle jâ€™ajoute 4 utilisateurs Ã  la BDD :<br>
<div class="code">
  INSERT INTO `utilisateur` (`nom`, `prenom`, `email`)<br>
  <br>
VALUES<br>
<br>
('Doe', 'John', 'john@yahoo.fr'),<br>
<br>
('Smith', 'Jane', 'jane@hotmail.com'),<br>
<br>
('Dupont', 'Sebastien', 'sebastien@orange.fr'),<br>
<br>
('Martin', 'Emilie', 'emilie@gmail.com');<br>
</div><br><br>
Dans les faits, vous allez user et abuser de cette commande pour ajouter diffÃ©rents objets dans votre base.<br>
RÃ©utilisons-la justement pour ajouter des aliments.<br><br>
Souvenez-vous, la table â€œalimentâ€ est constituÃ©e des colonnes suivantes :<br>
<table>
  <tr>
      <th>Nom du champ</th>
      <th>Descriptif du champ</th>
      <th>Exemple de valeur</th>
  </tr>
  <tr>
      <td>id</td>
      <td>identifiant unique de l'aliment dans la BDD</td>
      <td>1</td>
  </tr>
  <tr>
      <td>nom</td>
      <td>nom de l'aliment</td>
      <td>poire</td>
  </tr>
  <tr>
      <td>marque</td>
      <td>marque de l'aliment</td>
      <td>Monoprix</td>
  </tr>
  <tr>
      <td>calories</td>
      <td>nombre de calories contenues dans l'aliment (en kcal)</td>
      <td>72</td>
  </tr>
  <tr>
      <td>sucre</td>
      <td>la concentration en sucre de lâ€™aliment (en grammes)</td>
      <td>19,1</td>
  </tr>
  <tr>
      <td>graisses</td>
      <td>la concentration en graisses de lâ€™aliment (en grammes)</td>
      <td>0,2</td>
  </tr>
  <tr>
      <td>proteines</td>
      <td>la concentration en protÃ©ines de lâ€™aliment (en grammes)</td>
      <td>0,4</td>
  </tr>
</table><br>
Voici la commande pour ajouter les aliments poire, pomme, Å“uf et lait dâ€™amande Ã  notre BDD :<br>
<div class="code">
  INSERT INTO `aliment` (`nom`, `marque`, `sucre`, `calories`, `graisses`, `proteines`,`bio`)<br>
  <br>
VALUES<br>
<br>
('poire', 'monoprix', 27.5, 134, 0.2, 1.1, FALSE),<br>
<br>
('pomme', 'monoprix', 19.1, 72, 0.2, 0.4, FALSE),<br>
<br>
('oeuf', 'carrefour', 0.6, 82, 5.8, 6.9, FALSE),<br>
<br>
('lait d\'amande', 'bjorg', 4.5, 59, 3.9, 1.1, TRUE);<br>
</div><br>
<div class="remarque">
  Vous vous demandez sÃ»rement pourquoi certaines valeurs sont entre guillemets simples, dâ€™autres entre backticks (`) et certaines sans rien.
</div><br>
<figure>
  <img src="media/20_syntax_bdd.png" alt="">
  <figcaption>La rÃ©daction des valeurs selon leur type</figcaption>
</figure><br>
Les explications sont simples :
<ul>
  <li>Pour signaler Ã  SQL des noms de tables ou colonnes, utilisez des backticks.</li><br>
  <li>Pour les valeurs de type texte (souvenez-vous, les types <strong>TEXT</strong> ou <strong>VARCHAR</strong>), vous devez les Ã©crire entre guillemets.<br>
     Si un guillemet est prÃ©sent dans le texte (comme dans lâ€™exemple plus haut avec <strong><u>'lait d\'amande'</u></strong>), vous devez mettre un backslash (\) avant ce dernier pour dire Ã  SQL quâ€™il fait partie intÃ©grante de la valeur.</li><br>
  <li>Pour le reste (les valeurs de type <strong>BOOLEAN</strong>, <strong>INTEGER</strong> ou <strong>FLOAT</strong>), pas besoin de guillemets !</li><br>
</ul><br>
<h3>Ã€ vous de jouer !</h3>
Essayez maintenant de crÃ©er un nouvel aliment.<br>
Partons sur une boÃ®te de conserve de haricots verts.<br>
En voici les donnÃ©es nutritionnelles :<br>
<table>
  <tr>
      <th>nom</th>
      <th>marque</th>
      <th>calories</th>
      <th>sucre</th>
      <th>graisses</th>
      <th>proteines</th>
      <th>bio</th>
  </tr>
  <tr>
      <td>haricots verts</td>
      <td>Monoprix</td>
      <td>25</td>
      <td>3</td>
      <td>0</td>
      <td>1,7</td>
      <td>FALSE</td>
  </tr>
</table><br>
Ã€ partir de ce tableau, jâ€™aimerais que vous ajoutiez cet aliment dans la BDD de Foodly.<br>
Regardez bien comment nous nous y sommes pris jusquâ€™ici.<br>
<video src="media/3_insert_items_database.mp4" controls width="800"></video><br/><br/>
<h3>En rÃ©sumÃ©</h3>
<ul>
  <li>On ajoute un objet Ã  une table avec la commande <strong><u>INSERT INTO</u></strong>.</li><br>
  <li>Lors de lâ€™utilisation de cette commande, on mentionne quelles sont les colonnes (et dans quel ordre) que lâ€™on va remplir.<br>
     Et on les sÃ©pare par des virgules.</li><br>
  <li>On peut ajouter un ou plusieurs objets Ã  la fois, lÃ  aussi, en les sÃ©parant par des virgules.</li><br>
</ul>

<h5><a href="#sommaire">Sommaire</a></h5>

  <h2 id="BDD_data_select">2.2 - SÃ©lectionnez les donnÃ©es prÃ©sentes dans votre BDD -</h2> 

  <h3>Lisez les objets que vous venez de crÃ©er</h3>
  Vous venez dâ€™ajouter vos premiÃ¨res donnÃ©es dans votre BDD, câ€™est top !<br>
  Mais Ã  quoi cela servirait si vous ne pouvez pas les rÃ©cupÃ©rer par la suite ?<br><br>
  Reprenons lâ€™exemple de lâ€™application Foodly.<br>
  Lâ€™objectif des utilisateurs de cette application est de savoir quelle est la composition des aliments quâ€™ils envisagent dâ€™acheter.<br>
  Câ€™est bien beau dâ€™avoir une BDD, mais encore faut-il que lâ€™application puisse y lire les objets.<br><br>
  Câ€™est ce Ã  quoi on va sâ€™attaquer dans ce chapitre...<br>
  Nous allons voir ensemble les commandes qui vous permettent de rÃ©cupÃ©rer et lire la donnÃ©e contenue dans la base de Foodly.<br>
  CommenÃ§ons par une question simple : comment faire pour afficher tous les utilisateurs prÃ©sents dans votre BDD ?<br>
  Comme pour les commandes dâ€™insertion, vous allez devoir indiquer la table dans laquelle vous souhaitez rÃ©cupÃ©rer la donnÃ©e, ici â€œutilisateurâ€.<br><br>
  <div class="remarque">
    Le mot clÃ© pour rÃ©cupÃ©rer et lire de la donnÃ©e est <strong>SELECT</strong>.<br>
    En commenÃ§ant une commande SQL par ce mot, MySQL (et les autres SGBD) comprend que vous souhaitez sÃ©lectionner (et donc rÃ©cupÃ©rer) de la donnÃ©e.
  </div><br><br>
  Tapez cette commande dans votre terminal :<br>
  <div class="code">
    SELECT * FROM utilisateur;
  </div><br>
  <figure>
    <img src="media/21_select_table.png" alt="">
    <figcaption>Voici ce que vous devriez voir apparaÃ®tre aprÃ¨s avoir saisi la commande</figcaption>
  </figure><br>
  MySQL vous affiche la table â€œutilisateurâ€ sous forme de tableau rÃ©capitulatif, avec chaque objet sur sa propre ligne.<br><br>
  <figure>
    <img src="media/22_select_table_syntax.png" alt="">
    <figcaption>La commande SELECT</figcaption>
  </figure>
  DÃ©cortiquons ensemble la commande que nous venons dâ€™effectuer pour arriver Ã  ce rÃ©sultat :
  <ul>
    <li><strong>SELECT</strong><br>
      comme nous lâ€™avons vu, indique Ã  MySQL que nous souhaitons rÃ©cupÃ©rer de la donnÃ©e ;</li><br>
    <li><strong>*</strong> indique que lâ€™on souhaite rÃ©cupÃ©rer toutes les colonnes (ou champs) prÃ©sents dans cette table (ici : id, nom, prenom et email) ;</li><br>
    <li><strong>FROM</strong> table permet Ã  MySQL de comprendre depuis quelle table nous souhaitons rÃ©cupÃ©rer de la donnÃ©e.</li><br>
  </ul>
  <h3>Lisez quelques colonnes seulement</h3>
  Câ€™est super Ã§a, mais je suis rÃ©ellement obligÃ© de rÃ©cupÃ©rer toutes les colonnes Ã  chaque fois ?<br>
  Avant que je vous rÃ©ponde, tapez cette commande dans votre terminal :<br>
  <div class="code">
    SELECT `nom`, `prenom`, `email` FROM utilisateur;
  </div><br><br>
  Que remarquez-vous aprÃ¨s lâ€™avoir tapÃ©e ?<br>
  Eh oui, la colonne <strong><u>id</u></strong> nâ€™est plus visible dans le tableau rÃ©capitulatif !<br>
  <figure>
    <img src="media/23_select_table_syntax_col.png" alt="">
    <figcaption>Ã‰cran du terminal suite Ã  la commande saisie</figcaption>
  </figure><br>
  De la mÃªme maniÃ¨re quâ€™on prÃ©cisait les colonnes que lâ€™on souhaitait ajouter avec <strong><u>INSERT</u></strong>, on peut prÃ©ciser celles que lâ€™on veut que lâ€™application lise avec <strong><u>SELECT</u></strong>.<br>
  Pour cela, il suffit de mentionner les noms de colonnes que lâ€™on souhaite rÃ©cupÃ©rer aprÃ¨s le mot clÃ© <strong><u>SELECT</u></strong>, comme dans lâ€™exemple ci-dessus.
  <h3>Ã€ votre tour dâ€™essayer !</h3>
  Je vous propose de lister tous les noms et les calories associÃ©es pour chaque aliment prÃ©sent dans la BDD de Foodly.<br>
  Comment feriez-vous ?<br>
  <div class="code">
    SELECT `nom`,`calories` FROM aliment;
  </div><br>
  <video src="media/4_select_item_database.mp4" controls width="800"></video>
  <h3>En rÃ©sumÃ©</h3>
  <ul>
    <li>
      Les objets dâ€™une table se lisent avec la commande <strong><u>SELECT FROM</u></strong> .
    </li><br>
    <li>
      Lors de lâ€™utilisation de cette commande, on mentionne <strong>quelles sont les colonnes</strong> que lâ€™on veut afficher <strong>en les sÃ©parant par des virgules</strong>.
    </li><br>
  </ul>


  <h5><a href="#sommaire">Sommaire</a></h5>

  <h2 id="update_BDD">2.3 - Mettez Ã  jour les donnÃ©es de votre BDD -</h2>
  <h3>Mettez Ã  jour un objet en particulier</h3>
  Admettons maintenant quâ€™un utilisateur souhaite mettre Ã  jour son e-mail via lâ€™application.<br>
  Comment Foodly traduirait ceci en commande SQL pour MySQL ?<br>
  Ici, le mot clÃ© magique est <strong><u>UPDATE</u></strong>, qui signifie â€œmise Ã  jourâ€ en anglais.<br>
  Tapez cette commande dans votre terminal pour changer lâ€™e-mail du premier utilisateur :<br>
  <div class="code">
    UPDATE `utilisateur` SET `email` = 'quentind@gmail.com' WHERE `id` = '1';
  </div><br>
  Vous devriez avoir un message qui confirme ce changement.<br>
  Si vous lisez Ã  nouveau les donnÃ©es de votre BDD sur la table â€œutilisateurâ€,<br>
  vous remarquerez que lâ€™e-mail de lâ€™utilisateur avec lâ€™id 1 est celui quâ€™on vient de taper.<br><br>
  <figure>
    <img src="media/24_update_item_from_table.png" alt="">
    <figcaption>La commande UPDATE</figcaption>
  </figure><br>
  <table>
    <tr>
        <th>Mot clÃ©</th>
        <th>Description</th>
    </tr>
    <tr>
        <td><strong>UPDATE</strong> table</td>
        <td>Signifie Ã  SQL que vous souhaitez mettre Ã  jour de la donnÃ©e dans votre BDD.<br>
          Vous indiquez aussi la table dans laquelle se trouve(nt) le ou les objets que vous souhaitez modifier.</td>
    </tr>
    <tr>
        <td><strong>SET</strong> colonne = valeur</td>
        <td>Sert Ã  indiquer Ã  SQL quelles sont la ou les colonnes Ã  modifier,<br>
          et quelles sont la ou les valeurs quâ€™elles doivent dÃ©sormais prendre.</td>
    </tr>
    <tr>
        <td><strong>WHERE</strong> colonne = valeur</td>
        <td>Câ€™est ce quâ€™on appelle un filtre.<br>
          Vous allez les voir plus en dÃ©tail dans la partie 3, mais sachez quâ€™ils servent Ã  restreindre<br>
          la commande en cours Ã  un ou des objets rÃ©pondant Ã  des conditions prÃ©cises.<br>
          Ici, on va mettre Ã  jour uniquement lâ€™objet dont lâ€™id est 1, soit le premier utilisateur !</td>
    </tr>
  </table><br>
  <div class="remarque">
    Il est tout Ã  fait possible dâ€™utiliser  <strong><u>UPDATE</u></strong>  sans filtres (sans  <strong><u>WHERE </u></strong> ).<br>
    NÃ©anmoins, la commande modifierait tous les objets de notre table.<br>
     Câ€™est trÃ¨s rarement ce que lâ€™on souhaite.
  </div><br>
  <h3>Ã€ vous de jouer !</h3>
  Nous avons oubliÃ© de prÃ©ciser le type de pomme vendue Ã  IntermarchÃ©.<br>
  Il s'agit d'une pomme golden.<br>
  Comment feriez-vous pour rectifier le tir ?<br>
  <strong>Reponse</strong><br>
  <div class="code">
    UPDATE aliment SET `nom`= 'Pomme Golden' WHERE `id`= '2';
  </div><br>
  <video src="media/5_update_item_from_table.mp4" controls width="800"></video>

  <h3>En rÃ©sumÃ©</h3>
<ul>
  <li>On met Ã  jour les objets dâ€™une table avec la commande <strong><u>UPDATE</u></strong>.</li><br>
  <li>Lors de lâ€™utilisation de cette commande, on mentionne quelles sont les colonnes quâ€™on souhaite mettre Ã  jour avec <strong><u>SET</u></strong>.</li><br>
  <li>Si on ne filtre pas avec <strong><u>WHERE</u></strong>, on risque de <strong>mettre Ã  jour tous les objets</strong> de la table.<br>
     Ce qui est rarement ce que lâ€™on souhaite !</li><br>
</ul>


<h5><a href="#sommaire">Sommaire</a></h5>

  <h2 id="delete_BDD">2.4 - Supprimez des objets dans votre BDD -</h2> 

  <h3>Supprimez un objet en particulier</h3>
  Finissons par un dernier cas dâ€™usage.<br>
  Admettons quâ€™un utilisateur souhaite se dÃ©sinscrire de Foodly.<br>
  Il faudrait alors le supprimer de votre BDD.<br>
   Mais comment faire ?<br><br>
   <div class="remarque">
    Ici, le mot clÃ© est <strong><u>DELETE</u></strong>. Signifiant â€œsupprimerâ€ en anglais.
   </div><br>
   <div class="important">
    Attention toutefois, cette commande est trÃ¨s simple Ã  utiliser, parfois trop mÃªme !<br>
    Une fois la donnÃ©e supprimÃ©e de votre BDD, impossible de la rÃ©cupÃ©rer !<br>
    Ã€ utiliser avec parcimonie.
   </div><br>
   Voici par exemple la commande pour supprimer le deuxiÃ¨me utilisateur :<br>
   <div class="code">
    DELETE FROM `utilisateur` WHERE `id` = '2';
   </div><br>
   Une fois cette commande effectuÃ©e, vous pouvez vÃ©rifier quâ€™elle a fonctionnÃ© en listant les utilisateurs (commande <strong><u>SELECT</u></strong>).<br>
   <div class="important">
    LÃ  aussi, il vaut mieux utiliser cette commande avec <strong><u>WHERE</u></strong> pour en limiter lâ€™effet.<br>
     Si vous ne le faites pas, vous risqueriez de supprimer tous les objets dâ€™une table !<br>
     Dans notre cas, adieu Ã  nos utilisateurs.
   </div><br>
   <h3>Ã€ vous de jouer !</h3>
   Bon, on va dire quâ€™on sâ€™est complÃ¨tement trompÃ© pour notre pomme golden.<br>
   MÃªme en la modifiant prÃ©cÃ©demment dans la BDD de Foodly, les donnÃ©es sont complÃ¨tement fausses.<br>
   Comment feriez-vous pour la supprimer dÃ©finitivement de la BDD ?<br>
   Reprenez votre terminal et essayez de supprimer la pomme golden.<br>
   <strong>Reponse</strong><br>
   <div class="code">DELETE FROM aliment WHERE `id`='2'; </div><br>
   <video src="media/6_delete_item_from_table.mp4" controls width="800"></video><br/><br/>

   <h3>En rÃ©sumÃ©</h3>
   <ul>
     <li>On supprime les objets dâ€™une table avec la commande <strong><u>DELETE</u></strong>.</li><br>
     <li>Si on ne filtre pas avec <strong><u>WHERE</u></strong>, on risque de supprimer tous les objets de la table.<br>
      Ce qui est rarement ce que lâ€™on souhaite !</li><br>
    </ul>
    

    <h5><a href="#sommaire">Sommaire</a></h5>

    <h2 id="extract_data">3.1 - Extrayez des informations spÃ©cifiques de votre BDD -</h2>
    Vous allez apprendre dans cette partie comment extraire uniquement lâ€™information qui vous intÃ©resse, et en tirer quelques enseignements !<br>
    Avant tout, tÃ©lÃ©chargez la base de donnÃ©es <a href="https://github.com/OpenClassrooms-Student-Center/Course-implementez-BDD-SQL/tree/master/partie_3" target="_blank">Foodly</a> pour cette partie.
    <h3>Isolez un objet unique</h3>    
    Dans la partie prÃ©cÃ©dente, Ã  chaque fois que vous lisiez de la donnÃ©e, câ€™Ã©tait celle dâ€™une table toute entiÃ¨re.<br>
    <div class="remarque">
      Pour rappel, une commande telle que  <strong><u>SELECT * FROM aliment;</u></strong>   va vous afficher tous les aliments de votre BDD.
    </div><br>
    Imaginons un utilisateur dans votre application Foodly. Il est en train de scanner un aliment lors de ses courses.<br>
    Lâ€™application demandera Ã  la BDD de lui restituer lâ€™aliment en question.<br>
    Pour ce faire, il existe une commande en SQL que lâ€™application pourra utiliser pour rÃ©cupÃ©rer uniquement cet aliment.<br>
    <div class="important">
      Il sâ€™agit de la commande <strong><u>WHERE</u></strong>.
    </div><br>
    Par exemple, la commande :<br>
    <div class="code">
      SELECT * FROM aliment WHERE id = 4;
    </div><br>
    va nous restituer uniquement lâ€™aliment dont lâ€™<strong>id est le numÃ©ro 4</strong> !<br><br>
    <strong><strong><u>WHERE</u></strong>  ne se limite pas uniquement aux id.</strong><br>
    <div class="code">
      SELECT * FROM aliment WHERE nom = â€œpoireâ€;
    </div><br>
    va nous restituer uniquement lâ€™aliment dont le <strong>nom est 'poire'</strong> !<br><br>
    <div class="important">
      Vous pouvez appliquer  <strong><u>WHERE</u></strong>  Ã  nâ€™importe quelle colonne en utilisant le nom de cette colonne.
    </div><br>
    <div class="important">
      Ã€ noter que  <strong><u>WHERE</u></strong>  peut s'exÃ©cuter avec  <strong><u>SELECT</u></strong>  ,<br>
       mais aussi avec nâ€™importe quelle autre commande :<br>
       vous pouvez lâ€™utiliser avec  <strong><u>UPDATE</u></strong>  ou  <strong><u>DELETE</u></strong>  pour ne mettre Ã  jour ou supprimer quâ€™un objet spÃ©cifique, et non tous les objets de votre table !
    </div>
    <h3>Isolez plusieurs objets rÃ©pondant Ã  un critÃ¨re de comparaison</h3>
    OK, câ€™est utile de ne pouvoir sÃ©lectionner quâ€™un seul objet.<br>
    Mais admettons que votre utilisateur souhaite voir tous les aliments bio de son hypermarchÃ©, ou bien ceux qui ne sont pas trop caloriques.<br><br>
    <strong><u>WHERE</u></strong>  fonctionne avec un principe de comparaison.<br>
    Dans vos prÃ©cÃ©dentes commandes, vous utilisiez lâ€™opÃ©rateur Ã©gal <strong><u>=</u></strong> pour indiquer que vous ne vouliez que lâ€™objet dont le nom Ã©tait Ã©gal Ã  une valeur.<br><br>
    Or, vous pouvez utiliser tous les opÃ©rateurs classiques, tels que :
    <ul>
      <li>supÃ©rieur Ã  ( > ) ;</li><br>
      <li>infÃ©rieur Ã  ( < ) ;</li><br>
      <li>supÃ©rieur ou Ã©gal Ã  (>=) ;</li><br>
      <li>et infÃ©rieur ou Ã©gal Ã  (<=).</li><br>
    </ul><br>
    <div class="code">
      SELECT * FROM aliment WHERE calories < 90;
    </div><br>
    va afficher tous les aliments dont la <strong>teneur en calories nâ€™excÃ¨de pas (strictement) 90 kcal</strong>

    <h3>Isolez des objets Ã  partir dâ€™une comparaison sur du texte</h3>
    <div class="remarque">
      La limite de  <strong><u>WHERE</u></strong>  est que la comparaison ne peut sâ€™effectuer que sur des donnÃ©es chiffrÃ©es.
    </div><br><br>
    <div class="important">
      Il existe un autre mot clÃ© pour effectuer des comparaisons sur du texte : il sâ€™agit du mot clÃ© <strong><u>LIKE</u></strong>.
    </div><br><br>
    Ce dernier permet de sÃ©lectionner les objets dont le texte dâ€™une colonne rÃ©pond Ã  un modÃ¨le spÃ©cifique.<br>
     Câ€™est en fait lui-mÃªme un opÃ©rateur, car il sâ€™ajoute au sein dâ€™une commande  <strong><u>WHERE</u></strong>.<br>
     <div class="code">
      SELECT * FROM utilisateur WHERE email LIKE â€œ%gmail.comâ€;
     </div><br>
     va afficher tous les utilisateurs dont lâ€™<strong>e-mail se termine par â€œgmail.comâ€</strong>.<br>
     <figure>
      <img src="media/25_like_item_from_table.png" alt="">
      <figcaption>Lâ€™utilisation du pourcentage (%)</figcaption>
    </figure><br>
    <div class="remarque">
    Ce â€œ%gmail.comâ€ signifie que vous souhaitez rÃ©cupÃ©rer tout texte finissant par â€œgmail.comâ€.<br>
    Le pourcentage (%) indique Ã  SQL :
      <ul>
        <li>â€œil peut y avoir autant de texte que tu veux, et aussi long que tu veux avant le â€œgmail.comâ€ ;</li><br>
        <li>
          â€œne prÃªte pas attention au contenu quâ€™il y a avant gmail.com.â€
        </li><br>
      </ul>
    Si vous souhaitiez rÃ©cupÃ©rer le texte qui commence par â€œgmail.comâ€ vous Ã©cririez : â€œgmail.com%â€.<br>
    Enfin, si vous cherchiez tout texte qui contient â€œgmailâ€, peu importe quâ€™il soit au dÃ©but ou Ã  la fin, vous Ã©cririez â€œ%gmail%â€.
    </div>

    <h3>Ordonnez les objets rÃ©cupÃ©rÃ©s pour chaque requÃªte</h3>
    Reprenons lâ€™exemple de notre utilisateur qui cherche Ã  afficher les aliments peu caloriques dans Foodly.<br><br>
    GrÃ¢ce Ã  ce que vous avez appris, vous pouvez dÃ©sormais afficher les aliments dont les calories ne dÃ©passent pas un certain seuil.<br>
    Le mot clÃ© <strong><u>ORDER BY calories ASC</u></strong> permet dâ€™afficher les aliments par ordre croissant de calories.<br>
    <figure>
      <img src="media/26_order_item_from_table.png" alt="">
      <figcaption>Le mot clÃ© ORDER BY</figcaption>
    </figure>
    Ce mot clÃ© vous permet dâ€™ordonner une colonne par ordre croissant (ascending en anglais, dâ€™oÃ¹ le mot clÃ© SQL <strong><u>ASC</u></strong>),<br>
    ou dÃ©croissant (descending en anglais, soit le mot clÃ© <strong><u>DESC</u></strong>).<br>
    Voici donc la commande Ã  effectuer pour afficher les aliments par ordre croissant de calories :<br>
    <div class="code">
      SELECT * FROM aliment ORDER BY calories ASC;
    </div><br><br>
    Bien sÃ»r, vous pouvez mixer les commandes entre elles !<br>
    Voici la commande pour nâ€™afficher que les <strong>aliments dont les calories ne dÃ©passent pas 90 kcal</strong>, mais de maniÃ¨re <strong>dÃ©croissante</strong> :<br>
    <div class="code">
      SELECT * FROM aliment WHERE calories < 90 ORDER BY calories DESC;
    </div><br><br>
    Cette commande fonctionne aussi avec le texte !<br>
    Si vous effectuez un  <strong><u>ORDER BY</u></strong> sur une colonne de texte, celle-ci sera ordonnÃ©e :
    <ul>
      <li>soit dans lâ€™ordre alphabÃ©tique (  <strong><u>ASC</u></strong>  ).<br>
      <strong><u>SELECT * FROM utilisateurs ORDER BY prenom ASC;</u></strong><br>
      affiche les utilisateurs avec les prÃ©noms affichÃ©s par ordre alphabÃ©tique ;
      </li><br>
      <li>soit dans lâ€™ordre opposÃ© (  <strong><u>DESC</u></strong>  ).<br>
        <strong><u>SELECT * FROM utilisateurs ORDER BY prenom DESC;</u></strong><br>
        affiche les utilisateurs avec les prÃ©noms affichÃ©s par ordre anti-alphabÃ©tique.
      </li><br>
    </ul>
    <h3>Ã€ vous de jouer !</h3>
    Imaginons que je vous demande tous les aliments qui ne sont pas bio dans la base, classÃ©s par ordre dÃ©croissant de contenance en protÃ©ines.<br><br>
    <strong><u>SELECT * FROM aliment WHERE bio = false ORDER BY proteines DESC;</u></strong><br><br>
    <video src="media/7_orderby.mp4" controls width="800"></video><br/><br/>

    <h3>En rÃ©sumÃ©</h3>
    <ul>
      <li>Vous avez appris comment filtrer la donnÃ©e que vous souhaitez rÃ©cupÃ©rer avec la commande <strong><u>WHERE</u></strong>(et les opÃ©rateurs comme <strong><u>=</u></strong>ou <strong><u>LIKE</u></strong>).</li><br>
      <li>Vous savez dÃ©sormais ordonner les rÃ©sultats dâ€™une requÃªte SQL avec la commande <strong><u>ORDER BY</u></strong>.</li><br>
    </ul>


    <h5><a href="#sommaire">Sommaire</a></h5>

  
    <h2 id="count">3.2 - Effectuez des opÃ©rations et sauvegardez vos requÃªtes -</h2>

    <h3>Comptez le nombre dâ€™objets rÃ©cupÃ©rÃ©s via une requÃªte</h3>
    Combien dâ€™objets rÃ©pondent Ã  un critÃ¨re (ou une requÃªte SQL) donnÃ© ?<br>
    Par exemple, admettons quâ€™un utilisateur de Foodly souhaite savoir combien il existe dâ€™aliments bio, ou que vous souhaitiez compter le nombre dâ€™utilisateurs dans lâ€™application.<br><br>
    Il existe le mot clÃ© <strong><u>COUNT</u></strong>, qui permet justement cela.<br>
    AppliquÃ© Ã  nâ€™importe quelle commande SQL de type  <strong><u>SELECT</u></strong>  , il vous donnera le nombre dâ€™objets rÃ©cupÃ©rÃ©s plutÃ´t que leur valeur.<br><br>
    <div class="remarque">
      En plus de ne faire â€œque compterâ€,  <strong><u>COUNT</u></strong>  est bien plus rapide Ã  effectuer quâ€™un  <strong><u>SELECT</u></strong>  â€œclassiqueâ€ pour votre base de donnÃ©es.<br>
      Le SGBD et la BDD arriveront Ã  retrouver le rÃ©sultat de votre commande bien plus rapidement (parfois, la diffÃ©rence se compte en minutes !).<br>
      PrivilÃ©giez-le avant dâ€™effectuer des requÃªtes sur un large groupe de donnÃ©es !
    </div><br><br>
    Vous souvenez-vous de la commande que nous avions effectuÃ©e pour rÃ©cupÃ©rer uniquement les utilisateurs dont lâ€™e-mail Ã©tait un Gmail ?<br>
    Comment lâ€™adapter pour connaÃ®tre le nombre dâ€™utilisateurs avec une adresse Gmail dans la base ?<br><br>
    <div class="code">
      SELECT COUNT(*) FROM utilisateur WHERE email LIKE "%gmail.com";
    </div><br><br>
    MySQL vous affiche le nombre dâ€™objets plutÃ´t que leur contenu.<br>
    Vous voyez donc combien dâ€™utilisateurs rÃ©pondent Ã  ce critÃ¨re.<br><br>
    <div class="remarque">
      En appliquant un  <strong><u>COUNT(*)</u></strong>  , vous comptez le nombre dâ€™objets.<br>
      Mais vous pouvez aussi restreindre le comptage Ã  une colonne spÃ©cifique en Ã©crivant  <strong><u>COUNT(colonne)</u></strong> .<br>
      Enfin, vous pouvez aussi compter le nombre dâ€™Ã©lÃ©ments uniques dâ€™une colonne avec  <strong><u>COUNT(DISTINCT colonne)</u></strong>  .
    </div><br><br>
    Par exemple,<strong><u>SELECT COUNT(*)FROM utilisateur;</u></strong> compte tous les utilisateurs,<br>
    tandis que  <strong><u>SELECT COUNT(nom) FROM utilisateur;</u></strong>  compte tous les noms de famille.<br><br>
    Ok, vous allez me dire quâ€™on trouve exactement le mÃªme nombre. Et câ€™est vrai.<br>
    Compter dans une colonne prend vraiment son sens en comptant le nombre de valeurs distinctes.<br><br>
    <strong><u>SELECT COUNT(DISTINCT nom) FROM utilisateur;</u></strong>  comptera uniquement les noms de familles diffÃ©rents, vous permettant de voir si certains utilisateurs ont le mÃªme nom !

    <h3>Effectuez des opÃ©rations sur des donnÃ©es chiffrÃ©es</h3>
    Admettons que lâ€™on souhaite connaÃ®tre le total calorique dâ€™un groupe dâ€™articles, ou bien la contenance moyenne en sucre dâ€™un groupe dâ€™aliments :  au lieu de tout noter Ã  la main depuis la base de donnÃ©es, laissez MySQL effectuer ces opÃ©rations pour vous !<br><br>
    Pour cela, il existe plusieurs mots clÃ©s que vous pouvez appliquer Ã  une colonne lors dâ€™une requÃªte pour en modifier le rÃ©sultat :
    <ul>
      <li><strong><u>AVG</u></strong>  : nous donne la moyenne de la colonne sur la sÃ©lection ;</li><br>
      <li><strong><u>SUM</u></strong>  : nous donne la somme de la colonne sur la sÃ©lection ;</li><br>
      <li><strong><u>MAX</u></strong>  : nous donne le maximum de la colonne sur la sÃ©lection ;</li><br>
      <li><strong><u>MIN</u></strong>  : nous donne le minimum de la colonne sur la sÃ©lection.</li><br>
    </ul><br>
    Envie de connaÃ®tre le maximum de teneur en sucre des aliments dans notre base ?<br>
    Rien de plus simple :<br>
    <div class="code">
      SELECT MAX(sucre) FROM aliment;
    </div><br><br>
    Quelle est la teneur moyenne en calories des aliments de 30 kcal ou plus ?<br>
    <div class="code">
      SELECT AVG(calories) FROM aliment WHERE calories >= 30;
    </div><br><br>
    <h4>Ã€ vous de jouer !</h4>
    Je vous laisse tester ces opÃ©rations avec  <strong><u>MIN</u></strong>  et  <strong><u>SUM</u></strong>  !<br>
    Pour voir Ã  quoi cela ressemble dans le terminal, voici un screencast explicatif oÃ¹ je reprends une Ã  une toutes ces commandes sur la liste des aliments qui ne sont pas bio :<br>
    <div class="code">
      SELECT COUNT(*) FROM aliment WHERE bio = false;
    </div><br>
    Compte le nombre d'aliment qui ne sont pas bio<br><br>
    <div class="code">
      SELECT MAX(proteines) FROM aliment WHERE bio = false;
    </div><br>
    Selectionne l'aliment qui a le max de proteine qui n'est pas bio<br>
     (et affiche le nombre de proteines)<br><br>
     <div class="code">
      SELECT MIN(proteines) FROM aliment WHERE bio = false;
    </div><br>
    Selectionne l'aliment qui a le moins de proteine qui n'est pas bio<br>
     (et affiche le nombre de proteines)<br><br>
     <div class="code">
      SELECT AVG(proteines) FROM aliment WHERE bio = false;
    </div><br>
    Affiche la moyenne de proteines dans les aliments qui ne sont pas bio<br>
     (et affiche le nombre de proteines)<br><br>
    <video src="media/8_min_max_avg_count_from_item.mp4" controls width="800"></video><br/><br/>

    <h3>Sauvegardez vos requÃªtes avec CREATE VIEW</h3>
    MySQL a un systÃ¨me de â€œvuesâ€ qui permet de crÃ©er des tables temporaires Ã  partir dâ€™une commande SQL.<br>
    Entendez par lÃ  que vous allez â€œsauvegarderâ€ une commande SQL pour ne plus avoir Ã  la rÃ©effectuer Ã  chaque fois !<br><br>
    Admettons que vous souhaitiez sauvegarder dans une vue la commande suivante : les utilisateurs dont lâ€™adresse mail est une adresse Gmail.<br>
    Vous utilisez la commandeCREATE VIEW!<br>
    <div class="code">
      CREATE VIEW utilisateurs_gmail_vw AS SELECT * FROM utilisateur WHERE email LIKE "%gmail.com";
    </div><br><br>
    <figure>
      <img src="media/27_create_view.png" alt="">
      <figcaption>La commande CREATE VIEW</figcaption>
    </figure><br><br>
    Je viens de crÃ©er la vue <strong>â€œutilisateurs_gmail_vwâ€</strong>.<br>
    Cette derniÃ¨re sâ€™utilise dÃ©sormais comme une table.<br>
    Ainsi, pour rÃ©cupÃ©rer les utilisateurs avec une adresse Gmail, plus besoin dâ€™Ã©crire ma requÃªte compliquÃ©e !<br>
    Je nâ€™ai plus quâ€™Ã  Ã©crire :<br>
    <div class="code">
      SELECT * FROM utilisateurs_gmail_vw;
    </div><br><br>
    <figure>
      <img src="media/28_select_created_view.png" alt="">
      <figcaption>Utilisation de la commande CREATION VIEW avec SELECT * FROM</figcaption>
    </figure><br><br>
<div class="remarque">
  La convention chez les utilisateurs de SQL est de toujours prÃ©fixer le nom dâ€™une vue avec â€œ_vwâ€, pour la distinguer des â€œvraiesâ€ tables.
</div><br><br>
Le plus utile avec cela, câ€™est que la vue se comporte comme une vraie table.<br>
Vous pouvez ainsi rÃ©appliquer dâ€™autres commandes SQL sur cette derniÃ¨re.<br><br>
Par exemple : afficher les utilisateurs dont lâ€™adresse e-mail est une adresse Gmail ET dont le prÃ©nom contient la lettre â€œmâ€ :<br>
<div class="code">
  SELECT * FROM utilisateurs_gmail_vw WHERE prenom LIKE "%m%";
</div><br><br>
<div class="remarque">
  GrÃ¢ce aux vues, vous pouvez â€œraccourcirâ€ des requÃªtes SQL complexes et rÃ©barbatives, vous permettant dâ€™aller encore plus loin dans vos analyses !
</div><br>
<h4>Ã€ vous de jouer !</h4>
Essayez Ã  prÃ©sent par vous-mÃªme la crÃ©ation d'une vue.<br>
CrÃ©ez une vue reprenant notre liste des aliments non bio, classÃ©s par contenance en protÃ©ines (de maniÃ¨re dÃ©croissante).<br><br>
<div class="code">
  CREATE VIEW aliments_non_bio_vw AS SELECT * FROM aliment WHERE bio = false ORDER BY proteines DESC;
</div><br>
<video src="media/9_create_view.mp4" controls width="800"></video><br/><br/>

<h3>En rÃ©sumÃ©</h3>
<ul>
  <li>
    Vous avez appris Ã  effectuer des opÃ©rations mathÃ©matiques simples avec des mots clÃ©s comme <strong><u>COUNT</u></strong> ou <strong><u>AVG</u></strong>.
  </li><br>
  <li>
    Vous savez sauvegarder des requÃªtes avec <strong><u>CREATE VIEW</u></strong>
  </li><br>
</ul>


<h5><a href="#sommaire">Sommaire</a></h5>

<h2 id="join">3.3 - ImplÃ©mentez des relations entre vos donnÃ©es grÃ¢ce Ã  JOIN -</h2> 
Les bases de donnÃ©es SQL sont dites de type â€œrelationnelâ€.<br>
Cela sous-entend que leur force rÃ©side sur leur capacitÃ© Ã  <strong>relier plusieurs types de donnÃ©es entre elles</strong>.<br>
Pour lâ€™instant, vous avez utilisÃ© de la donnÃ©e sans relations.<br>
Par exemple, pour rÃ©cupÃ©rer ou mettre Ã  jour un utilisateur ou un aliment.<br><br>
Or, si vous reprenez lâ€™exemple de Foodly, lâ€™application doit stocker les aliments quâ€™un utilisateur a scannÃ©s.<br>
Pour ce faire, il faut <strong>stocker les relations entre ces mÃªmes utilisateurs et certains aliments</strong>.<br>
Nous verrons comment mettre en place de telles relations dans la partie 4.<br>
Mais en attendant, voyons comment rÃ©cupÃ©rer des objets selon les relations quâ€™ils ont entre eux.

<h3>Extrayez des informations via une relation 1 Ã  plusieurs</h3>
Beaucoup dâ€™utilisateurs vont utiliser Foodly, et ce, dans plusieurs pays.<br>
Afin de pouvoir sâ€™adapter Ã  chacun, lâ€™application va devoir <strong>stocker la langue prÃ©fÃ©rÃ©e</strong> de chaque utilisateur.<br>
Pour ce faire, la table â€œlangueâ€ a Ã©tÃ© rajoutÃ©e Ã  la base de donnÃ©es <a href="https://github.com/OpenClassrooms-Student-Center/Course-implementez-BDD-SQL/blob/master/partie_3/foodly.sql" target="_blank">Foodly</a> que vous avez tÃ©lÃ©chargÃ©e au dÃ©but de cette partie.<br>
Chaque utilisateur est reliÃ© Ã  une langue.<br>
Et chaque langue peut Ãªtre reliÃ©e Ã  plusieurs utilisateurs.<br>
<figure>
  <img src="media/29_one_to_many.png" alt="">
  <figcaption>La relation un Ã  plusieurs entre les utilisateurs et les langues</figcaption>
</figure><br>
<div class="important">
  On parle alors dâ€™une relation 1 Ã  plusieurs entre utilisateur et langue (one-to-many, en anglais).
</div><br><br>
Pour matÃ©rialiser une telle relation dans une base SQL telle que MySQL, on suit un principe assez simple :
<ol>
  <li>Dans ce cas spÃ©cifique, une langue est reliÃ©e Ã  plusieurs utilisateurs.<br>
    On crÃ©e donc cet objet normalement, comme vous avez pu le faire prÃ©cÃ©demment.<br>
  <div class="code">
    INSERT INTO `langue` VALUES ('franÃ§ais');
  </div>
  </li><br>
  <li>Chaque utilisateur se voyant reliÃ© Ã  une langue,<br>
    câ€™est lâ€™utilisateur qui va devoir stocker lâ€™<strong>id unique</strong> de la langue associÃ©e.<br>
    Par convention, on utilise comme nom de ce champ  <strong><u>{nom de lâ€™objet associÃ©}_id</u></strong>  (donc ici,  <strong><u>langue_id</u></strong>  ).
  </li><br>
  <li></li><br>
</ol>
Les utilisateurs de la base de donnÃ©es mise Ã  jour dans la partie 2 ont ainsi un champ  <strong><u>langue_id</u></strong>  , oÃ¹ est stockÃ© lâ€™<strong>id de la langue</strong> quâ€™ils souhaitent utiliser.<br>
<div class="remarque">
  Par exemple, le premier utilisateur a comme <strong><u>langue_id</u></strong> 1, soit lâ€™id du franÃ§ais dans la table des langues.
</div><br><br>
Imaginez dÃ©sormais quâ€™on vous demande de ressortir toutes les langues utilisÃ©es par les 10 premiers utilisateurs, ou tous les utilisateurs ayant configurÃ© Foodly en anglais.<br>
<div class="important">
  Il existe une commande qui est justement lÃ  pour rÃ©gler ce genre de problÃ¨me.<br>
   La commande <strong><u>JOIN</u></strong>.
</div><br><br>
GrÃ¢ce Ã  cette commande, vous allez pouvoir <strong>expliquer Ã  MySQL comment joindre deux tables selon un identifiant quâ€™elles ont en commun</strong>.<br>
Partons du principe que :
<ul>
  <li>la langue_id du premier utilisateur est le franÃ§ais ;</li><br>
  <li>lâ€™id du franÃ§ais est 1.</li><br>
</ul>
Vous allez spÃ©cifier Ã  MySQL de joindre les tables â€œutilisateurâ€ et â€œlangueâ€ en lui prÃ©cisant que lâ€™id de langue et langue_id de lâ€™utilisateur doivent Ãªtres Ã©gaux !<br><br>
Prenons un exemple.<br>
Regardons tous les utilisateurs avec les langues qui leur sont associÃ©es.<br>
Tapez cette commande dans votre terminal :<br>
<div class="code">
  SELECT * FROM `utilisateur`<br>
  <br>
JOIN `langue`<br>
<br>
ON `utilisateur`.`langue_id` = `langue`.`id`;<br>
</div><br>
Que sâ€™est-il passÃ© dans cette commande ?<br>
<ul>
  <li>Nous avons demandÃ© Ã  MySQL de sÃ©lectionner tous les utilisateurs.<br>
    <strong><u>SELECT * FROM `utilisateur`</u></strong>
  </li><br>
  <li>Auxquels nous voulons joindre les langues.<br>
    <strong><u>JOIN `langue`</u></strong></li><br>
  <li>En prÃ©cisant Ã  MySQL de les relier, en considÃ©rant que lâ€™<strong>id de la langue </strong>est stockÃ©e dans chaque utilisateur dans le champ <strong>langue_id</strong>.<br>
    <strong><u>ON `utilisateur`.`langue_id` = `langue`.`id`</u></strong></li><br>
</ul>
<figure>
  <img src="media/30_join.png" alt="">
  <figcaption>L'utilisation de la commande JOIN</figcaption>
</figure><br><br>
Ici, vous avez utilisÃ© la commande SQL pour lier la totalitÃ© dâ€™une table (utilisateur) avec une autre (langue).<br>
Mais on peut tout Ã  fait limiter cette jointure Ã  seulement quelques objets en particulier.<br><br>
<h4>Ã€ vous de jouer !</h4>
Admettons que je vous demande de me donner tous les noms de famille des utilisateurs ayant sÃ©lectionnÃ© le franÃ§ais.<br>
<div class="code">
  SELECT * FROM utilisateur<br>
  <br>
JOIN langue<br>
<br>
ON utilisateur.langue_id = langue.id WHERE langue.nom = 'franÃ§ais';<br>
</div><br><br>
<video src="media/10_join.mp4" controls width="800"></video><br/><br/>

<h3>Obtenez des informations complexes via une relation plusieurs Ã  plusieurs</h3>
Reprenons ensemble lâ€™idÃ©e premiÃ¨re de lâ€™application Foodly.<br/>
Cette derniÃ¨re sert Ã  des utilisateurs (comme vous et moi) Ã  scanner des aliments.<br/><br/>
Une fois ces aliments scannÃ©s, il serait plus quâ€™utile que la base de donnÃ©es les garde en mÃ©moire,<br/>
afin que les utilisateurs puissent les retrouver par la suite (pour par exemple faire leur prochaine liste de courses).<br/><br/>
Pour ce faire, il faudrait un moyen de stocker dans la BDD tous les aliments qui ont Ã©tÃ© scannÃ©s par un utilisateur prÃ©cis.<br/>
Sachant que :
<ul>
  <li>un mÃªme utilisateur peut stocker plusieurs aliments scannÃ©s ;</li><br>
  <li>un aliment peut lui-mÃªme Ãªtre scannÃ© par plusieurs utilisateurs.</li><br>
</ul>
<figure>
  <img src="media/31_many_to_many.png" alt="">
  <figcaption>La relation un Ã  plusieurs entre les utilisateurs et les aliments</figcaption>
</figure><br>
On parle ici de relation plusieurs Ã  plusieurs.<br>
<strong>Chaque objet dâ€™une table pouvant Ãªtre reliÃ© Ã  plusieurs objets de lâ€™autre table, et vice versa.</strong><br><br>
Or, tout ce que sait faire MySQL (et les bases de donnÃ©es SQL en gÃ©nÃ©ral), câ€™est de stocker une valeur unique par champ.<br>
<strong>Il nâ€™est pas possible par exemple de stocker plusieurs id dâ€™aliments au sein dâ€™un mÃªme utilisateur.</strong><br><br>
Par dÃ©faut, le SQL ne sait modÃ©liser que des relations 1 Ã  plusieurs.<br>
Une relation plusieurs Ã  plusieurs, câ€™est une multitude de relations 1 Ã  plusieurs.<br>
Regardez les tables prÃ©sentes dans la BDD que vous avez tÃ©lÃ©chargÃ©es pour cette partie.<br>
Elle contient une table appelÃ©e  <strong><u>utilisateur_aliment</u></strong><br>
Celle-ci contient des  <strong><u>utilisateur_id</u></strong>   et des  <strong><u>aliment_id</u></strong>  .<br>
Vous lâ€™avez peut-Ãªtre devinÃ© : elle sert Ã  stocker des relations entre un utilisateur et un aliment prÃ©cis.<br><br>
<div class="important">
  On appelle table de liaison ce genre de table.<br>
Par convention, elle prend le nom  <strong><u>{table1}_{table2}</u></strong>  ,<br>
et sert Ã  <strong>relier les tables 1 et 2</strong>  qui y sont stockÃ©es,<br>
en sauvegardant <strong>lâ€™id dâ€™un objet de la table 1</strong>, Ã  lâ€™<strong>id de lâ€™objet de la table 2</strong> correspondant.
</div><br><br>
En rÃ©cupÃ©rant tous les objets prÃ©sents dans cette base,<br>
qui ne sont autres que des relations 1 Ã  plusieurs vers utilisateur et aliment,<br>
on peut reconstituer les relations plusieurs Ã  plusieurs entre ces mÃªmes utilisateurs et aliments !<br><br>
<figure>
  <img src="media/32_table-liaison.png" alt="">
  <figcaption>La table de liaison relie les utilisateurs aux aliments</figcaption>
</figure><br>
On utilise aussi <strong><u>JOIN</u></strong><br>
Voici la commande pour relier tous les utilisateurs aux aliments quâ€™ils ont scannÃ©s :<br>
<div class="code">
  SELECT * FROM utilisateur<br>
  JOIN utilisateur_aliment ON (utilisateur.id = utilisateur_aliment.utilisateur_id)<br>
  JOIN aliment ON (aliment.id = utilisateur_aliment.aliment_id);<br>
</div><br>
<div class="remarque">
  DÃ©composons cette commande ensemble :
<ul>
<li>Nous avons demandÃ© Ã  MySQL de sÃ©lectionner tous les utilisateurs.<br>
  <div class="code">SELECT * FROM `utilisateur`</div>
</li><br><br>
<li>Auxquels nous voulons joindre la table <strong><u>utilisateur_aliment</u></strong>.<br>
  <div class="code">JOIN `utilisateur_aliment`</div>
</li><br><br>
<li>En prÃ©cisant Ã  MySQL de les relier en considÃ©rant<br>
  que lâ€™<strong>id de lâ€™utilisateur</strong> est stockÃ© en tant que <strong><u>utilisateur_id </u></strong><br>
  dans la table <strong><u>utilisateur_aliment</u></strong>.<br>
  <div class="code">ON (utilisateur.id = utilisateur_aliment.utilisateur_id)</div>
</li><br><br>
<li>Ã€ ce  <strong><u>JOIN</u></strong>  ,<br>
   on veut Ã  nouveau lier de la donnÃ©e de la table aliment,<br>
    soit un nouveau  <strong><u>JOIN</u></strong>.<br>
    <div class="code">JOIN `aliment`</div>
  </li><br><br>
<li>Pour ce faire, on prÃ©cise Ã  MySQL que lâ€™<strong>id de lâ€™aliment</strong><br>
   est stockÃ© dans <strong><u>utilisateur_aliment</u></strong><br>
    en tant que <strong><u>aliment_id</u></strong>.<br>
    <div class="code">ON (aliment.id = utilisateur_aliment.utilisateur_id)</div></li><br>
</ul>
</div>
<h4>Ã€ vous de jouer !</h4>
Admettons que vous souhaitiez voir tous les aliments sÃ©lectionnÃ©s par les utilisateurs dont lâ€™adresse e-mail et une adresse Gmail.<br>
<div class="code">
  SELECT * FROM utilisateurs_gmail_vw<br>
  JOIN utilisateur_aliment ON (utilisateurs_gmail_vw.id = utilisateur_aliment.utilisateur_id)<br>
  JOIN aliment ON (aliment.id = utilisateur_aliment.aliment_id);<br>
</div><br>
<video src="media/10_join_multi.mp4.mp4" controls width="800"></video><br/><br/>

<h3>En rÃ©sumÃ©</h3>
<ul>
  <li>
    Vous savez dÃ©sormais joindre plusieurs objets entre eux grÃ¢ce au mot clÃ© JOIN.
  </li><br>
  <li>
    Et ce, que ce soit pour une <strong>relation un Ã  plusieurs</strong><br>
    ou pour une relation <strong>plusieurs Ã  plusieurs</strong> grÃ¢ce Ã  une <strong>table de liaison</strong>.
  </li><br>
</ul>

<h5><a href="#sommaire">Sommaire</a></h5>

  <h2 id="alter_table">4.1 - Modifiez la structure dâ€™un objet avec ALTER TABLE -</h2> 

  <h3>Ajoutez ou supprimez un champ</h3>
  <h4>Ajoutez un champ aux aliments</h4>
  Le dernier rapport sur lâ€™utilisation de Foodly vient de tomber.<br>
  Dans celui-ci, les utilisateurs ont pu voter pour les amÃ©liorations quâ€™ils souhaiteraient voir apparaÃ®tre dans lâ€™application.<br>
  La plus demandÃ©e Ã©tait celle de voir la contenance en vitamines de chaque aliment.<br><br>
  Sachant cela, lâ€™Ã©quipe de Foodly organise une rÃ©union concernant lâ€™implÃ©mentation dâ€™une telle fonctionnalitÃ©.<br>
  Le design est prÃªt, les dÃ©veloppeurs ont codÃ© lâ€™interface, mais il manque une chose cruciale pour rÃ©cupÃ©rer la contenance en vitamines dans lâ€™application : lâ€™ajout de cette donnÃ©e dans la BDD.<br><br>
  Prenons lâ€™exemple de la vitamine C.<br>
  Cette colonne nâ€™apparaÃ®t nulle part dans le schÃ©ma de la table aliment.<br>
  Il nous faut la crÃ©er.<br>
  De la mÃªme maniÃ¨re que vous lâ€™avez fait lors de la premiÃ¨re partie,  il faudra spÃ©cifier son type Ã  MySQL.<br><br>
  Pour ce faire, utilisez la commande <strong><u>ALTER TABLE</u></strong>.<br><br>
  Voyons Ã  quoi ressemble la commande SQL pour rajouter cette colonne, puis dÃ©cortiquons-la ensemble :<br>
  <div class="code">ALTER TABLE aliment ADD vitamines_c FLOAT;</div><br><br>
  Ici, on signale Ã  MySQL :
  <ul>
    <li>
      de modifier la structure dâ€™une table avec <strong><u>ALTER TABLE</u></strong>;
    </li><br>
    <li>quelle table modifier (ici <strong>"alimentâ€</strong>) ;</li><br>
    <li>que la modification va faire ajouter une colonne avec <strong><u>ADD</u></strong>;</li><br>
    <li>le nom de cette nouvelle colonne (ici <strong>â€œvitamines_câ€</strong>) ;</li><br>
    <li>enfin, le type de la colonne (ici,<strong><u>FLOAT</u></strong>, car les vitamines sont stockÃ©es usuellement en mg/100g, valeur dÃ©cimale).</li><br>
  </ul>
  <figure>
    <img src="media/33_alter_table.png" alt="">
    <figcaption>La commande ALTER TABLE</figcaption>
  </figure><br>
<div class="remarque">
  Ã€ noter que le type nâ€™est parfois pas seul.<br>
  On peut aussi (comme dans la partie 1), mentionner Ã  MySQL quâ€™on rajoute une colonne qui est :
  <ul>
    <li>une clÃ© primaire (<strong><u>PRIMARY KEY</u></strong>) ;</li><br>
    <li>avec une valeur par dÃ©faut (<strong><u>DEFAULT valeur_par_dÃ©faut</u></strong>) ;</li><br>
    <li>non nulle (<strong><u>NOT NULL</u></strong>).<br>
    Auquel cas il faudra prÃ©ciser une valeur par dÃ©faut,<br>
    MySQL crÃ©ant la colonne avec la valeur â€œNULLâ€ pour tous les objets existants dans cette table ;</li><br>
  </ul>
</div><br>
<h4>Ã€ vous de jouer !</h4>
Admettons que lâ€™on souhaite rajouter une colonne Ã  la table <strong>â€œlangueâ€</strong><br>
Cette colonne, câ€™est le <a href="http://www.lingoes.net/en/translator/langcode.htm" target="_blank">code ISO des langues</a> (par exemple : â€œfr-frâ€ pour le FranÃ§ais de mÃ©tropole).<br><br>
<div class="code">
  ALTER TABLE langue ADD code VARCHAR(100);
</div><br>
<video src="media/11_alter_table.mp4" controls width="800"></video><br/><br/>
<h4>Supprimez un champ aux aliments</h4>
Le management de chez Foodly nous mentionne dâ€™autres changements Ã  effectuer sur lâ€™application, qui impliquent la BDD.<br>
Les utilisateurs de Foodly nâ€™utilisent que trÃ¨s rarement la fonctionnalitÃ© pour savoir si un aliment est bio ou non.<br>
Les dÃ©veloppeurs, dans leur volontÃ© de toujours diminuer la dette technique (Ã  savoir, le code Ã  maintenir), souhaitent retirer lâ€™affichage bio de la fiche des aliments sur Foodly.<br>
En tant que gestionnaire de la BDD, vous pensez quâ€™il serait pratique de faire de mÃªme de votre cÃ´tÃ©, pour Ã©viter de maintenir un champ qui ne sera plus mis Ã  jour.<br>
Pour ce faire, rien de plus simple :<br>
<strong>supprimons la colonne â€œbioâ€ de la table â€œalimentâ€ avec <strong><u>DROP</u></strong>.</strong><br>
Voici la commande SQL pour le faire :<br>
<div class="code">
  ALTER TABLE aliment DROP bio;
</div><br><br>
DÃ©composons cette commande ensemble :
<ul>
  <li>On modifie toujours la structure dâ€™une table avecALTER TABLE.</li><br>
  <li>On lui signale Ã  nouveau quelle table modifier (ici, â€œalimentâ€).</li><br>
  <li>On lui indique que la modification va supprimer une colonne avecDROP.</li><br>
  <li>On mentionne le nom de la colonne Ã  supprimer (ici, â€œbioâ€).</li><br>
</ul><br>
<figure>
  <img src="media/34_drop_item_from_table.png" alt="">
  <figcaption>Utilisation de DROP</figcaption>
</figure><br><br>
<div class="important">
  Il faut nÃ©anmoins faire attention lorsquâ€™on utilise cette commande.<br>
  Une fois la colonne supprimÃ©e, celle-ci est dÃ©finitivement dÃ©truite et ne peut plus Ãªtre rÃ©cupÃ©rÃ©e.<br>
  Vous perdez lâ€™information pour tous les objets prÃ©sents en base.<br>
  Ã€ utiliser avec parcimonie !
</div><br><br>
<h4>Ã€ vous de jouer !</h4>
Maintenant, admettons que le service lÃ©gal de Foodly vous dise que stocker des noms de famille va Ã  lâ€™encontre des conditions de protection des donnÃ©es des utilisateurs.<br>
Comment feriez-vous pour supprimer les noms de famille ?<br><br>
<div class="code">
  ALTER TABLE utilisateur DROP nom;
</div><br><br>
<video src="media/12_drop_item_from_table.mp4" controls width="800"></video><br/><br/>

<h3>Modifiez un champ existant</h3>
<h4>Modifiez un champ des aliments</h4>
Le management de Foodly revient encore une fois vers vous !<br>
AprÃ¨s avoir regardÃ© des utilisateurs se servir de Foodly, ils se sont rendu compte que les utilisateurs souhaiteraient pouvoir filtrer les aliments selon leurs apports calorifiques avec plus de prÃ©cision.<br>
Pour ce faire, les dÃ©veloppeurs vous indiquent quâ€™ils vont devoir comparer les calories de deux aliments entre eux, et ce, Ã  la virgule prÃ¨s.<br>
Or, les calories sont actuellement stockÃ©es sous forme dâ€™entiers (sans dÃ©cimales, du coup).<br>
Voici la commande pour effectuer cette opÃ©ration :<br><br>
<div class="code">
  ALTER TABLE aliment MODIFY calories FLOAT;
</div><br><br>
Analysons cette commande :
<ul>
  <li>On modifie toujours la structure dâ€™une table avec <strong><u>ALTER TABLE</u></strong>.</li><br>
  <li>On lui signale Ã  nouveau quelle table modifier (ici, <strong>â€œalimentâ€</strong>).</li><br>
  <li>On lui indique que la modification va modifier le type dâ€™une colonne avec <strong><u>MODIFY</u></strong>.</li><br>
  <li>On mentionne le nom de la colonne Ã  modifier (ici, <strong>â€œcaloriesâ€</strong>).</li><br>
  <li>On indique le nouveau type de la colonne (ici,<strong><u>FLOAT</u></strong>).</li><br>
</ul><br><br>
<figure>
  <img src="media/35_alter_table_modify.png" alt="">
  <figcaption>L'utilisation de FLOAT</figcaption>
</figure><br>
<h4>Ã€ vous de jouer !</h4>
Les dÃ©veloppeurs viennent vous voir affolÃ©s !<br>
Certains utilisateurs ne peuvent pas sâ€™inscrire car leur email dÃ©passe les 255 caractÃ¨res.<br>
Pourriez-vous augmenter la limite Ã  500 ?<br><br>
<div class="code">
  ALTER TABLE utilisateur MODIFY email varchar(500);
</div><br>
<video src="media/13_alter_table_modify.mp4" controls width="800"></video><br/><br/>

<h4>Renommez un champ des aliments</h4>
Ce coup-ci, câ€™est la designer de Foodly qui revient vers vous : les utilisateurs sont perturbÃ©sâ€¦<br>
Pour chaque aliment, la valeur en protÃ©ines, vitamines, matiÃ¨res grasses est mentionnÃ©e au pluriel.<br>
Alors que les sucres, eux, sont mentionnÃ©s au singulier.<br>
Ce qui perturbe la comprÃ©hension des aliments par les utilisateurs.<br>
Comment renommer cette colonne dans la BDD ?<br>
Voici la commande Ã  effectuer :<br>
<div class="code">
  ALTER TABLE aliment CHANGE sucre sucres FLOAT;
</div><br><br>
Voici les explications de cette commande :
<ul>
  <li>On modifie toujours la structure dâ€™une table avec <strong><u>ALTER TABLE</u></strong>.</li><br>
  <li>On lui signale Ã  nouveau quelle table modifier (ici, <strong>â€œalimentâ€</strong>).</li><br>
  <li>On lui indique que la modification va modifier le nom dâ€™une colonne avec <strong><u>CHANGE</u></strong>.</li>
  <li>On mentionne le nom de la colonne Ã  renommer, ainsi que son nouveau nom (ici, <strong><u>sucre</u></strong> devient <strong><u>sucres</u></strong>).</li>
  <li>On indique le nouveau type de la colonne (ici,<strong><u>FLOAT</u></strong>).</li>
</ul><br><br>
Câ€™est une spÃ©cificitÃ© propre Ã  MySQL : pour renommer une colonne, il faut aussi indiquer son type.<br>
Ce qui nâ€™est pas nÃ©cessaire si vous utilisez un autre SGBD.<br>
Cela permet de modifier Ã  la fois le nom et le type dâ€™une colonne dans une seule commande.<br>
Et ce, mÃªme si vous ne souhaitez pas le modifier(rÃ©utilisez alors le mÃªme type)<br>
<h4>Ã€ vous de jouer !</h4>
A prÃ©sent, les dÃ©veloppeurs trouvent que le nom <strong><u>code</u></strong> dans la table des langues est peu explicite.<br>
Ils aimeraient quâ€™elle sâ€™appelle <strong><u>code_pays</u></strong>.<br><br>
<div class="code">
  ALTER TABLE langue CHANGE code code_pays varchar(100);
</div><br>

<video src="media/14_alter_table_change.mp4" controls width="800"></video><br/><br/>

<h3>En rÃ©sumÃ©</h3>
<ul>
  <li>Vous savez que toute modification de la structure dâ€™un objet sâ€™effectue avec une commande <strong><u>ALTER TABLE</u></strong>.</li>
  <li>Pour ajouter un champ Ã  un objet, il vous faut utiliser le mot clÃ© <strong><u>ADD</u></strong>.</li>
  <li>Pour supprimer un champ, le mot clÃ© est <strong><u>DROP</u></strong>.</li>
  <li>Pour modifier un champ, le mot clÃ© est <strong><u>MODIFY</u></strong> pour en modifier la structure, <strong><u>CHANGE</u></strong> pour le renommer.</li>
</ul>


    <h5><a href="#sommaire">Sommaire</a></h5>

  <h2 id="relation_un_plusieurs">4.2 - Ajoutez une relation un Ã  plusieurs -</h2> 
  Voyons dans ce chapitre comment ajouter une relation un Ã  plusieurs, en crÃ©ant notre table <strong>"famille"</strong>.<br>
  Puis retrouvez dans le chapitre suivant comment ajouter une relation plusieurs Ã  plusieurs avec la crÃ©ation de la table <strong>"lieu"</strong>.
  <h3>Ajoutez une nouvelle table "famille"</h3>
  Nous avons obtenu une nouvelle demande dâ€™amÃ©lioration de lâ€™application de la part des utilisateurs !<br>
  Ces derniers aimeraient pouvoir trier les aliments selon leur <strong>"famille"</strong>.<br>
  Par exemple, regrouper ensemble les fruits, les lÃ©gumes, les viandes, etc.<br>
  Les dÃ©veloppeurs pensent quâ€™il serait utile de sÃ©parer ces familles des aliments.<br>
  En effet, ils pensent que les familles dâ€™aliments pourront Ãªtre utilisÃ©es de maniÃ¨re indÃ©pendante, pas forcÃ©ment uniquement sur les fiches des aliments.<br>
  Par exemple, pour effectuer un rÃ©sumÃ© de la consommation en fruits ou lÃ©gumes dâ€™une personne sur un mois, ou la rÃ©partition au sein de ses courses.<br><br>
  <div class="remarque">
    Pour cela, il faudrait que les familles dâ€™aliments soient sur une table distincte de celle des aliments !
  </div><br><br>
  Maintenant que vous savez <strong>joindre</strong> plusieurs tables entre elles, il est temps de construire une telle relation entre tables.<br>
  Avant de pouvoir relier les aliments Ã  leur famille, il faut dâ€™abordâ€¦ eh bien, crÃ©er la table famille !<br>
  Pour lâ€™instant, un objet de type famille ne devra contenir que le nom de cette famille (â€œfruitâ€, â€œviandeâ€, etc.).<br><br>
  <div class="code">
    CREATE TABLE famille (<br>
    <br>
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,<br>
    <br>
    nom VARCHAR(100) NOT NULL<br>
    <br>
    );<br>
  </div><br><br>
  Maintenant que cette table est crÃ©Ã©e, insÃ©rons un objet dans celle-ci.<br>
  Disons, lâ€™objet qui va reprÃ©senter les lÃ©gumes.<br><br>
  <div class="code">
    INSERT INTO famille (`nom`) VALUES ('lÃ©gumes');
  </div><br><br>
  Et voilÃ , vous voici en possession dâ€™une nouvelle table â€œfamilleâ€ qui dispose dâ€™un objet â€œlÃ©gumesâ€.

  <h3>Ajoutez la relation entre famille et aliment</h3>
  Une des choses Ã  dÃ©terminer lors de lâ€™ajout dâ€™une relation, câ€™est de savoir si :
  <ul>
    <li>câ€™est une relation <strong>un Ã  plusieurs</strong> ;</li>
    <li>ou une relation <strong>plusieurs Ã  plusieurs</strong>.</li>
  </ul><br>
  Ici, un aliment peut avoir une seule famille, mais une famille peut Ãªtre prÃ©sente sur plusieurs aliments.<br>
  Par exemple, une poire et une pomme font partie de la famille â€œfruitsâ€.<br>
  <div class="remarque">
    Il sâ€™agit donc dâ€™une relation un Ã  plusieurs.
  </div><br><br>
  Dans le cadre dâ€™une telle relation, câ€™est <strong>lâ€™objet qui se trouve du cÃ´tÃ© â€œplusieursâ€ de la relation qui va Ãªtre modifiÃ©</strong>, ici les aliments.<br>
  On va devoir y stocker lâ€™id de lâ€™objet â€œunâ€ associÃ©, par exemple â€œfruitsâ€.<br>
  Ici, les aliments vont donc devoir Ãªtre mis Ã  jour pour y stocker une rÃ©fÃ©rence Ã  leur famille.<br>
  Cette rÃ©fÃ©rence, par convention, sera lâ€™id de la famille.<br><br>
  Voici les Ã©tapes que lâ€™on va suivre :
  <ol>
    <li>Ajout du champ <strong><u>famille_id</u></strong> sur les aliments.<br>
    </li>
    <li>Modification de ce champ pour signaler Ã  MySQL que câ€™est une rÃ©fÃ©rence Ã  la table famille.
    </li>
    <li>Modification dâ€™un objet pour y stocker une relation.</li>
  </ol><br>
  Ajout du champ <strong><u>famille_id</u></strong> sur les aliments.<br>
    <div class="code">
      ALTER TABLE aliment<br>
      ADD famille_id INT NOT NULL;<br>
    </div><br><br>
      Il faut quâ€™on indique Ã  MySQL que ce champ est une rÃ©fÃ©rence Ã  une autre table,<br>
      en lui prÃ©cisant quel champ de cette autre table on rÃ©fÃ©rence.<br>
      Pour modifier le champ famille_id, on utilise la commande :<br>
      <div class="code">
        ALTER TABLE aliment<br>
        ADD FOREIGN KEY (famille_id) REFERENCES famille (id)<br>
        ON DELETE CASCADE;<br>
      </div><br>
      Voyons ensemble ce que cette commande signifie :
      <ul>
        <li>On signale Ã  MySQL quâ€™on souhaite modifier la table <strong>â€œalimentâ€</strong>, pour y ajouter une colonne<br>
           (enfin, plutÃ´t y ajouter une contrainte, dans ce cas prÃ©cis).
        </li>
        <li>
          On dit Ã  MySQL que la colonne <strong><u>famille_id</u></strong> est une clÃ© Ã©trangÃ¨re (foreign key en anglais),<br>
          soit une rÃ©fÃ©rence Ã  une colonne dâ€™une autre table (ici, avec la partie  <strong><u>FOREIGN KEY (famille_id)</u></strong>  ).
        </li>
        <li>
          On indique ensuite ce Ã  quoi cette clÃ© fait rÃ©fÃ©rence.<br>
          Soit, dans notre cas, la colonne <strong>â€œidâ€</strong> de la table <strong>â€œfamilleâ€</strong> (soit la commande  <strong><u>REFERENCES famille(id)</u></strong>  ).
        </li>
        <li>
          Enfin, sÃ»rement la partie la plus obscure pour vous, on indique Ã  MySQL le comportement Ã  adopter en cas de suppression de lâ€™objet â€œuniqueâ€ (ici, la â€œfamilleâ€).<br>
          Admettons que je vienne de crÃ©er ma famille â€œfruitsâ€, et quâ€™elle soit reliÃ©e Ã  mes objets â€œpommeâ€ et â€œpoireâ€.<br>
          Que se passe-t-il si je supprime la famille â€œfruitsâ€ ?<br>
          Eh bien, MySQL a besoin de le savoir.<br>
          Pour cela, on lui indique via la commande<strong><u>ON DELETE</u></strong>.<br>
          Cette derniÃ¨re peut prendre une option parmi celles-ci :
          <ul>
            <li><strong><u>RESTRICT</u></strong> ou <strong><u>NO ACTION</u>  : MySQL va empÃªcher la suppression tant que â€œfruitsâ€ est rÃ©fÃ©rencÃ© sur au moins un objet â€œalimentâ€.</strong></li>
            <li><strong><u>SET NULL</u></strong>: MySQL va autoriser la suppression de â€œfruitsâ€, et remplacer â€œfamille_idâ€ sur â€œpommeâ€ et â€œpoireâ€ par la valeur NULL.</li>
            <li><strong><u>CASCADE</u></strong> lâ€™option la plus courante, mais la plus dangereuse.<br>
              Ici, MySQL va supprimer â€œpoireâ€ et â€œpommeâ€ en mÃªme temps que â€œfruitsâ€ (il va donc supprimer tous les objets reliÃ©s).</li>
          </ul>
        </li>
      </ul>
      <figure>
        <img src="media/36_ON-DELETE.png" alt="">
        <figcaption>Actions de la commande ON DELETE</figcaption>
      </figure><br><BR>
      VoilÃ , MySQL sait que â€œfamille_idâ€ est une rÃ©fÃ©rence Ã  lâ€™id de la table famille !<BR>
      Reste maintenant Ã  mettre Ã  jour vos aliments !<BR>
      Ajouter la relation de lâ€™objet â€œharicots vertsâ€ vers la famille â€œlÃ©gumesâ€.<br>
      Voici la commande :<br>
      <div class="code">
        UPDATE `aliment` SET `famille_id` = '1' WHERE `nom` = 'haricots verts';
      </div><br><br>
      <div class="remarque">
        Nâ€™oubliez pas, â€œlÃ©gumesâ€ ayant Ã©tÃ© ajoutÃ© en premier Ã  la table â€œfamilleâ€, il a lâ€™id numÃ©ro 1. 
      </div><br><br>
      Pour vÃ©rifier que cela a bien fonctionnÃ©, vous pouvez sÃ©lectionner les haricots verts avec leur famille grÃ¢ce Ã  un <strong><u>JOIN</u></strong>.<br>
      <div class="code">
        SELECT * FROM aliment<br>
        JOIN famille ON aliment.famille_id = famille.id<br>
        WHERE<br>aliment.nom = "haricots verts";
      </div><br><br>
      GrÃ¢ce Ã  cette commande, vous verrez apparaÃ®tre un tableau rÃ©capitulatif, oÃ¹ la famille de â€œharicots vertsâ€ est bien â€œlÃ©gumesâ€.<br><br>
      Il ne vous reste plus quâ€™Ã  ajouter les autres familles vous-mÃªme, rajouter sa famille Ã  chaque aliment, et le tour est jouÃ© !
      <h4>Ã€ vous de jouer !</h4>
      Faisons un petit exercice :<br>
      On souhaite rajouter les rÃ©ductions disponibles sur les aliments.<br>
      Une rÃ©duction pouvant Ãªtre la mÃªme pour plusieurs aliments mais chaque aliment pouvant nâ€™avoir quâ€™une seule rÃ©duction, il sâ€™agit dâ€™une relation un Ã  plusieurs.<br>
      Les rÃ©ductions sont uniquement constituÃ©es dâ€™un champ â€œvaleurâ€, qui va contenir la rÃ©duction au format texte.<br>
      Comment feriez-vous pour crÃ©er cette table et la lier aux aliments ?<br><br>
      Creation de la table "reduction"<br>
      <div class="code">
      CREATE TABLE reduction<br>
      (id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,<br>
      valeur VARCHAR(100) NOT NULL).<br>
      </div><br>
      Creation des valeurs<br>
      <div class="code">
        INSERT INTO reduction (valeur) VALUES ('-30%');
      </div><br>
      <div class="code">
        INSERT INTO reduction (valeur) VALUES ('-50%');
      </div><br>
      Ajout de la colonne <strong><u>reduction_id</u></strong><br>
      <div class="code">
        ALTER TABLE aliment ADD reduction_id INT;<br>
      </div><br>
      Ajout de la liaison des tables<br>
      <div class="code">
        ALTER TABLE aliment<br>
        ADD FOREIGN KEY (reduction_id)<br>
        REFERENCES reduction (id);<br>
        ON DELETE SET NULL;
      </div><br>
      Affecter une reduction de 50% Ã  l'aliment dont l'id=1<br>
      <div class="code">
        UPDATE aliment SET reduction_id=1 WHERE id=1;
      </div><br>
      Utilisation de <strong><u>JOIN</u></strong><br>
      <div class="code">
        SELECT * from aliment JOIN reduction ON aliment.reduction_id = reduction.id WHERE aliment.id=1;
      </div><br><br>
      <video src="media/15_alter_table_join_one_to_many.mp4" controls width="800"></video><br/><br/>
      <h3>En rÃ©sumÃ©</h3>
      Vous savez ajouter une relation un Ã  plusieurs entre deux objets en ajoutant Ã  lâ€™objet A un champ qui contiendra lâ€™id (ou clÃ© primaire) de lâ€™objet B.
      
      
      <h5><a href="#sommaire">Sommaire</a></h5>

      <h2 id="relation_plusieurs_plusieurs">4.3 - Ajoutez une relation plusieurs Ã  plusieurs -</h2>
      Souvenez-vous on aimerait ensuite ajouter le type de magasin oÃ¹ sont prÃ©sents les aliments.<br>
      Un mÃªme aliment pouvant Ãªtre prÃ©sent dans plusieurs lieux, nous allons crÃ©er une relation plusieurs Ã  plusieurs.
      <h3>Ajoutez une nouvelle table â€œlieuâ€</h3>
      La derniÃ¨re demande de mise Ã  jour des utilisateurs est arrivÃ©e !<br>
      Ces derniers rÃ©clament une chose en thÃ©orie simple : pouvoir visualiser dans lâ€™application de Foodly dans quel magasin sont disponibles leurs aliments prÃ©fÃ©rÃ©s.<br>
      Par exemple, savoir si leur jambon de prÃ©dilection est disponible aussi bien Ã  Carrefour que chez Leclerc.<br>
      Les dÃ©veloppeurs se sont de nouveau regroupÃ©s : il va falloir <strong>stocker les lieux de vente dans la BDD</strong>.<br>
      Un lieu pouvant vendre plusieurs aliments, et ces mÃªmes aliments pouvant Ãªtre vendus dans plusieurs lieux, vous allez devoir crÃ©er une <strong>relation plusieurs Ã  plusieurs</strong>.<br>
      Mais avant toute chose, il vous faut crÃ©er la nouvelle table des lieux de vente (que nous allons sobrement appeler â€œlieuâ€).<br>
      Un lieu de vente, câ€™est :
      <ul>
        <li>un nom (exemple : Carrefour City) ;</li>
        <li>un type (exemple : supermarchÃ©).</li>
      </ul><br><br>
      <div class="code">
        CREATE TABLE lieu (<br>
        id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,<br>
        nom VARCHAR(100) NOT NULL,<br>
        type VARCHAR(100) NOT NULL<br>
        );<br>
      </div><br><br>
      insÃ©rons un lieu dans cette derniÃ¨re, partons sur un simple Carrefour City<br>
      <div class="code">
        INSERT INTO `lieu` (`nom`, `type`) VALUES ('Carrefour City', 'supermarchÃ©');
      </div>
      La nouvelle table est crÃ©Ã©e, et un objet y a Ã©tÃ© insÃ©rÃ©.<br>
      Passons maintenant aux choses sÃ©rieuses en crÃ©ant la relation plusieurs Ã  plusieurs avec les aliments.

      <h3>Ajoutez la table de liaison</h3>
      Les aliments vont avoir des relations un Ã  plusieurs avec la table de liaison.<br>
      Les lieux, eux aussi, vont disposer de telles relations avec cette table.<br>
      Et câ€™est en reliant ces deux tables via cette table de liaison que vous allez pouvoir ressortir les relations entre lieux et aliments.<br><br>
      Pour ce faire, une table de liaison doit Ãªtre crÃ©Ã©e.<br>
      Par convention, elle doit toujours avoir cette forme :
      <ul>
        <li>Son nom doit regrouper les deux tables quâ€™elle relie, sous la forme : <strong>â€œtable1_table2â€</strong>.</li>
        <li>Elle nâ€™a que deux champs Ã  stocker : <strong><u>table1_id</u></strong> et <strong><u>table2_id</u></strong>.<br>
          Soit les id de chaque objet quâ€™elle relie.
          <ul>
            <li>Ces id sont donc des rÃ©fÃ©rences aux id des autres tables.</li>
          </ul>
        </li>
        <li>Sa clÃ© primaire nâ€™est autre que lâ€™association de ces deux id (association qui doit toujours Ãªtre unique).</li>
      </ul><br><br>
      Dans notre cas, cela donne ceci en commande SQL :<br>
      <div class="code">
        CREATE TABLE aliment_lieu (<br>
          aliment_id INT NOT NULL,<br>
          lieu_id INT NOT NULL,<br>
          FOREIGN KEY (aliment_id) REFERENCES aliment (id) ON DELETE RESTRICT ON UPDATE CASCADE,<br>
          FOREIGN KEY (lieu_id) REFERENCES lieu (id) ON DELETE RESTRICT ON UPDATE CASCADE,<br>
          PRIMARY KEY (aliment_id, lieu_id)<br>
          <br>
          );<br>
      </div><br><br>
      DÃ©cortiquons cette commande ensemble :
      <ul>
        <li>On crÃ©e une <strong>nouvelle table</strong> avec le nom des deux tables quâ€™elle relie (ici la table <strong><â€œalimentâ€/strong>, ainsi que la table <strong>â€œlieuâ€</strong>).</li>
        <li>On ajoute les rÃ©fÃ©rences aux id de ces deux tables :
          <ul>
            <li><strong><u>aliment_id</u></strong>, qui est une rÃ©fÃ©rence aux id de la table <strong>â€œalimentâ€</strong> ;</li>
            <li><strong><u>lieu_id</u></strong>, qui est une rÃ©fÃ©rence aux id de la table <strong>â€œlieuâ€</strong> ;</li>
            <li>on signale Ã  MySQL comment mettre Ã  jour la BDD en cas de suppression ou de mise Ã  jour dâ€™un objet de â€œaliment_lieuâ€.</li>
          </ul>
        </li>
        <li>
          On explique Ã  MySQL que lâ€™id de cette table sera lâ€™association entre les deux id prÃ©cÃ©dents.
        </li>
      </ul><br>
      <div class="remarque">
        <strong><u>ON UPDATE</u></strong> est le comportement que doit adopter MySQL en cas de mise Ã  jour dâ€™un champ.<br>
        Il peut avoir les mÃªmes options que <strong><u>ON DELETE</u></strong>
      </div><br><br>
      <figure>
        <img src="media/37_ON-update.png" alt="">
        <figcaption>Actions de la commande ON UPDATE</figcaption>
      </figure><br>
      Admettons que le â€œoeufâ€ prÃ©sent dans notre BDD soit vendu chez â€œCarrefour Cityâ€.<br>
      Il vous faudrait alors crÃ©er un objet dans <strong>â€œaliment_lieuâ€</strong>, avec lâ€™<strong><u>id</u></strong> de â€œoeufâ€ ainsi que lâ€™<strong><u>id</u></strong> de â€œCarrefour Cityâ€.<br><br>
      Retrouvez ces id dans votre BDD et Ã©crivez la commande SQL pour crÃ©er cette relation.<br>
      Sachant que 3 est lâ€™id de â€œoeufâ€, 1 celui du â€œCarrefour Cityâ€, cela donne Ã§a :<br>
      <div class="code">
        INSERT INTO `aliment_lieu` (`aliment_id`, `lieu_id`) VALUES ('3', '1');
      </div><br><br>
      Le fait que le blanc de dinde soit vendu Ã  Carrefour est stockÃ© en base de donnÃ©es.<br><br>
      Pour retrouver cette relation, il vous faudra faire un double <strong><u>JOIN</u></strong>.<br>
      <div class="code">
        SELECT * FROM aliment<br>
        JOIN aliment_lieu ON aliment.id = aliment_lieu.aliment_id<br>
        JOIN lieu ON lieu.id = aliment_lieu.lieu_id<br>
        WHERE aliment.id = 3;<br>
      </div><br><br>
      <div class="remarque">
        Ici, on joint la table aliment Ã  la table lieu via la table de liaison, comme si câ€™Ã©tait une simple relation un Ã  plusieurs rÃ©pÃ©tÃ©e.
      </div><br>
      <h3>Ã€ vous de jouer !</h3>
      On souhaite savoir quels sont les appareils sur lesquels les utilisateurs ont installÃ© Foodly (par exemple : mac, pc, android, etc).<br>
      Un utilisateur peut utiliser Foodly sur plusieurs appareils, et un mÃªme appareil peut Ãªtre commun Ã  plusieurs utilisateurs.<br>
      Il sâ€™agit dâ€™une relation plusieurs Ã  plusieurs<br><br>
      Un appareil est uniquement constituÃ© de son type au format texte.<br>
      Comment feriez-vous pour crÃ©er cette table et la lier aux utilisateurs ?<br><br>
      Creation de la table <strong>"appareil"</strong><br>
      <div class="code">
        CREATE TABLE appareil (<br>
        id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,<br>
        type VARCHAR(100) NOT NULL);
      </div><br>
      Ajout d'appareil dans la table <strong>"appareil"</strong><br>
      <div class="code">
        INSERT INTO appareil (type) VALUES ('Iphone');
      </div><br>
      <div class="code">
        INSERT INTO appareil (type) VALUES ('Android');
      </div><br>
      <div class="code">
        INSERT INTO appareil (type) VALUES ('PC');
      </div><br>
      <div class="code">
        INSERT INTO appareil (type) VALUES ('MAC');
      </div><br>
      Creation de la table de liaison <strong>utilisateur_appareil</strong><br>
      <div class="code">
        CREATE TABLE utilisateur_appareil (
          utilisateur_id INT NOT NULL,<br>
          appareil_id INT NOT NULL,<br>
          FOREIGN KEY (utilisateur_id) REFERENCES utilisateur (id) ON DELETE RESTRICT ON UPDATE CASCADE,<br>
          FOREIGN KEY (appareil_id) REFERENCES appareil (id) ON DELETE RESTRICT ON UPDATE CASCADE,<br>
          PRIMARY KEY (utilisateur_id, appareil_id)<br>
        )
      </div><br>
      Lier le premier utilisateur (id=1) Ã  ses appareils<br>
      <div class="code">
        INSERT INTO utilisateur_appareil (utilisateur_id, appareil_id)<br>
        VALUES<br>
        (1,2);
      </div><br>
      <div class="code">
        INSERT INTO utilisateur_appareil (utilisateur_id, appareil_id)<br>
        VALUES<br>
        (1,4);
      </div><br>
      Verification du lien<br>
      <div class="code">
        SELECT * FROM utilisateur<br>
        JOIN utilisateur_appareil ON utilisateur.id = utilisateur_appareil.utilisateur_id<br>
        JOIN appareil ON appareil.id = utilisateur_appareil.appareil_id<br>
        WHERE  utilisateur.id = 1;<br>
      </div><br><br>
<video src="media/16_alter_table_join_many_to_many.mp4" controls width="800"></video><br/><br/>

<h3>En rÃ©sumÃ©</h3>
Vous savez ajouter une <strong>relation plusieurs Ã  plusieurs</strong> entre deux objets en <strong>crÃ©ant une table de liaison</strong> qui contiendra les <strong>id de chaque objet</strong>.

  </body>
</html>
